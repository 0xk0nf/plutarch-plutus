<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Internal.ScottEncoding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScott"><span class="hs-identifier">PlutusTypeScott</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier">PScottEncoded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier">PScottEncoded</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../generics-sop/html/src"><span class="hs-identifier">Generics.SOP</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">All</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">Nil</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-operator">(:*)</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">NS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">S</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">Z</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">SListI</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">SListI2</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">SOP</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">case_SList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">cpara_SList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier">para_SList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.html"><span class="hs-identifier">Plutarch.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier">PDelayed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier">PType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier">Term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#pdelay"><span class="hs-identifier">pdelay</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#pforce"><span class="hs-identifier">pforce</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier">plam'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#plet"><span class="hs-identifier">plet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%23"><span class="hs-operator">(#)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator">(:--&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html"><span class="hs-identifier">Plutarch.Internal.Generic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier">PCode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html#PGeneric"><span class="hs-identifier">PGeneric</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html#gpfrom"><span class="hs-identifier">gpfrom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html#gpto"><span class="hs-identifier">gpto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html"><span class="hs-identifier">Plutarch.Internal.PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#DerivedPInner"><span class="hs-identifier">DerivedPInner</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier">PInner</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier">PlutusType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusTypeStrat"><span class="hs-identifier">PlutusTypeStrat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusTypeStratConstraint"><span class="hs-identifier">PlutusTypeStratConstraint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#derivedPCon"><span class="hs-identifier">derivedPCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#derivedPMatch"><span class="hs-identifier">derivedPMatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier">pcon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pcon%27"><span class="hs-identifier">pcon'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier">pmatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#pmatch%27"><span class="hs-identifier">pmatch'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Quantification.html"><span class="hs-identifier">Plutarch.Internal.Quantification</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Quantification.html#PForall"><span class="hs-identifier">PForall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Quantification.html#PForall"><span class="hs-identifier">PForall</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">data</span><span> </span><span id="PlutusTypeScott"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScott"><span class="hs-identifier hs-var">PlutusTypeScott</span></a></span></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ScottFn%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-var">ScottFn'</span></a></span></span><span> </span><span id="local-6989586621679923445"><span class="annot"><a href="#local-6989586621679923445"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span id="local-6989586621679923444"><span class="annot"><a href="#local-6989586621679923444"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>  </span><span id="ScottFn%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-var">ScottFn'</span></a></span></span><span> </span><span id="local-6989586621679923443"><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679923443"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679923443"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span id="ScottFn%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-var">ScottFn'</span></a></span></span><span> </span><span id="local-6989586621679923440"><span id="local-6989586621679923441"><span id="local-6989586621679923442"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679923442"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679923441"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923440"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679923442"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923441"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923440"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ScottFn"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-var">ScottFn</span></a></span></span><span> </span><span id="local-6989586621679923439"><span class="annot"><a href="#local-6989586621679923439"><span class="hs-identifier hs-type">xs</span></a></span></span><span> </span><span id="local-6989586621679923438"><span class="annot"><a href="#local-6989586621679923438"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>  </span><span id="ScottFn"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-var">ScottFn</span></a></span></span><span> </span><span id="local-6989586621679923437"><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679923437"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier hs-type">PDelayed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923437"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span id="ScottFn"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-var">ScottFn</span></a></span></span><span> </span><span id="local-6989586621679923435"><span id="local-6989586621679923436"><span class="annot"><a href="#local-6989586621679923436"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923435"><span class="hs-identifier hs-type">r</span></a></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923436"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923435"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- scottList l r = map (flip scottFn r) l</span><span>
</span><span id="line-49"></span><span class="hs-keyword">type</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-50"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="ScottList"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-var">ScottList</span></a></span></span><span> </span><span id="local-6989586621679923434"><span class="annot"><a href="#local-6989586621679923434"><span class="hs-identifier hs-type">code</span></a></span></span><span> </span><span id="local-6989586621679923433"><span class="annot"><a href="#local-6989586621679923433"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-51"></span><span>  </span><span id="ScottList"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-var">ScottList</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-52"></span><span>  </span><span id="ScottList"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-var">ScottList</span></a></span></span><span> </span><span id="local-6989586621679923430"><span id="local-6989586621679923431"><span id="local-6989586621679923432"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679923432"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679923431"><span class="hs-identifier hs-type">xss</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923430"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923432"><span class="hs-identifier hs-type">xs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923430"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923431"><span class="hs-identifier hs-type">xss</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923430"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">newtype</span><span> </span><span id="PScottEncoded"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-var">PScottEncoded</span></a></span></span><span> </span><span id="local-6989586621679923732"><span class="annot"><a href="#local-6989586621679923732"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679923731"><span class="annot"><a href="#local-6989586621679923731"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923733"><span class="annot"><a href="#local-6989586621679923733"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PScottEncoded"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-var">PScottEncoded</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923733"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923732"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923731"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923731"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679923739"><span id="local-6989586621679923740"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusType"><span class="hs-identifier hs-type">PlutusType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923740"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923739"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PInner"><span class="hs-identifier hs-var">PInner</span></a></span></span><span> </span><span id="local-6989586621679923739"><span id="local-6989586621679923740"><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923740"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923739"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923740"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923739"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923739"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span id="local-6989586621679923425"><span class="annot"><span class="annottext">pcon' :: forall (s :: S).
PScottEncoded a r s -&gt; Term s (PInner (PScottEncoded a r))
</span><a href="#local-6989586621679923425"><span class="hs-identifier hs-var hs-var hs-var hs-var">pcon'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span id="local-6989586621679923424"><span class="annot"><span class="annottext">Term s (ScottFn (ScottList a r) r)
</span><a href="#local-6989586621679923424"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term s (ScottFn (ScottList a r) r)
</span><a href="#local-6989586621679923424"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span id="local-6989586621679923423"><span class="annot"><span class="annottext">pmatch' :: forall (s :: S) (b :: PType).
Term s (PInner (PScottEncoded a r))
-&gt; (PScottEncoded a r s -&gt; Term s b) -&gt; Term s b
</span><a href="#local-6989586621679923423"><span class="hs-identifier hs-var hs-var hs-var hs-var">pmatch'</span></a></span></span><span> </span><span id="local-6989586621679923422"><span class="annot"><span class="annottext">Term s (PInner (PScottEncoded a r))
</span><a href="#local-6989586621679923422"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679923421"><span class="annot"><span class="annottext">PScottEncoded a r s -&gt; Term s b
</span><a href="#local-6989586621679923421"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PScottEncoded a r s -&gt; Term s b
</span><a href="#local-6989586621679923421"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: [[PType]]) (r :: PType) (s :: S).
Term s (ScottFn (ScottList a r) r) -&gt; PScottEncoded a r s
</span><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-var">PScottEncoded</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PInner (PScottEncoded a r))
</span><a href="#local-6989586621679923422"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">newtype</span><span> </span><span id="PLamL%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLamL%27"><span class="hs-identifier hs-var">PLamL'</span></a></span></span><span> </span><span id="local-6989586621679923730"><span class="annot"><a href="#local-6989586621679923730"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923729"><span class="annot"><a href="#local-6989586621679923729"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679923728"><span class="annot"><a href="#local-6989586621679923728"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PLamL%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLamL%27"><span class="hs-identifier hs-var">PLamL'</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPLamL%27%3APLamL%27"><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
PLamL' s b as
-&gt; (NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLamL%27%3APLamL%27"><span class="hs-identifier hs-var hs-var">unPLamL'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923730"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923728"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923730"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923729"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923730"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923728"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923729"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-comment">-- Explicitly variadic `plam`.</span><span>
</span><span id="line-64"></span><span id="local-6989586621679923718"><span id="local-6989586621679923719"><span id="local-6989586621679923721"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#plamL%27"><span class="hs-identifier hs-type">plamL'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923721"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923719"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923721"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923719"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923718"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923719"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923721"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923718"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-65"></span><span id="plamL%27"><span class="annot"><span class="annottext">plamL' :: forall (as :: [PType]) (s :: S) (b :: PType).
SListI @PType as =&gt;
(NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#plamL%27"><span class="hs-identifier hs-var hs-var">plamL'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
PLamL' s b as
-&gt; (NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLamL%27%3APLamL%27"><span class="hs-identifier hs-var">unPLamL'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    SListI @k ys =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">para_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
((NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b))
-&gt; PLamL' s b as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLamL%27"><span class="hs-identifier hs-var">PLamL'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923415"><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s b
</span><a href="#local-6989586621679923415"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s b
</span><a href="#local-6989586621679923415"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLamL%27"><span class="hs-identifier hs-type">PLamL'</span></a></span><span> </span><span id="local-6989586621679923413"><span class="annot"><span class="annottext">(NP @PType (Term s) ys -&gt; Term s b) -&gt; Term s (ScottFn' ys b)
</span><a href="#local-6989586621679923413"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
((NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b))
-&gt; PLamL' s b as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLamL%27"><span class="hs-identifier hs-var">PLamL'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923412"><span class="annot"><span class="annottext">NP @PType (Term s) ((':) @PType y ys) -&gt; Term s b
</span><a href="#local-6989586621679923412"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
(Term s a -&gt; Term s b) -&gt; Term s (a :--&gt; b)
</span><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier hs-var">plam'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923411"><span class="annot"><span class="annottext">Term s y
</span><a href="#local-6989586621679923411"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(NP @PType (Term s) ys -&gt; Term s b) -&gt; Term s (ScottFn' ys b)
</span><a href="#local-6989586621679923413"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923410"><span class="annot"><span class="annottext">NP @PType (Term s) ys
</span><a href="#local-6989586621679923410"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ((':) @PType y ys) -&gt; Term s b
</span><a href="#local-6989586621679923412"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s y
</span><a href="#local-6989586621679923411"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-operator hs-var">:*</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ys
</span><a href="#local-6989586621679923410"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">newtype</span><span> </span><span id="PLamL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLamL"><span class="hs-identifier hs-var">PLamL</span></a></span></span><span> </span><span id="local-6989586621679923696"><span class="annot"><a href="#local-6989586621679923696"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923695"><span class="annot"><a href="#local-6989586621679923695"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621679923694"><span class="annot"><a href="#local-6989586621679923694"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PLamL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLamL"><span class="hs-identifier hs-var">PLamL</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPLamL%3APLamL"><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
PLamL s b as
-&gt; (NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLamL%3APLamL"><span class="hs-identifier hs-var hs-var">unPLamL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923696"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923694"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923696"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923695"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923696"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923694"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923695"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- `pdelay`s the 0-arity case.</span><span>
</span><span id="line-70"></span><span id="local-6989586621679923687"><span id="local-6989586621679923688"><span id="local-6989586621679923689"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#plamL"><span class="hs-identifier hs-type">plamL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923689"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923688"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923689"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923688"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923687"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923688"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923689"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923687"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-71"></span><span id="plamL"><span class="annot"><span class="annottext">plamL :: forall (as :: [PType]) (s :: S) (b :: PType).
SListI @PType as =&gt;
(NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#plamL"><span class="hs-identifier hs-var hs-var">plamL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
PLamL s b as
-&gt; (NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLamL%3APLamL"><span class="hs-identifier hs-var">unPLamL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]). SListI @k ys =&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">case_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
((NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b))
-&gt; PLamL s b as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLamL"><span class="hs-identifier hs-var">PLamL</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923404"><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s b
</span><a href="#local-6989586621679923404"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType). Term s a -&gt; Term s (PDelayed a)
</span><a href="Plutarch.Internal.html#pdelay"><span class="hs-identifier hs-var">pdelay</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s b
</span><a href="#local-6989586621679923404"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (b :: PType) (as :: [PType]).
((NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b))
-&gt; PLamL s b as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLamL"><span class="hs-identifier hs-var">PLamL</span></a></span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (b :: PType).
SListI @PType as =&gt;
(NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn' as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#plamL%27"><span class="hs-identifier hs-var">plamL'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">newtype</span><span> </span><span id="PAppL%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PAppL%27"><span class="hs-identifier hs-var">PAppL'</span></a></span></span><span> </span><span id="local-6989586621679923665"><span class="annot"><a href="#local-6989586621679923665"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923664"><span class="annot"><a href="#local-6989586621679923664"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923663"><span class="annot"><a href="#local-6989586621679923663"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PAppL%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PAppL%27"><span class="hs-identifier hs-var">PAppL'</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPAppL%27%3APAppL%27"><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PAppL' s r as
-&gt; Term s (ScottFn' as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPAppL%27%3APAppL%27"><span class="hs-identifier hs-var hs-var">unPAppL'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923665"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923663"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923664"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923665"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923663"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923665"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923664"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621679923656"><span id="local-6989586621679923657"><span id="local-6989586621679923658"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#pappL%27"><span class="hs-identifier hs-type">pappL'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923658"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923657"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn%27"><span class="hs-identifier hs-type">ScottFn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923658"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923656"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923657"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923658"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923657"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923656"><span class="hs-identifier hs-type">c</span></a></span></span></span></span><span>
</span><span id="line-76"></span><span id="pappL%27"><span class="annot"><span class="annottext">pappL' :: forall (as :: [PType]) (s :: S) (c :: PType).
SListI @PType as =&gt;
Term s (ScottFn' as c) -&gt; NP @PType (Term s) as -&gt; Term s c
</span><a href="Plutarch.Internal.ScottEncoding.html#pappL%27"><span class="hs-identifier hs-var hs-var">pappL'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PAppL' s r as
-&gt; Term s (ScottFn' as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPAppL%27%3APAppL%27"><span class="hs-identifier hs-var">unPAppL'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    SListI @k ys =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">para_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(Term s (ScottFn' as r) -&gt; NP @PType (Term s) as -&gt; Term s r)
-&gt; PAppL' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PAppL%27"><span class="hs-identifier hs-var">PAppL'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923393"><span class="annot"><span class="annottext">Term s (ScottFn' ('[] @PType) c)
</span><a href="#local-6989586621679923393"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (ScottFn' ('[] @PType) c)
</span><a href="#local-6989586621679923393"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PAppL%27"><span class="hs-identifier hs-type">PAppL'</span></a></span><span> </span><span id="local-6989586621679923390"><span class="annot"><span class="annottext">Term s (ScottFn' ys c) -&gt; NP @PType (Term s) ys -&gt; Term s c
</span><a href="#local-6989586621679923390"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(Term s (ScottFn' as r) -&gt; NP @PType (Term s) as -&gt; Term s r)
-&gt; PAppL' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PAppL%27"><span class="hs-identifier hs-var">PAppL'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923389"><span class="annot"><span class="annottext">Term s (ScottFn' ((':) @PType y ys) c)
</span><a href="#local-6989586621679923389"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679923381"><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923381"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-operator hs-type">:*</span></a></span><span> </span><span id="local-6989586621679923380"><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923380"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term s (ScottFn' ys c) -&gt; NP @PType (Term s) ys -&gt; Term s c
</span><a href="#local-6989586621679923390"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s (ScottFn' ((':) @PType y ys) c)
</span><a href="#local-6989586621679923389"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#%23"><span class="hs-operator hs-var">#</span></a></span><span> </span><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923381"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923380"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">newtype</span><span> </span><span id="PAppL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PAppL"><span class="hs-identifier hs-var">PAppL</span></a></span></span><span> </span><span id="local-6989586621679923644"><span class="annot"><a href="#local-6989586621679923644"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923643"><span class="annot"><a href="#local-6989586621679923643"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923642"><span class="annot"><a href="#local-6989586621679923642"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PAppL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PAppL"><span class="hs-identifier hs-var">PAppL</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPAppL%3APAppL"><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PAppL s r as
-&gt; Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPAppL%3APAppL"><span class="hs-identifier hs-var hs-var">unPAppL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923644"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923642"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923643"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923644"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923642"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923644"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923643"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span id="local-6989586621679923635"><span id="local-6989586621679923636"><span id="local-6989586621679923637"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#pappL"><span class="hs-identifier hs-type">pappL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923637"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923636"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottFn"><span class="hs-identifier hs-type">ScottFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923637"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923635"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923636"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923637"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923636"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923635"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-81"></span><span id="pappL"><span class="annot"><span class="annottext">pappL :: forall (as :: [PType]) (s :: S) (r :: PType).
SListI @PType as =&gt;
Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pappL"><span class="hs-identifier hs-var hs-var">pappL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PAppL s r as
-&gt; Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPAppL%3APAppL"><span class="hs-identifier hs-var">unPAppL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]). SListI @k ys =&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">case_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r)
-&gt; PAppL s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PAppL"><span class="hs-identifier hs-var">PAppL</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923374"><span class="annot"><span class="annottext">Term s (ScottFn ('[] @PType) r)
</span><a href="#local-6989586621679923374"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType). Term s (PDelayed a) -&gt; Term s a
</span><a href="Plutarch.Internal.html#pforce"><span class="hs-identifier hs-var">pforce</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (ScottFn ('[] @PType) r)
</span><a href="#local-6989586621679923374"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r)
-&gt; PAppL s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PAppL"><span class="hs-identifier hs-var">PAppL</span></a></span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (c :: PType).
SListI @PType as =&gt;
Term s (ScottFn' as c) -&gt; NP @PType (Term s) as -&gt; Term s c
</span><a href="Plutarch.Internal.ScottEncoding.html#pappL%27"><span class="hs-identifier hs-var">pappL'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">newtype</span><span> </span><span id="PLetL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLetL"><span class="hs-identifier hs-var">PLetL</span></a></span></span><span> </span><span id="local-6989586621679923627"><span class="annot"><a href="#local-6989586621679923627"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923626"><span class="annot"><a href="#local-6989586621679923626"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923625"><span class="annot"><a href="#local-6989586621679923625"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PLetL"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLetL"><span class="hs-identifier hs-var">PLetL</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunPLetL%3APLetL"><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PLetL s r as
-&gt; NP @PType (Term s) as
-&gt; (NP @PType (Term s) as -&gt; Term s r)
-&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLetL%3APLetL"><span class="hs-identifier hs-var hs-var">unPLetL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923627"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923625"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923627"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923625"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923627"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923626"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923627"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923626"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span id="local-6989586621679923618"><span id="local-6989586621679923619"><span id="local-6989586621679923620"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#pletL%27"><span class="hs-identifier hs-type">pletL'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923620"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923619"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923620"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923619"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923620"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923619"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923618"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923619"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923618"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-86"></span><span id="pletL%27"><span class="annot"><span class="annottext">pletL' :: forall (as :: [PType]) (s :: S) (r :: PType).
SListI @PType as =&gt;
NP @PType (Term s) as
-&gt; (NP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pletL%27"><span class="hs-identifier hs-var hs-var">pletL'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
PLetL s r as
-&gt; NP @PType (Term s) as
-&gt; (NP @PType (Term s) as -&gt; Term s r)
-&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunPLetL%3APLetL"><span class="hs-identifier hs-var">unPLetL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (xs :: [k]) (r :: [k] -&gt; Type).
SListI @k xs =&gt;
r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    SListI @k ys =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">para_SList</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(NP @PType (Term s) as
 -&gt; (NP @PType (Term s) as -&gt; Term s r) -&gt; Term s r)
-&gt; PLetL s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLetL"><span class="hs-identifier hs-var">PLetL</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span id="local-6989586621679923363"><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s r
</span><a href="#local-6989586621679923363"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ('[] @PType) -&gt; Term s r
</span><a href="#local-6989586621679923363"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PLetL"><span class="hs-identifier hs-type">PLetL</span></a></span><span> </span><span id="local-6989586621679923361"><span class="annot"><span class="annottext">NP @PType (Term s) ys
-&gt; (NP @PType (Term s) ys -&gt; Term s r) -&gt; Term s r
</span><a href="#local-6989586621679923361"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [PType]).
(NP @PType (Term s) as
 -&gt; (NP @PType (Term s) as -&gt; Term s r) -&gt; Term s r)
-&gt; PLetL s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#PLetL"><span class="hs-identifier hs-var">PLetL</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679923355"><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923355"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-operator hs-type">:*</span></a></span><span> </span><span id="local-6989586621679923354"><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923354"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679923353"><span class="annot"><span class="annottext">NP @PType (Term s) ((':) @PType y ys) -&gt; Term s r
</span><a href="#local-6989586621679923353"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
Term s a -&gt; (Term s a -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.html#plet"><span class="hs-identifier hs-var">plet</span></a></span><span> </span><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923355"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923352"><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923352"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="annottext">NP @PType (Term s) ys
-&gt; (NP @PType (Term s) ys -&gt; Term s r) -&gt; Term s r
</span><a href="#local-6989586621679923361"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923354"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679923351"><span class="annot"><span class="annottext">NP @PType (Term s) ys
</span><a href="#local-6989586621679923351"><span class="hs-identifier hs-var">xs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ((':) @PType y ys) -&gt; Term s r
</span><a href="#local-6989586621679923353"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923352"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-operator hs-var">:*</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) ys
</span><a href="#local-6989586621679923351"><span class="hs-identifier hs-var">xs'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span id="local-6989586621679923604"><span id="local-6989586621679923606"><span id="local-6989586621679923607"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#pletL"><span class="hs-identifier hs-type">pletL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">All</span></a></span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923607"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923606"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923607"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923606"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923607"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923606"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923604"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923606"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923604"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-92"></span><span id="pletL"><span class="annot"><span class="annottext">pletL :: forall (as :: [[PType]]) (s :: S) (r :: PType).
All @[PType] (SListI @PType) as =&gt;
SOP @PType (Term s) as
-&gt; (SOP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pletL"><span class="hs-identifier hs-var hs-var">pletL</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">Z</span></a></span><span> </span><span id="local-6989586621679923342"><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923342"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679923341"><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923341"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (r :: PType).
SListI @PType as =&gt;
NP @PType (Term s) as
-&gt; (NP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pletL%27"><span class="hs-identifier hs-var">pletL'</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923342"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923340"><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923340"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923341"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">SOP</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NS @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923340"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#pletL"><span class="hs-identifier hs-var">pletL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span id="local-6989586621679923335"><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923335"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679923334"><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923334"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (s :: S) (r :: PType).
All @[PType] (SListI @PType) as =&gt;
SOP @PType (Term s) as
-&gt; (SOP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pletL"><span class="hs-identifier hs-var">pletL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">SOP</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923335"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span id="local-6989586621679923333"><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923333"><span class="hs-identifier hs-var">xs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923334"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">SOP</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (xs :: [k]) (x :: k).
NS @k a xs -&gt; NS @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">S</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923333"><span class="hs-identifier hs-var">xs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">newtype</span><span> </span><span id="GPCon%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPCon%27"><span class="hs-identifier hs-var">GPCon'</span></a></span></span><span> </span><span id="local-6989586621679923580"><span class="annot"><a href="#local-6989586621679923580"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923579"><span class="annot"><a href="#local-6989586621679923579"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923578"><span class="annot"><a href="#local-6989586621679923578"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GPCon%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPCon%27"><span class="hs-identifier hs-var">GPCon'</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunGPCon%27%3AGPCon%27"><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
GPCon' s r as
-&gt; NP @PType (Term s) (ScottList as r)
-&gt; NS @[PType] (NP @PType (Term s)) as
-&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunGPCon%27%3AGPCon%27"><span class="hs-identifier hs-var hs-var">unGPCon'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923580"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923578"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923579"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923580"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923578"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923580"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923579"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">{- |
  `gpcon'`, given a *partial* scott encoding (as a `PLamL`) and a sum choice, applies
  that encoding to the sum choice.

  The partial encoding is any tail of the full scott encoded function, such that
  one of its elements corresponds to the sum choice.
-}</span><span>
</span><span id="line-104"></span><span id="local-6989586621679923570"><span id="local-6989586621679923571"><span id="local-6989586621679923573"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#gpcon%27"><span class="hs-identifier hs-type">gpcon'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923573"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923571"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923573"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923570"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923571"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923573"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923571"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923570"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-105"></span><span id="gpcon%27"><span class="annot"><span class="annottext">gpcon' :: forall (as :: [[PType]]) (s :: S) (r :: PType).
SListI2 @PType as =&gt;
NP @PType (Term s) (ScottList as r)
-&gt; NS @[PType] (NP @PType (Term s)) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#gpcon%27"><span class="hs-identifier hs-var hs-var">gpcon'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
GPCon' s r as
-&gt; NP @PType (Term s) (ScottList as r)
-&gt; NS @[PType] (NP @PType (Term s)) as
-&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunGPCon%27%3AGPCon%27"><span class="hs-identifier hs-var">unGPCon'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k (c :: k -&gt; Constraint) (xs :: [k])
       (proxy :: (k -&gt; Constraint) -&gt; Type) (r :: [k] -&gt; Type).
All @k c xs =&gt;
proxy c
-&gt; r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    (c y, All @k c ys) =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">cpara_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
(NP @PType (Term s) (ScottList as r)
 -&gt; NS @[PType] (NP @PType (Term s)) as -&gt; Term s r)
-&gt; GPCon' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#GPCon%27"><span class="hs-identifier hs-var">GPCon'</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">NP @PType (Term s) (ScottList ('[] @[PType]) r)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPCon%27"><span class="hs-identifier hs-type">GPCon'</span></a></span><span> </span><span id="local-6989586621679923324"><span class="annot"><span class="annottext">NP @PType (Term s) (ScottList ys r)
-&gt; NS @[PType] (NP @PType (Term s)) ys -&gt; Term s r
</span><a href="#local-6989586621679923324"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
(NP @PType (Term s) (ScottList as r)
 -&gt; NS @[PType] (NP @PType (Term s)) as -&gt; Term s r)
-&gt; GPCon' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#GPCon%27"><span class="hs-identifier hs-var">GPCon'</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679923315"><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923315"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-operator hs-type">:*</span></a></span><span> </span><span id="local-6989586621679923314"><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923314"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">Z</span></a></span><span> </span><span id="local-6989586621679923309"><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923309"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (r :: PType).
SListI @PType as =&gt;
Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pappL"><span class="hs-identifier hs-var">pappL</span></a></span><span> </span><span class="annot"><span class="annottext">Term s x
</span><a href="#local-6989586621679923315"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) x
</span><a href="#local-6989586621679923309"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span id="local-6989586621679923305"><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923305"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) (ScottList ys r)
-&gt; NS @[PType] (NP @PType (Term s)) ys -&gt; Term s r
</span><a href="#local-6989586621679923324"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) xs
</span><a href="#local-6989586621679923314"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) xs
</span><a href="#local-6989586621679923305"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- | Generic version of `pcon'`</span><span>
</span><span id="line-110"></span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#gpcon"><span class="hs-identifier hs-type">gpcon</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679923551"><span class="annot"><a href="#local-6989586621679923551"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679923550"><span class="annot"><a href="#local-6989586621679923550"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923549"><span class="annot"><a href="#local-6989586621679923549"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923551"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923550"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923551"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923549"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923551"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923549"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923551"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923550"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span id="gpcon"><span class="annot"><span class="annottext">gpcon :: forall (as :: [[PType]]) (r :: PType) (s :: S).
(SListI @PType (ScottList as r), SListI2 @PType as) =&gt;
SOP @PType (Term s) as -&gt; Term s (PScottEncoded as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#gpcon"><span class="hs-identifier hs-var hs-var">gpcon</span></a></span></span><span> </span><span id="local-6989586621679923297"><span class="annot"><span class="annottext">SOP @PType (Term s) as
</span><a href="#local-6989586621679923297"><span class="hs-identifier hs-var">fields'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (s :: S) (r :: PType).
All @[PType] (SListI @PType) as =&gt;
SOP @PType (Term s) as
-&gt; (SOP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pletL"><span class="hs-identifier hs-var">pletL</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) as
</span><a href="#local-6989586621679923297"><span class="hs-identifier hs-var">fields'</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span id="local-6989586621679923296"><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) as
</span><a href="#local-6989586621679923296"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: [[PType]]) (r :: PType) (s :: S).
Term s (ScottFn (ScottList a r) r) -&gt; PScottEncoded a r s
</span><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-var">PScottEncoded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (b :: PType).
SListI @PType as =&gt;
(NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#plamL"><span class="hs-identifier hs-var">plamL</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923295"><span class="annot"><span class="annottext">NP @PType (Term s) (ScottList as r)
</span><a href="#local-6989586621679923295"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (s :: S) (r :: PType).
SListI2 @PType as =&gt;
NP @PType (Term s) (ScottList as r)
-&gt; NS @[PType] (NP @PType (Term s)) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#gpcon%27"><span class="hs-identifier hs-var">gpcon'</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) (ScottList as r)
</span><a href="#local-6989586621679923295"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) as
</span><a href="#local-6989586621679923296"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923549"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923550"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">newtype</span><span> </span><span id="GPMatch%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPMatch%27"><span class="hs-identifier hs-var">GPMatch'</span></a></span></span><span> </span><span id="local-6989586621679923543"><span class="annot"><a href="#local-6989586621679923543"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621679923542"><span class="annot"><a href="#local-6989586621679923542"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923541"><span class="annot"><a href="#local-6989586621679923541"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GPMatch%27"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPMatch%27"><span class="hs-identifier hs-var">GPMatch'</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AunGPMatch%27%3AGPMatch%27"><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
GPMatch' s r as
-&gt; (SOP @PType (Term s) as -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunGPMatch%27%3AGPMatch%27"><span class="hs-identifier hs-var hs-var">unGPMatch'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923543"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923541"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923543"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923542"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923543"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923541"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923542"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#gpmatch%27"><span class="hs-identifier hs-type">gpmatch'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679923536"><span class="annot"><a href="#local-6989586621679923536"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679923534"><span class="annot"><a href="#local-6989586621679923534"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923535"><span class="annot"><a href="#local-6989586621679923535"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923536"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923535"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923536"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923535"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923534"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">NP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923535"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923536"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923534"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span id="gpmatch%27"><span class="annot"><span class="annottext">gpmatch' :: forall (as :: [[PType]]) (r :: PType) (s :: S).
SListI2 @PType as =&gt;
(SOP @PType (Term s) as -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#gpmatch%27"><span class="hs-identifier hs-var hs-var">gpmatch'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
GPMatch' s r as
-&gt; (SOP @PType (Term s) as -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#%24sel%3AunGPMatch%27%3AGPMatch%27"><span class="hs-identifier hs-var">unGPMatch'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k (c :: k -&gt; Constraint) (xs :: [k])
       (proxy :: (k -&gt; Constraint) -&gt; Type) (r :: [k] -&gt; Type).
All @k c xs =&gt;
proxy c
-&gt; r ('[] @k)
-&gt; (forall (y :: k) (ys :: [k]).
    (c y, All @k c ys) =&gt;
    r ys -&gt; r ((':) @k y ys))
-&gt; r xs
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">cpara_SList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy @k t
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
((SOP @PType (Term s) as -&gt; Term s r)
 -&gt; NP @PType (Term s) (ScottList as r))
-&gt; GPMatch' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#GPMatch%27"><span class="hs-identifier hs-var">GPMatch'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type). NP @k a ('[] @k)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Nil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#GPMatch%27"><span class="hs-identifier hs-type">GPMatch'</span></a></span><span> </span><span id="local-6989586621679923285"><span class="annot"><span class="annottext">(SOP @PType (Term s) ys -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList ys r)
</span><a href="#local-6989586621679923285"><span class="hs-identifier hs-var">prev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (r :: PType) (as :: [[PType]]).
((SOP @PType (Term s) as -&gt; Term s r)
 -&gt; NP @PType (Term s) (ScottList as r))
-&gt; GPMatch' s r as
</span><a href="Plutarch.Internal.ScottEncoding.html#GPMatch%27"><span class="hs-identifier hs-var">GPMatch'</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679923284"><span class="annot"><span class="annottext">SOP @PType (Term s) ((':) @[PType] y ys) -&gt; Term s r
</span><a href="#local-6989586621679923284"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (b :: PType).
SListI @PType as =&gt;
(NP @PType (Term s) as -&gt; Term s b) -&gt; Term s (ScottFn as b)
</span><a href="Plutarch.Internal.ScottEncoding.html#plamL"><span class="hs-identifier hs-var">plamL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679923283"><span class="annot"><span class="annottext">NP @PType (Term s) y
</span><a href="#local-6989586621679923283"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) ((':) @[PType] y ys) -&gt; Term s r
</span><a href="#local-6989586621679923284"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">SOP</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NS @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">Z</span></a></span><span> </span><span class="annot"><span class="annottext">NP @PType (Term s) y
</span><a href="#local-6989586621679923283"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (x :: k) (xs :: [k]).
a x -&gt; NP @k a xs -&gt; NP @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-operator hs-var">:*</span></a></span><span> </span><span class="annot"><span class="annottext">(SOP @PType (Term s) ys -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList ys r)
</span><a href="#local-6989586621679923285"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span id="local-6989586621679923282"><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) ys
</span><a href="#local-6989586621679923282"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) ((':) @[PType] y ys) -&gt; Term s r
</span><a href="#local-6989586621679923284"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k (f :: k -&gt; Type) (xss :: [[k]]).
NS @[k] (NP @k f) xss -&gt; SOP @k f xss
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (a :: k -&gt; Type) (xs :: [k]) (x :: k).
NS @k a xs -&gt; NS @k a ((':) @k x xs)
</span><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-var">S</span></a></span><span> </span><span class="annot"><span class="annottext">NS @[PType] (NP @PType (Term s)) ys
</span><a href="#local-6989586621679923282"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#gpmatch"><span class="hs-identifier hs-type">gpmatch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679923526"><span class="annot"><a href="#local-6989586621679923526"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621679923525"><span class="annot"><a href="#local-6989586621679923525"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679923524"><span class="annot"><a href="#local-6989586621679923524"><span class="hs-identifier hs-type">s</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923526"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923525"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923526"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923524"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923526"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923525"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SOP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923524"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923526"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923524"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923525"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923524"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923525"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-135"></span><span id="gpmatch"><span class="annot"><span class="annottext">gpmatch :: forall (as :: [[PType]]) (r :: PType) (s :: S).
(SListI @PType (ScottList as r), SListI2 @PType as) =&gt;
Term s (PScottEncoded as r)
-&gt; (SOP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#gpmatch"><span class="hs-identifier hs-var hs-var">gpmatch</span></a></span></span><span> </span><span id="local-6989586621679923275"><span class="annot"><span class="annottext">Term s (PScottEncoded as r)
</span><a href="#local-6989586621679923275"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621679923274"><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923274"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PScottEncoded as r)
</span><a href="#local-6989586621679923275"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span id="local-6989586621679923273"><span class="annot"><span class="annottext">Term s (ScottFn (ScottList as r) r)
</span><a href="#local-6989586621679923273"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (as :: [PType]) (s :: S) (r :: PType).
SListI @PType as =&gt;
Term s (ScottFn as r) -&gt; NP @PType (Term s) as -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#pappL"><span class="hs-identifier hs-var">pappL</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (ScottFn (ScottList as r) r)
</span><a href="#local-6989586621679923273"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (r :: PType) (s :: S).
SListI2 @PType as =&gt;
(SOP @PType (Term s) as -&gt; Term s r)
-&gt; NP @PType (Term s) (ScottList as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#gpmatch%27"><span class="hs-identifier hs-var">gpmatch'</span></a></span><span> </span><span class="annot"><span class="annottext">SOP @PType (Term s) as -&gt; Term s r
</span><a href="#local-6989586621679923274"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier hs-type">PCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923517"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923516"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="SListIScottList"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#SListIScottList"><span class="hs-identifier hs-var">SListIScottList</span></a></span></span><span> </span><span id="local-6989586621679923517"><span class="annot"><a href="#local-6989586621679923517"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679923516"><span class="annot"><a href="#local-6989586621679923516"><span class="hs-identifier hs-type">r</span></a></span></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679923510"><span id="local-6989586621679923511"><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#ScottList"><span class="hs-identifier hs-type">ScottList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier hs-type">PCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923511"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679923510"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#SListIScottList"><span class="hs-identifier hs-type">SListIScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923511"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923510"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-keyword">class</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679923507"><span class="annot"><a href="#local-6989586621679923507"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#SListIScottList"><span class="hs-identifier hs-type">SListIScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923509"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923507"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier hs-type">PCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923509"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html#PGeneric"><span class="hs-identifier hs-type">PGeneric</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923509"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-145"></span><span>  </span><span id="PlutusTypeScottConstraint"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScottConstraint"><span class="hs-identifier hs-var">PlutusTypeScottConstraint</span></a></span></span><span> </span><span id="local-6989586621679923509"><span class="annot"><a href="#local-6989586621679923509"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-146"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679923503"><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679923504"><span class="annot"><a href="#local-6989586621679923504"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#SListIScottList"><span class="hs-identifier hs-type">SListIScottList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923503"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923504"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../sop-core/html/src"><span class="hs-identifier hs-type">SListI2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier hs-type">PCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923503"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.Generic.html#PGeneric"><span class="hs-identifier hs-type">PGeneric</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923503"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScottConstraint"><span class="hs-identifier hs-type">PlutusTypeScottConstraint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923503"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusTypeStrat"><span class="hs-identifier hs-type">PlutusTypeStrat</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScott"><span class="hs-identifier hs-type">PlutusTypeScott</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="PlutusTypeStratConstraint"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#PlutusTypeStratConstraint"><span class="hs-identifier hs-var">PlutusTypeStratConstraint</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScott"><span class="hs-identifier hs-type">PlutusTypeScott</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScottConstraint"><span class="hs-identifier hs-type">PlutusTypeScottConstraint</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DerivedPInner"><span class="annot"><a href="Plutarch.Internal.PlutusType.html#DerivedPInner"><span class="hs-identifier hs-var">DerivedPInner</span></a></span></span><span> </span><span id="local-6989586621679923248"><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PlutusTypeScott"><span class="hs-identifier hs-type">PlutusTypeScott</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923248"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.Quantification.html#PForall"><span class="hs-identifier hs-type">PForall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.ScottEncoding.html#PScottEncoded"><span class="hs-identifier hs-type">PScottEncoded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Generic.html#PCode"><span class="hs-identifier hs-type">PCode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679923248"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621679923234"><span class="annot"><span class="annottext">derivedPCon :: forall (a :: PType) (s :: S).
(DerivePlutusType a,
 (DPTStrat a :: Type) ~ (PlutusTypeScott :: Type)) =&gt;
a s -&gt; Term s (DerivedPInner PlutusTypeScott a)
</span><a href="#local-6989586621679923234"><span class="hs-identifier hs-var hs-var hs-var hs-var">derivedPCon</span></a></span></span><span> </span><span id="local-6989586621679923233"><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679923233"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S). PlutusType a =&gt; a s -&gt; Term s a
</span><a href="Plutarch.Internal.PlutusType.html#pcon"><span class="hs-identifier hs-var">pcon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a (b :: a -&gt; PType) (s :: S).
(forall (x :: a). Term s (b x)) -&gt; PForall @a b s
</span><a href="Plutarch.Internal.Quantification.html#PForall"><span class="hs-identifier hs-var">PForall</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (r :: PType) (s :: S).
(SListI @PType (ScottList as r), SListI2 @PType as) =&gt;
SOP @PType (Term s) as -&gt; Term s (PScottEncoded as r)
</span><a href="Plutarch.Internal.ScottEncoding.html#gpcon"><span class="hs-identifier hs-var">gpcon</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S).
PGeneric a =&gt;
a s -&gt; SOP @PType (Term s) (PCode a)
</span><a href="Plutarch.Internal.Generic.html#gpfrom"><span class="hs-identifier hs-var">gpfrom</span></a></span><span> </span><span class="annot"><span class="annottext">a s
</span><a href="#local-6989586621679923233"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679923215"><span class="annot"><span class="annottext">derivedPMatch :: forall (a :: PType) (s :: S) (b :: PType).
(DerivePlutusType a,
 (DPTStrat a :: Type) ~ (PlutusTypeScott :: Type)) =&gt;
Term s (DerivedPInner PlutusTypeScott a)
-&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="#local-6989586621679923215"><span class="hs-identifier hs-var hs-var hs-var hs-var">derivedPMatch</span></a></span></span><span> </span><span id="local-6989586621679923214"><span class="annot"><span class="annottext">Term s (DerivedPInner PlutusTypeScott a)
</span><a href="#local-6989586621679923214"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span id="local-6989586621679923213"><span class="annot"><span class="annottext">a s -&gt; Term s b
</span><a href="#local-6989586621679923213"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S) (b :: PType).
PlutusType a =&gt;
Term s a -&gt; (a s -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.PlutusType.html#pmatch"><span class="hs-identifier hs-var">pmatch</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (DerivedPInner PlutusTypeScott a)
</span><a href="#local-6989586621679923214"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Quantification.html#PForall"><span class="hs-identifier hs-type">PForall</span></a></span><span> </span><span id="local-6989586621679923212"><span class="annot"><span class="annottext">forall (x :: PType). Term s (PScottEncoded (PCode a) x)
</span><a href="#local-6989586621679923212"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (as :: [[PType]]) (r :: PType) (s :: S).
(SListI @PType (ScottList as r), SListI2 @PType as) =&gt;
Term s (PScottEncoded as r)
-&gt; (SOP @PType (Term s) as -&gt; Term s r) -&gt; Term s r
</span><a href="Plutarch.Internal.ScottEncoding.html#gpmatch"><span class="hs-identifier hs-var">gpmatch</span></a></span><span> </span><span class="annot"><span class="annottext">forall (x :: PType). Term s (PScottEncoded (PCode a) x)
</span><a href="#local-6989586621679923212"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a s -&gt; Term s b
</span><a href="#local-6989586621679923213"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (a :: PType) (s :: S).
PGeneric a =&gt;
SOP @PType (Term s) (PCode a) -&gt; a s
</span><a href="Plutarch.Internal.Generic.html#gpto"><span class="hs-identifier hs-var">gpto</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span></pre></body></html>