<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RoleAnnotations #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Internal</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-4"></span><span>  </span><span class="annot"><span class="hs-comment">-- | $hoisted</span></span><span>
</span><span id="line-5"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator">(:--&gt;)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#PLam"><span class="hs-identifier">PLam</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier">PDelayed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><span class="hs-comment">-- | $term</span></span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier">Term</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#asClosedRawTerm"><span class="hs-identifier">asClosedRawTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Plutarch.Script.html#Script"><span class="hs-identifier">Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Script.html#Script"><span class="hs-identifier">Script</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier">mapTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier">plam'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#plet"><span class="hs-identifier">plet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#papp"><span class="hs-identifier">papp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#pdelay"><span class="hs-identifier">pdelay</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#pforce"><span class="hs-identifier">pforce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#phoistAcyclic"><span class="hs-identifier">phoistAcyclic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#perror"><span class="hs-identifier">perror</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#punsafeCoerce"><span class="hs-identifier">punsafeCoerce</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#punsafeBuiltin"><span class="hs-identifier">punsafeBuiltin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#punsafeConstant"><span class="hs-identifier">punsafeConstant</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier">punsafeConstantInternal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#compile"><span class="hs-identifier">compile</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#compile%27"><span class="hs-identifier">compile'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier">ClosedTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier">Dig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#hashTerm"><span class="hs-identifier">hashTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier">hashRawTerm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier">RawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier">TermResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier">getDeps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier">getTerm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier">S</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#SI"><span class="hs-identifier">SI</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier">PType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#pthrow"><span class="hs-identifier">pthrow</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier">Config</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#TracingMode"><span class="hs-identifier">TracingMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#pgetConfig"><span class="hs-identifier">pgetConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier">TermMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#%23"><span class="hs-operator">(#)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#%23%24"><span class="hs-operator">(#$)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">ReaderT</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">ask</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">runReaderT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Crypto.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Context</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Digest</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">hashFinalize</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">hashInit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">hashUpdate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Crypto.Hash.Algorithms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Blake2b_160</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">Crypto.Hash.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier">HashAlgorithm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../data-default/html/src"><span class="hs-identifier">Data.Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(&lt;&amp;&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">foldl'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">groupBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">sortOn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Lazy</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">fromString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../flat/html/src"><span class="hs-identifier">Flat.Run</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">callStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">prettyCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Internal.Evaluate.html"><span class="hs-identifier">Plutarch.Internal.Evaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.Evaluate.html#evalScript"><span class="hs-identifier">evalScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Script.html"><span class="hs-identifier">Plutarch.Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Script.html#Script"><span class="hs-identifier">Script</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Script.html#Script"><span class="hs-identifier">Script</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier">Some</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">ValueOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">ValueOf</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">DeBruijn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">Index</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">UntypedPlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-comment">{- $hoisted
 __Explanation for hoisted terms:__
 Hoisting is a convenient way of importing terms without duplicating them
 across your tree. Currently, hoisting is only supported on terms that do
 not refer to any free variables.

 An RHoisted contains a term and its hash. A RawTerm will have a DAG
 of hoisted terms, where an edge represents a dependency.
 We topologically sort these hoisted terms, such that each has an index.

 We wrap our RawTerm in RLamAbs and RApply in an order corresponding to the
 indices. Each level can refer to levels above it by the nature of De Bruijn naming,
 though the name is relative to the current level.
-}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="hs-keyword">type</span><span> </span><span id="Dig"><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-var">Dig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">Digest</span></a></span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">Blake2b_160</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">data</span><span> </span><span id="HoistedTerm"><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-var">HoistedTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HoistedTerm"><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-var">HoistedTerm</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974591"><span id="local-6989586621679974593"><span id="local-6989586621679974600"><span class="annot"><span class="annottext">Int -&gt; HoistedTerm -&gt; ShowS
[HoistedTerm] -&gt; ShowS
HoistedTerm -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [HoistedTerm] -&gt; ShowS
$cshowList :: [HoistedTerm] -&gt; ShowS
show :: HoistedTerm -&gt; String
$cshow :: HoistedTerm -&gt; String
showsPrec :: Int -&gt; HoistedTerm -&gt; ShowS
$cshowsPrec :: Int -&gt; HoistedTerm -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">type</span><span> </span><span id="UTerm"><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-var">UTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Term</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DeBruijn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">data</span><span> </span><span id="RawTerm"><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-var">RawTerm</span></a></span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RVar"><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-var">RVar</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RLamAbs"><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-var">RLamAbs</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RApply"><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-var">RApply</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RForce"><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-var">RForce</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RDelay"><span class="annot"><a href="Plutarch.Internal.html#RDelay"><span class="hs-identifier hs-var">RDelay</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RConstant"><span class="annot"><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultUni</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RBuiltin"><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-var">RBuiltin</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultFun</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RCompiled"><span class="annot"><a href="Plutarch.Internal.html#RCompiled"><span class="hs-identifier hs-var">RCompiled</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-type">UTerm</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RError"><span class="annot"><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RHoisted"><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-var">RHoisted</span></a></span></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974543"><span id="local-6989586621679974545"><span id="local-6989586621679974578"><span class="annot"><span class="annottext">Int -&gt; RawTerm -&gt; ShowS
[RawTerm] -&gt; ShowS
RawTerm -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [RawTerm] -&gt; ShowS
$cshowList :: [RawTerm] -&gt; ShowS
show :: RawTerm -&gt; String
$cshow :: RawTerm -&gt; String
showsPrec :: Int -&gt; RawTerm -&gt; ShowS
$cshowsPrec :: Int -&gt; RawTerm -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span id="local-6989586621679975010"><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-type">hashRawTerm'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">HashAlgorithm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679975010"><span class="hs-identifier hs-type">alg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679975010"><span class="hs-identifier hs-type">alg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-type">Context</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679975010"><span class="hs-identifier hs-type">alg</span></a></span></span><span>
</span><span id="line-101"></span><span id="hashRawTerm%27"><span class="annot"><span class="annottext">hashRawTerm' :: forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var hs-var">hashRawTerm'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span id="local-6989586621679974417"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974417"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;0&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flat a =&gt; a -&gt; ByteString
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">F.flat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974417"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span id="local-6989586621679974413"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974413"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679974412"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974412"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;1&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flat a =&gt; a -&gt; ByteString
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">F.flat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974413"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Integer</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974412"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-104"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-type">RApply</span></a></span><span> </span><span id="local-6989586621679974411"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974411"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679974410"><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974410"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;2&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974411"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974410"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-106"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span id="local-6989586621679974409"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974409"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;3&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974409"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-107"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RDelay"><span class="hs-identifier hs-type">RDelay</span></a></span><span> </span><span id="local-6989586621679974408"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974408"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;4&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974408"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-108"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-type">RConstant</span></a></span><span> </span><span id="local-6989586621679974407"><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974407"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;5&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flat a =&gt; a -&gt; ByteString
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">F.flat</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974407"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span id="local-6989586621679974406"><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679974406"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;6&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flat a =&gt; a -&gt; ByteString
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">F.flat</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679974406"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;7&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679974405"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679974405"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;8&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679974405"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RCompiled"><span class="hs-identifier hs-type">RCompiled</span></a></span><span> </span><span id="local-6989586621679974404"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679974404"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-string">&quot;9&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-type">BS.ByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall ba a.
(ByteArrayAccess ba, HashAlgorithm a) =&gt;
Context a -&gt; ba -&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Flat a =&gt; a -&gt; ByteString
</span><a href="../../../../flat/html/src"><span class="hs-identifier hs-var">F.flat</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679974404"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier hs-type">hashRawTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span><span>
</span><span id="line-115"></span><span id="hashRawTerm"><span class="annot"><span class="annottext">hashRawTerm :: RawTerm -&gt; Dig
</span><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier hs-var hs-var">hashRawTerm</span></a></span></span><span> </span><span id="local-6989586621679974403"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974403"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HashAlgorithm a =&gt; Context a -&gt; Digest a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashFinalize</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall alg.
HashAlgorithm alg =&gt;
RawTerm -&gt; Context alg -&gt; Context alg
</span><a href="Plutarch.Internal.html#hashRawTerm%27"><span class="hs-identifier hs-var">hashRawTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974403"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. HashAlgorithm a =&gt; Context a
</span><a href="../../../../cryptonite/html/src"><span class="hs-identifier hs-var">hashInit</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">data</span><span> </span><span id="TermResult"><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermResult"><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AgetTerm%3ATermResult"><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var hs-var">getTerm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3AgetDeps%3ATermResult"><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var hs-var">getDeps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier hs-type">mapTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span>
</span><span id="line-123"></span><span id="mapTerm"><span class="annot"><span class="annottext">mapTerm :: (RawTerm -&gt; RawTerm) -&gt; TermResult -&gt; TermResult
</span><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier hs-var hs-var">mapTerm</span></a></span></span><span> </span><span id="local-6989586621679974402"><span class="annot"><span class="annottext">RawTerm -&gt; RawTerm
</span><a href="#local-6989586621679974402"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span> </span><span id="local-6989586621679974401"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974401"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679974400"><span class="annot"><span class="annottext">[HoistedTerm]
</span><a href="#local-6989586621679974400"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; RawTerm
</span><a href="#local-6989586621679974402"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974401"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HoistedTerm]
</span><a href="#local-6989586621679974400"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-type">mkTermRes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span>
</span><span id="line-126"></span><span id="mkTermRes"><span class="annot"><span class="annottext">mkTermRes :: RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var hs-var">mkTermRes</span></a></span></span><span> </span><span id="local-6989586621679974398"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974398"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974398"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">{- Type of `s` in `Term s a`. See: &quot;What is the `s`?&quot; section on the Plutarch guide.

`SI` is the identity type of kind `S`. It is used in type class/family instances
to &quot;forget&quot; the `s`.
-}</span><span>
</span><span id="line-133"></span><span class="hs-keyword">data</span><span> </span><span id="S"><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SI"><span class="annot"><a href="Plutarch.Internal.html#SI"><span class="hs-identifier hs-var">SI</span></a></span></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Shorthand for Plutarch types.</span><span>
</span><span id="line-136"></span><span class="hs-keyword">type</span><span> </span><span id="PType"><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-var">PType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">newtype</span><span> </span><span id="Config"><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Config"><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3AtracingMode%3AConfig"><span class="annot"><span class="annottext">Config -&gt; TracingMode
</span><a href="Plutarch.Internal.html#%24sel%3AtracingMode%3AConfig"><span class="hs-identifier hs-var hs-var">tracingMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TracingMode"><span class="hs-identifier hs-type">TracingMode</span></a></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-keyword">data</span><span> </span><span id="TracingMode"><span class="annot"><a href="Plutarch.Internal.html#TracingMode"><span class="hs-identifier hs-var">TracingMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoTracing"><span class="annot"><a href="Plutarch.Internal.html#NoTracing"><span class="hs-identifier hs-var">NoTracing</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DetTracing"><span class="annot"><a href="Plutarch.Internal.html#DetTracing"><span class="hs-identifier hs-var">DetTracing</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DoTracing"><span class="annot"><a href="Plutarch.Internal.html#DoTracing"><span class="hs-identifier hs-var">DoTracing</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DoTracingAndBinds"><span class="annot"><a href="Plutarch.Internal.html#DoTracingAndBinds"><span class="hs-identifier hs-var">DoTracingAndBinds</span></a></span></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-comment">-- | Default is to be efficient</span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../../../data-default-class/html/src"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679974388"><span class="annot"><span class="annottext">def :: Config
</span><a href="#local-6989586621679974388"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-148"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:tracingMode:Config :: TracingMode
</span><a href="Plutarch.Internal.html#%24sel%3AtracingMode%3AConfig"><span class="hs-identifier hs-var">tracingMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingMode
</span><a href="Plutarch.Internal.html#NoTracing"><span class="hs-identifier hs-var">NoTracing</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="hs-keyword">newtype</span><span> </span><span id="TermMonad"><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-var">TermMonad</span></a></span></span><span> </span><span id="local-6989586621679974974"><span class="annot"><a href="#local-6989586621679974974"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermMonad"><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-var">TermMonad</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3ArunTermMonad%3ATermMonad"><span class="annot"><span class="annottext">forall m. TermMonad m -&gt; ReaderT Config (Either Text) m
</span><a href="Plutarch.Internal.html#%24sel%3ArunTermMonad%3ATermMonad"><span class="hs-identifier hs-var hs-var">runTermMonad</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679974974"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974378"><span id="local-6989586621679974384"><span class="annot"><span class="annottext">forall a b. a -&gt; TermMonad b -&gt; TermMonad a
forall a b. (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
forall (f :: Type -&gt; Type).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; TermMonad b -&gt; TermMonad a
$c&lt;$ :: forall a b. a -&gt; TermMonad b -&gt; TermMonad a
fmap :: forall a b. (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
$cfmap :: forall a b. (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974347"><span id="local-6989586621679974352"><span id="local-6989586621679974357"><span id="local-6989586621679974362"><span id="local-6989586621679974368"><span class="annot"><span class="annottext">Functor TermMonad
forall a. a -&gt; TermMonad a
forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad a
forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
forall a b. TermMonad (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
forall a b c.
(a -&gt; b -&gt; c) -&gt; TermMonad a -&gt; TermMonad b -&gt; TermMonad c
forall (f :: Type -&gt; Type).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad a
$c&lt;* :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad a
*&gt; :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
$c*&gt; :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; TermMonad a -&gt; TermMonad b -&gt; TermMonad c
$cliftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; TermMonad a -&gt; TermMonad b -&gt; TermMonad c
&lt;*&gt; :: forall a b. TermMonad (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
$c&lt;*&gt; :: forall a b. TermMonad (a -&gt; b) -&gt; TermMonad a -&gt; TermMonad b
pure :: forall a. a -&gt; TermMonad a
$cpure :: forall a. a -&gt; TermMonad a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974326"><span id="local-6989586621679974331"><span id="local-6989586621679974337"><span class="annot"><span class="annottext">Applicative TermMonad
forall a. a -&gt; TermMonad a
forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
forall a b. TermMonad a -&gt; (a -&gt; TermMonad b) -&gt; TermMonad b
forall (m :: Type -&gt; Type).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; TermMonad a
$creturn :: forall a. a -&gt; TermMonad a
&gt;&gt; :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
$c&gt;&gt; :: forall a b. TermMonad a -&gt; TermMonad b -&gt; TermMonad b
&gt;&gt;= :: forall a b. TermMonad a -&gt; (a -&gt; TermMonad b) -&gt; TermMonad b
$c&gt;&gt;= :: forall a b. TermMonad a -&gt; (a -&gt; TermMonad b) -&gt; TermMonad b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">role</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><span class="hs-identifier">nominal</span></span><span> </span><span class="annot"><span class="hs-identifier">nominal</span></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">{- $term
 Source: Unembedding Domain-Specific Languages by Robert Atkey, Sam Lindley, Jeremy Yallop
 Thanks!
 NB: Hoisted terms must be sorted such that the dependents are first and dependencies last.

 s: This parameter isn't ever instantiated with something concrete. It is merely here
 to ensure that `compile` and `phoistAcyclic` only accept terms without any free variables.

 __Explanation of how the unembedding works:__
 Each term must be instantiated with its de-Bruijn level.
 `plam'`, given its own level, will create an `RVar` that figures out the
 de-Bruijn index needed to reach its own level given the level it itself is
 instantiated with.
-}</span><span>
</span><span id="line-170"></span><span class="hs-keyword">newtype</span><span> </span><span id="Term"><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974918"><span class="annot"><a href="#local-6989586621679974918"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974917"><span class="annot"><a href="#local-6989586621679974917"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Term"><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span></span><span> </span><span class="hs-special">{</span><span id="%24sel%3AasRawTerm%3ATerm"><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var hs-var">asRawTerm</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-type">TermMonad</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">{- |
  *Closed* terms with no free variables.
-}</span><span>
</span><span id="line-175"></span><span class="hs-keyword">type</span><span> </span><span id="ClosedTerm"><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-var">ClosedTerm</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974317"><span class="annot"><a href="#local-6989586621679974317"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974316"><span class="annot"><a href="#local-6989586621679974316"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974316"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974317"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">newtype</span><span> </span><span id="%3A--%3E"><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-var">(:--&gt;)</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974315"><span class="annot"><a href="#local-6989586621679974315"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974314"><span class="annot"><a href="#local-6989586621679974314"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974313"><span class="annot"><a href="#local-6989586621679974313"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PLam"><span class="annot"><a href="Plutarch.Internal.html#PLam"><span class="hs-identifier hs-var">PLam</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974315"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974314"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">0</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-keyword">data</span><span> </span><span id="PDelayed"><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier hs-var">PDelayed</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974312"><span class="annot"><a href="#local-6989586621679974312"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679974311"><span class="annot"><a href="#local-6989586621679974311"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-comment">{- |
  Lambda abstraction.

  Only works with a single argument.
  Use 'plam' instead, to support currying.
-}</span><span>
</span><span id="line-189"></span><span id="local-6989586621679974911"><span id="local-6989586621679974912"><span id="local-6989586621679974913"><span class="annot"><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier hs-type">plam'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974913"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974912"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974913"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974911"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974913"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679974912"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974911"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-190"></span><span id="plam%27"><span class="annot"><span class="annottext">plam' :: forall (s :: S) (a :: PType) (b :: PType).
(Term s a -&gt; Term s b) -&gt; Term s (a :--&gt; b)
</span><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier hs-var hs-var">plam'</span></a></span></span><span> </span><span id="local-6989586621679974226"><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974226"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974225"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974225"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679974224"><span class="annot"><span class="annottext">v :: Term s a
</span><a href="#local-6989586621679974224"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974223"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974223"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-var">RVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974223"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974225"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974226"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974224"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974225"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-comment">-- eta-reduce for arity 1</span><span>
</span><span id="line-194"></span><span>        </span><span id="local-6989586621679974221"><span class="annot"><span class="annottext">t :: TermResult
</span><a href="#local-6989586621679974221"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-type">RApply</span></a></span><span> </span><span id="local-6989586621679974220"><span class="annot"><span class="annottext">t' :: RawTerm
</span><a href="#local-6989586621679974220"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974219"><span class="hs-identifier hs-var">getArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974221"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:getTerm:TermResult :: RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974220"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-195"></span><span>        </span><span class="hs-comment">-- eta-reduce for arity 2 + n</span><span>
</span><span id="line-196"></span><span>        </span><span id="local-6989586621679974218"><span class="annot"><span class="annottext">t :: TermResult
</span><a href="#local-6989586621679974218"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span id="local-6989586621679974217"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974217"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-type">RApply</span></a></span><span> </span><span id="local-6989586621679974216"><span class="annot"><span class="annottext">t' :: RawTerm
</span><a href="#local-6989586621679974216"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974219"><span class="hs-identifier hs-var">getArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679974215"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974215"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679974214"><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974214"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974217"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) (f :: Type -&gt; Type) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span id="local-6989586621679974212"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974212"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974212"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974214"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974215"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974217"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>              </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974218"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:getTerm:TermResult :: RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974216"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-comment">-- increment arity</span><span>
</span><span id="line-201"></span><span>        </span><span id="local-6989586621679974210"><span class="annot"><span class="annottext">t :: TermResult
</span><a href="#local-6989586621679974210"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span id="local-6989586621679974209"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974209"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679974208"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974208"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974210"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:getTerm:TermResult :: RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; RawTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-var">RLamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974209"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974208"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-comment">-- new lambda</span><span>
</span><span id="line-203"></span><span>        </span><span id="local-6989586621679974207"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974207"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RawTerm -&gt; RawTerm) -&gt; TermResult -&gt; TermResult
</span><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier hs-var">mapTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; RawTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-var">RLamAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974207"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-comment">-- 0 is 1</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><a href="#local-6989586621679974219"><span class="hs-identifier hs-type">getArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-comment">-- We only do this if it's hoisted, since it's only safe if it doesn't</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-comment">-- refer to any of the variables in the wrapping lambda.</span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621679974219"><span class="annot"><span class="annottext">getArity :: RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974219"><span class="hs-identifier hs-var hs-var">getArity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span id="local-6989586621679974206"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974206"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974206"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="#local-6989586621679974219"><span class="hs-identifier hs-var">getArity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679974205"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974205"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974205"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><a href="#local-6989586621679974219"><span class="hs-identifier hs-var">getArity</span></a></span><span> </span><span id="local-6989586621679974203"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974203"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974203"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-type">getArityBuiltin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621679974204"><span class="annot"><span class="annottext">getArityBuiltin :: RawTerm -&gt; Maybe Word64
</span><a href="#local-6989586621679974204"><span class="hs-identifier hs-var hs-var">getArityBuiltin</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.AddInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.SubtractInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MultiplyInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.DivideInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.QuotientInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.RemainderInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ModInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.EqualsInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-222"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.LessThanInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.LessThanEqualsInteger</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-224"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.AppendByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ConsByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.SliceByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.LengthOfByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.IndexByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.EqualsByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.LessThanByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.LessThanEqualsByteString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-232"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.Sha2_256</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.Sha3_256</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.Blake2b_256</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.VerifyEd25519Signature</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.VerifyEcdsaSecp256k1Signature</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.VerifySchnorrSecp256k1Signature</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.AppendString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.EqualsString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.EncodeUtf8</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.DecodeUtf8</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.IfThenElse</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ChooseUnit</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.Trace</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.FstPair</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.SndPair</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ChooseList</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">2</span></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MkCons</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.HeadList</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.TailList</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.NullList</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ChooseData</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">5</span></span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ConstrData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MapData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.ListData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.IData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.BData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.UnConstrData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.UnMapData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.UnListData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.UnIData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.UnBData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.EqualsData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MkPairData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MkNilData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.MkNilPairData</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="#local-6989586621679974204"><span class="hs-identifier hs-var">getArityBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">{- |
  Let bindings.

  This is appoximately a shorthand for a lambda and application:

  @plet v f@ == @ papp (plam f) v@

  But sufficiently small terms in WHNF may be inlined for efficiency.
-}</span><span>
</span><span id="line-278"></span><span id="local-6989586621679974886"><span id="local-6989586621679974887"><span id="local-6989586621679974888"><span class="annot"><a href="Plutarch.Internal.html#plet"><span class="hs-identifier hs-type">plet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974888"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974887"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974888"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974887"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974888"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974886"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974888"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974886"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-279"></span><span id="plet"><span class="annot"><span class="annottext">plet :: forall (s :: S) (a :: PType) (b :: PType).
Term s a -&gt; (Term s a -&gt; Term s b) -&gt; Term s b
</span><a href="Plutarch.Internal.html#plet"><span class="hs-identifier hs-var hs-var">plet</span></a></span></span><span> </span><span id="local-6989586621679974146"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679974145"><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974145"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974144"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-280"></span><span>  </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">-- Inline sufficiently small terms in WHNF</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974145"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974145"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974145"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="annottext">TermResult
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#papp"><span class="hs-identifier hs-var">papp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
(Term s a -&gt; Term s b) -&gt; Term s (a :--&gt; b)
</span><a href="Plutarch.Internal.html#plam%27"><span class="hs-identifier hs-var">plam'</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a -&gt; Term s b
</span><a href="#local-6989586621679974145"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974146"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974144"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span id="local-6989586621679974878"><span class="annot"><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-type">pthrow'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-type">TermMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974878"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-288"></span><span id="pthrow%27"><span class="annot"><span class="annottext">pthrow' :: forall a. HasCallStack =&gt; Text -&gt; TermMonad a
</span><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-var hs-var">pthrow'</span></a></span></span><span> </span><span id="local-6989586621679974133"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679974133"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall m. ReaderT Config (Either Text) m -&gt; TermMonad m
</span><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-var">TermMonad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: Type -&gt; Type) a. (r -&gt; m a) -&gt; ReaderT r m a
</span><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">ReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. IsString a =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CallStack -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">prettyCallStack</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; CallStack
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">callStack</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679974133"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span id="local-6989586621679974866"><span id="local-6989586621679974867"><span class="annot"><a href="Plutarch.Internal.html#pthrow"><span class="hs-identifier hs-type">pthrow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974867"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974866"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-291"></span><span id="pthrow"><span class="annot"><span class="annottext">pthrow :: forall (s :: S) (a :: PType). HasCallStack =&gt; Text -&gt; Term s a
</span><a href="Plutarch.Internal.html#pthrow"><span class="hs-identifier hs-var hs-var">pthrow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; Text -&gt; TermMonad a
</span><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-var">pthrow'</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-comment">-- | Lambda Application.</span><span>
</span><span id="line-294"></span><span id="local-6989586621679974879"><span id="local-6989586621679974880"><span id="local-6989586621679974881"><span class="annot"><a href="Plutarch.Internal.html#papp"><span class="hs-identifier hs-type">papp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974881"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679974880"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974879"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974881"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974880"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974881"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974879"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-295"></span><span id="papp"><span class="annot"><span class="annottext">papp :: forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#papp"><span class="hs-identifier hs-var hs-var">papp</span></a></span></span><span> </span><span id="local-6989586621679974100"><span class="annot"><span class="annottext">Term s (a :--&gt; b)
</span><a href="#local-6989586621679974100"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679974099"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974099"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974098"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974098"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (a :--&gt; b)
</span><a href="#local-6989586621679974100"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974098"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b.
Applicative f =&gt;
f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974099"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974098"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-comment">-- Applying anything to an error is an error.</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TermResult
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; Text -&gt; TermMonad a
</span><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-var">pthrow'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application to an error&quot;</span></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-comment">-- Applying an error to anything is an error.</span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; Text -&gt; TermMonad a
</span><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-var">pthrow'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;application with an error&quot;</span></span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">-- Applying to `id` changes nothing.</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974096"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974096"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974096"><span class="hs-identifier hs-var">y'</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974095"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974095"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974095"><span class="hs-identifier hs-var">y'</span></a></span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">-- append argument</span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679974094"><span class="annot"><span class="annottext">x' :: TermResult
</span><a href="#local-6989586621679974094"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-type">RApply</span></a></span><span> </span><span id="local-6989586621679974093"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974093"><span class="hs-identifier hs-var">x'l</span></a></span></span><span> </span><span id="local-6989586621679974092"><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974092"><span class="hs-identifier hs-var">x'r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974091"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974091"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; [RawTerm] -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-var">RApply</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974093"><span class="hs-identifier hs-var">x'l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974091"><span class="hs-identifier hs-var">y'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679974092"><span class="hs-identifier hs-var">x'r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974094"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974091"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- new RApply</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679974090"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974090"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679974089"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974089"><span class="hs-identifier hs-var">y'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; [RawTerm] -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-var">RApply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974090"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974089"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974090"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974089"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">{- |
  Plutus \'delay\', used for laziness.
-}</span><span>
</span><span id="line-312"></span><span id="local-6989586621679974854"><span id="local-6989586621679974855"><span class="annot"><a href="Plutarch.Internal.html#pdelay"><span class="hs-identifier hs-type">pdelay</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974855"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974854"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974855"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier hs-type">PDelayed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974854"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-313"></span><span id="pdelay"><span class="annot"><span class="annottext">pdelay :: forall (s :: S) (a :: PType). Term s a -&gt; Term s (PDelayed a)
</span><a href="Plutarch.Internal.html#pdelay"><span class="hs-identifier hs-var hs-var">pdelay</span></a></span></span><span> </span><span id="local-6989586621679974087"><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974087"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RawTerm -&gt; RawTerm) -&gt; TermResult -&gt; TermResult
</span><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier hs-var">mapTerm</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RDelay"><span class="hs-identifier hs-var">RDelay</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term s a
</span><a href="#local-6989586621679974087"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">{- |
  Plutus \'force\',
  used to force evaluation of 'PDelayed' terms.
-}</span><span>
</span><span id="line-319"></span><span id="local-6989586621679974849"><span id="local-6989586621679974850"><span class="annot"><a href="Plutarch.Internal.html#pforce"><span class="hs-identifier hs-type">pforce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974850"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#PDelayed"><span class="hs-identifier hs-type">PDelayed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974849"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974850"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974849"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-320"></span><span id="pforce"><span class="annot"><span class="annottext">pforce :: forall (s :: S) (a :: PType). Term s (PDelayed a) -&gt; Term s a
</span><a href="Plutarch.Internal.html#pforce"><span class="hs-identifier hs-var hs-var">pforce</span></a></span></span><span> </span><span id="local-6989586621679974085"><span class="annot"><span class="annottext">Term s (PDelayed a)
</span><a href="#local-6989586621679974085"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974084"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974084"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Term s (PDelayed a)
</span><a href="#local-6989586621679974085"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974084"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-comment">-- A force cancels a delay</span><span>
</span><span id="line-323"></span><span>    </span><span id="local-6989586621679974083"><span class="annot"><span class="annottext">t :: TermResult
</span><a href="#local-6989586621679974083"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RDelay"><span class="hs-identifier hs-type">RDelay</span></a></span><span> </span><span id="local-6989586621679974082"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974082"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974083"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:getTerm:TermResult :: RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679974082"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621679974081"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974081"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RawTerm -&gt; RawTerm) -&gt; TermResult -&gt; TermResult
</span><a href="Plutarch.Internal.html#mapTerm"><span class="hs-identifier hs-var">mapTerm</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-var">RForce</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679974081"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">{- |
  Plutus \'error\'.

  When using this explicitly, it should be ensured that
  the containing term is delayed, avoiding premature evaluation.
-}</span><span>
</span><span id="line-332"></span><span id="local-6989586621679974842"><span id="local-6989586621679974843"><span class="annot"><a href="Plutarch.Internal.html#perror"><span class="hs-identifier hs-type">perror</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974843"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974842"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-333"></span><span id="perror"><span class="annot"><span class="annottext">perror :: forall (s :: S) (a :: PType). Term s a
</span><a href="Plutarch.Internal.html#perror"><span class="hs-identifier hs-var hs-var">perror</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span id="local-6989586621679974840"><span id="local-6989586621679974841"><span class="annot"><a href="Plutarch.Internal.html#pgetConfig"><span class="hs-identifier hs-type">pgetConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974841"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974840"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974841"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974840"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-336"></span><span id="pgetConfig"><span class="annot"><span class="annottext">pgetConfig :: forall (s :: S) (a :: PType). (Config -&gt; Term s a) -&gt; Term s a
</span><a href="Plutarch.Internal.html#pgetConfig"><span class="hs-identifier hs-var hs-var">pgetConfig</span></a></span></span><span> </span><span id="local-6989586621679974075"><span class="annot"><span class="annottext">Config -&gt; Term s a
</span><a href="#local-6989586621679974075"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679974074"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974074"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall m. ReaderT Config (Either Text) m -&gt; TermMonad m
</span><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-var">TermMonad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-337"></span><span>  </span><span id="local-6989586621679974073"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679974073"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall r (m :: Type -&gt; Type). MonadReader r m =&gt; m r
</span><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><span class="annottext">forall m. TermMonad m -&gt; ReaderT Config (Either Text) m
</span><a href="Plutarch.Internal.html#%24sel%3ArunTermMonad%3ATermMonad"><span class="hs-identifier hs-var">runTermMonad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; Term s a
</span><a href="#local-6989586621679974075"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679974073"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679974074"><span class="hs-identifier hs-var">lvl</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">{- |
  Unsafely coerce the type-tag of a Term.

  This should mostly be avoided, though it can be safely
  used to assert known types of Datums, Redeemers or ScriptContext.
-}</span><span>
</span><span id="line-346"></span><span id="local-6989586621679974830"><span id="local-6989586621679974831"><span id="local-6989586621679974832"><span class="annot"><a href="Plutarch.Internal.html#punsafeCoerce"><span class="hs-identifier hs-type">punsafeCoerce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974832"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974831"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974832"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974830"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-347"></span><span id="punsafeCoerce"><span class="annot"><span class="annottext">punsafeCoerce :: forall (s :: S) (a :: PType) (b :: PType). Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#punsafeCoerce"><span class="hs-identifier hs-var hs-var">punsafeCoerce</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span id="local-6989586621679974072"><span class="annot"><span class="annottext">Word64 -&gt; TermMonad TermResult
</span><a href="#local-6989586621679974072"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; TermMonad TermResult
</span><a href="#local-6989586621679974072"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span id="local-6989586621679974826"><span id="local-6989586621679974827"><span class="annot"><a href="Plutarch.Internal.html#punsafeBuiltin"><span class="hs-identifier hs-type">punsafeBuiltin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974827"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974826"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-350"></span><span id="punsafeBuiltin"><span class="annot"><span class="annottext">punsafeBuiltin :: forall (s :: S) (a :: PType). DefaultFun -&gt; Term s a
</span><a href="Plutarch.Internal.html#punsafeBuiltin"><span class="hs-identifier hs-var hs-var">punsafeBuiltin</span></a></span></span><span> </span><span id="local-6989586621679974070"><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679974070"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-var">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679974070"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">punsafeConstant</span><span> </span><span class="hs-pragma">&quot;Use `pconstant` instead.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-353"></span><span id="local-6989586621679974824"><span id="local-6989586621679974825"><span class="annot"><a href="Plutarch.Internal.html#punsafeConstant"><span class="hs-identifier hs-type">punsafeConstant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultUni</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974825"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974824"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-354"></span><span id="punsafeConstant"><span class="annot"><span class="annottext">punsafeConstant :: forall (s :: S) (a :: PType).
Some @Type (ValueOf DefaultUni) -&gt; Term s a
</span><a href="Plutarch.Internal.html#punsafeConstant"><span class="hs-identifier hs-var hs-var">punsafeConstant</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Some @Type (ValueOf DefaultUni) -&gt; Term s a
</span><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier hs-var">punsafeConstantInternal</span></a></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span id="local-6989586621679974068"><span id="local-6989586621679974069"><span class="annot"><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier hs-type">punsafeConstantInternal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultUni</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974069"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974068"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-357"></span><span id="punsafeConstantInternal"><span class="annot"><span class="annottext">punsafeConstantInternal :: forall (s :: S) (a :: PType).
Some @Type (ValueOf DefaultUni) -&gt; Term s a
</span><a href="Plutarch.Internal.html#punsafeConstantInternal"><span class="hs-identifier hs-var hs-var">punsafeConstantInternal</span></a></span></span><span> </span><span id="local-6989586621679974065"><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-comment">-- These constants are smaller than variable references.</span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultUni (Esc @Type a)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.DefaultUniBool</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultUni (Esc @Type a)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.DefaultUniUnit</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-362"></span><span>    </span><span class="annot"><a href="../../../../some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultUni (Esc @Type a)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.DefaultUniInteger</span></a></span><span> </span><span id="local-6989586621679974052"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679974052"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679974052"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">256</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; TermResult
</span><a href="Plutarch.Internal.html#mkTermRes"><span class="hs-identifier hs-var">mkTermRes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-363"></span><span>    </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679974050"><span class="annot"><span class="annottext">hoisted :: HoistedTerm
</span><a href="#local-6989586621679974050"><span class="hs-identifier hs-var hs-var">hoisted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dig -&gt; RawTerm -&gt; HoistedTerm
</span><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-var">HoistedTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; Dig
</span><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier hs-var">hashRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni) -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-var">RConstant</span></a></span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679974065"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HoistedTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-var">RHoisted</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679974050"><span class="hs-identifier hs-var">hoisted</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679974050"><span class="hs-identifier hs-var">hoisted</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span id="local-6989586621679974819"><span class="annot"><a href="Plutarch.Internal.html#asClosedRawTerm"><span class="hs-identifier hs-type">asClosedRawTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974819"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-type">TermMonad</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span></span><span>
</span><span id="line-368"></span><span id="asClosedRawTerm"><span class="annot"><span class="annottext">asClosedRawTerm :: forall (a :: PType). ClosedTerm a -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#asClosedRawTerm"><span class="hs-identifier hs-var hs-var">asClosedRawTerm</span></a></span></span><span> </span><span id="local-6989586621679974048"><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679974048"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679974048"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-comment">-- FIXME: Give proper error message when mutually recursive.</span><span>
</span><span id="line-371"></span><span id="local-6989586621679974815"><span id="local-6989586621679974816"><span class="annot"><a href="Plutarch.Internal.html#phoistAcyclic"><span class="hs-identifier hs-type">phoistAcyclic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974815"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974816"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-372"></span><span id="phoistAcyclic"><span class="annot"><span class="annottext">phoistAcyclic :: forall (a :: PType) (s :: S).
HasCallStack =&gt;
ClosedTerm a -&gt; Term s a
</span><a href="Plutarch.Internal.html#phoistAcyclic"><span class="hs-identifier hs-var hs-var">phoistAcyclic</span></a></span></span><span> </span><span id="local-6989586621679973952"><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973952"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
(Word64 -&gt; TermMonad TermResult) -&gt; Term s a
</span><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-var">Term</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973952"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-comment">-- Built-ins are smaller than variable references</span><span>
</span><span id="line-375"></span><span>    </span><span id="local-6989586621679973951"><span class="annot"><span class="annottext">t' :: TermResult
</span><a href="#local-6989586621679973951"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973951"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621679973950"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973950"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Script -&gt; (Either EvalError Script, ExBudget, [Text])
</span><a href="Plutarch.Internal.Evaluate.html#evalScript"><span class="hs-identifier hs-var">evalScript</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Program DeBruijn DefaultUni DefaultFun () -&gt; Script
</span><a href="Plutarch.Script.html#Script"><span class="hs-identifier hs-var">Script</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Version ann -&gt; Term name uni fun ann -&gt; Program name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Program</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. ann -&gt; Version ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">PLC.defaultVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; UTerm
</span><a href="Plutarch.Internal.html#compile%27"><span class="hs-identifier hs-var">compile'</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973950"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-377"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Script
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-378"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679973947"><span class="annot"><span class="annottext">hoisted :: HoistedTerm
</span><a href="#local-6989586621679973947"><span class="hs-identifier hs-var hs-var">hoisted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dig -&gt; RawTerm -&gt; HoistedTerm
</span><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-var">HoistedTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; Dig
</span><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier hs-var">hashRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973950"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973950"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; [HoistedTerm] -&gt; TermResult
</span><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-var">TermResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HoistedTerm -&gt; RawTerm
</span><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-var">RHoisted</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679973947"><span class="hs-identifier hs-var">hoisted</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679973947"><span class="hs-identifier hs-var">hoisted</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973950"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679973946"><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679973946"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; Text -&gt; TermMonad a
</span><a href="Plutarch.Internal.html#pthrow%27"><span class="hs-identifier hs-var">pthrow'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Hoisted term errs! &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IsString a =&gt; String -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">EvalError
</span><a href="#local-6989586621679973946"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-comment">-- Couldn't find a definition for this in plutus-core</span><span>
</span><span id="line-383"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-type">subst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-type">UTerm</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-type">UTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-type">UTerm</span></a></span><span>
</span><span id="line-384"></span><span id="subst"><span class="annot"><span class="annottext">subst :: Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var hs-var">subst</span></a></span></span><span> </span><span id="local-6989586621679973943"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973943"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679973942"><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973942"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679973940"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973940"><span class="hs-identifier hs-var">yx</span></a></span></span><span> </span><span id="local-6989586621679973939"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973939"><span class="hs-identifier hs-var">yy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973943"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973942"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973940"><span class="hs-identifier hs-var">yx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973943"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973942"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973939"><span class="hs-identifier hs-var">yy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973938"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973938"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679973937"><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973937"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.LamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679973935"><span class="annot"><span class="annottext">DeBruijn
</span><a href="#local-6989586621679973935"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679973934"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973934"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.LamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DeBruijn
</span><a href="#local-6989586621679973935"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973938"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973937"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973934"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973933"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973933"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679973932"><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973932"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Delay</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679973930"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973930"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Delay</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973933"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973932"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973930"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973929"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973929"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679973928"><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973928"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Force</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679973926"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973926"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Force</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973929"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973928"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973926"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973925"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973925"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621679973924"><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973924"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621679973922"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973922"><span class="hs-identifier hs-var">idx'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973925"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973922"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><a href="#local-6989586621679973924"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973925"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-389"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973921"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973921"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679973920"><span class="annot"><span class="annottext">y :: UTerm
</span><a href="#local-6989586621679973920"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621679973919"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973919"><span class="hs-identifier hs-var">idx'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973921"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973919"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973920"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-390"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span id="local-6989586621679973917"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973917"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621679973916"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973916"><span class="hs-identifier hs-var">idx'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973917"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973916"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973916"><span class="hs-identifier hs-var">idx'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span class="annot"><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679973915"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973915"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973915"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-type">rawTermToUPLC</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Term</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-395"></span><span>  </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-396"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-397"></span><span>  </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Term</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.DefaultFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span id="rawTermToUPLC"><span class="annot"><span class="annottext">rawTermToUPLC :: (HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var hs-var">rawTermToUPLC</span></a></span></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RVar"><span class="hs-identifier hs-type">RVar</span></a></span><span> </span><span id="local-6989586621679973913"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973913"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973913"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Why the fuck does it start from 1 and not 0?</span><span>
</span><span id="line-399"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span id="local-6989586621679973912"><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973912"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679973911"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973911"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RLamAbs"><span class="hs-identifier hs-type">RLamAbs</span></a></span><span> </span><span id="local-6989586621679973910"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973910"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679973909"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973909"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-400"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">($)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973912"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973911"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973910"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973909"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Int -&gt; a -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973910"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.LamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span id="local-6989586621679973906"><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973906"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679973905"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973905"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RApply"><span class="hs-identifier hs-type">RApply</span></a></span><span> </span><span id="local-6989586621679973904"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973904"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679973903"><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679973903"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679973902"><span class="annot"><span class="annottext">f :: RawTerm -&gt; UTerm -&gt; UTerm
</span><a href="#local-6989586621679973902"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679973901"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973901"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621679973900"><span class="annot"><span class="annottext">t :: UTerm
</span><a href="#local-6989586621679973900"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.LamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DeBruijn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679973899"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973899"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973906"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973905"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973901"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-404"></span><span>          </span><span class="hs-comment">-- Inline unconditionally if it's a variable or built-in.</span><span>
</span><span id="line-405"></span><span>          </span><span class="hs-comment">-- These terms are very small and are always WHNF.</span><span>
</span><span id="line-406"></span><span>          </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DeBruijn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621679973898"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973898"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679973897"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973897"><span class="hs-identifier hs-var">lvl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973898"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973897"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973899"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-407"></span><span>          </span><span id="local-6989586621679973896"><span class="annot"><span class="annottext">arg :: UTerm
</span><a href="#local-6989586621679973896"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Builtin</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; (Word64 -&gt; UTerm) -&gt; UTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#subst"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973896"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973899"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-408"></span><span>          </span><span id="local-6989586621679973894"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973894"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973900"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973894"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-409"></span><span>      </span><span class="annot"><a href="#local-6989586621679973902"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621679973893"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973893"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621679973892"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973892"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973892"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973906"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973905"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973893"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">($)</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973906"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973905"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973904"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RawTerm -&gt; UTerm -&gt; UTerm
</span><a href="#local-6989586621679973902"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[RawTerm]
</span><a href="#local-6989586621679973903"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span id="local-6989586621679973891"><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973891"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679973890"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973890"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RDelay"><span class="hs-identifier hs-type">RDelay</span></a></span><span> </span><span id="local-6989586621679973889"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973889"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Delay</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973891"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973890"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973889"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span id="local-6989586621679973888"><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973888"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679973887"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973887"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RForce"><span class="hs-identifier hs-type">RForce</span></a></span><span> </span><span id="local-6989586621679973886"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973886"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Force</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973888"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973887"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973886"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RBuiltin"><span class="hs-identifier hs-type">RBuiltin</span></a></span><span> </span><span id="local-6989586621679973885"><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679973885"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; fun -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Builtin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679973885"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-414"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RConstant"><span class="hs-identifier hs-type">RConstant</span></a></span><span> </span><span id="local-6989586621679973884"><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679973884"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Some @Type (ValueOf uni) -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Constant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Some @Type (ValueOf DefaultUni)
</span><a href="#local-6989586621679973884"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-415"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RCompiled"><span class="hs-identifier hs-type">RCompiled</span></a></span><span> </span><span id="local-6989586621679973882"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973882"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973882"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-416"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="Plutarch.Internal.html#RError"><span class="hs-identifier hs-var">RError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- rawTermToUPLC m l (RHoisted hoisted) = UPLC.Var () . DeBruijn . Index $ l - m hoisted</span><span>
</span><span id="line-418"></span><span class="annot"><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span id="local-6989586621679973880"><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973880"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679973879"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973879"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#RHoisted"><span class="hs-identifier hs-type">RHoisted</span></a></span><span> </span><span id="local-6989586621679973878"><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679973878"><span class="hs-identifier hs-var">hoisted</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973880"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm
</span><a href="#local-6989586621679973878"><span class="hs-identifier hs-var">hoisted</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973879"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-comment">-- UPLC.Var () . DeBruijn . Index $ l - m hoisted</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="hs-comment">-- The logic is mostly for hoisting</span><span>
</span><span id="line-421"></span><span class="annot"><a href="Plutarch.Internal.html#compile%27"><span class="hs-identifier hs-type">compile'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#TermResult"><span class="hs-identifier hs-type">TermResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#UTerm"><span class="hs-identifier hs-type">UTerm</span></a></span><span>
</span><span id="line-422"></span><span id="compile%27"><span class="annot"><span class="annottext">compile' :: TermResult -&gt; UTerm
</span><a href="Plutarch.Internal.html#compile%27"><span class="hs-identifier hs-var hs-var">compile'</span></a></span></span><span> </span><span id="local-6989586621679973877"><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973877"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679973876"><span class="annot"><span class="annottext">t' :: RawTerm
</span><a href="#local-6989586621679973876"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973877"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-424"></span><span>      </span><span id="local-6989586621679973875"><span class="annot"><span class="annottext">deps :: [HoistedTerm]
</span><a href="#local-6989586621679973875"><span class="hs-identifier hs-var hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; [HoistedTerm]
</span><a href="Plutarch.Internal.html#%24sel%3AgetDeps%3ATermResult"><span class="hs-identifier hs-var">getDeps</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult
</span><a href="#local-6989586621679973877"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span>      </span><span class="annot"><a href="#local-6989586621679973874"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span>      </span><span id="local-6989586621679973874"><span class="annot"><span class="annottext">f :: Word64 -&gt; Maybe Word64 -&gt; (Bool, Maybe Word64)
</span><a href="#local-6989586621679973874"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679973873"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973873"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Word64
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973873"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>      </span><span class="annot"><a href="#local-6989586621679973874"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679973872"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973872"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973872"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><a href="#local-6989586621679973871"><span class="hs-identifier hs-type">g</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">M.Map</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#RawTerm"><span class="hs-identifier hs-type">RawTerm</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>      </span><span id="local-6989586621679973871"><span class="annot"><span class="annottext">g :: HoistedTerm
-&gt; (Map Dig Word64, [(Word64, RawTerm)], Word64)
-&gt; (Map Dig Word64, [(Word64, RawTerm)], Word64)
</span><a href="#local-6989586621679973871"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973870"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973870"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span id="local-6989586621679973869"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973869"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679973868"><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973868"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973867"><span class="annot"><span class="annottext">[(Word64, RawTerm)]
</span><a href="#local-6989586621679973867"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973866"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973866"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) k a.
(Functor f, Ord k) =&gt;
(Maybe a -&gt; f (Maybe a)) -&gt; k -&gt; Map k a -&gt; f (Map k a)
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">M.alterF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Maybe Word64 -&gt; (Bool, Maybe Word64)
</span><a href="#local-6989586621679973874"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973866"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973870"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973868"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-435"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973864"><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973864"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973864"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973866"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973869"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[(Word64, RawTerm)]
</span><a href="#local-6989586621679973867"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973866"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973863"><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973863"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973863"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Word64, RawTerm)]
</span><a href="#local-6989586621679973867"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973866"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span>      </span><span class="annot"><a href="#local-6989586621679973862"><span class="hs-identifier hs-type">toInline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">S.Set</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span><span>
</span><span id="line-439"></span><span>      </span><span id="local-6989586621679973862"><span class="annot"><span class="annottext">toInline :: Set Dig
</span><a href="#local-6989586621679973862"><span class="hs-identifier hs-var hs-var">toInline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-440"></span><span>        </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">S.fromList</span></a></span><span>
</span><span id="line-441"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973860"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973860"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973860"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="hs-operator">&lt;$&gt;</span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [[a]]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">groupBy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973857"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973857"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973856"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973856"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973857"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973856"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>          </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">sortOn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973855"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973855"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973855"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[HoistedTerm]
</span><a href="#local-6989586621679973875"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>      </span><span class="hs-comment">-- map: term -&gt; de Bruijn level</span><span>
</span><span id="line-449"></span><span>      </span><span class="hs-comment">-- defs: the terms, level 0 is last</span><span>
</span><span id="line-450"></span><span>      </span><span class="hs-comment">-- n: # of terms</span><span>
</span><span id="line-451"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679973854"><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973854"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973853"><span class="annot"><span class="annottext">[(Word64, RawTerm)]
</span><a href="#local-6989586621679973853"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973852"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973852"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm
-&gt; (Map Dig Word64, [(Word64, RawTerm)], Word64)
-&gt; (Map Dig Word64, [(Word64, RawTerm)], Word64)
</span><a href="#local-6989586621679973871"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Map k a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">M.empty</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973850"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973850"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">S.member</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973850"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Set Dig
</span><a href="#local-6989586621679973862"><span class="hs-identifier hs-var">toInline</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[HoistedTerm]
</span><a href="#local-6989586621679973875"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>      </span><span id="local-6989586621679973847"><span class="annot"><span class="annottext">map' :: HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973847"><span class="hs-identifier hs-var hs-var">map'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Internal.html#HoistedTerm"><span class="hs-identifier hs-type">HoistedTerm</span></a></span><span> </span><span id="local-6989586621679973846"><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973846"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span id="local-6989586621679973845"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973845"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679973844"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973844"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">M.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Dig
</span><a href="#local-6989586621679973846"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="annot"><span class="annottext">Map Dig Word64
</span><a href="#local-6989586621679973854"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-454"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679973842"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973842"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973844"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973842"><span class="hs-identifier hs-var">l'</span></a></span><span>
</span><span id="line-455"></span><span>        </span><span class="annot"><span class="annottext">Maybe Word64
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973847"><span class="hs-identifier hs-var">map'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973844"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973845"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>      </span><span id="local-6989586621679973841"><span class="annot"><span class="annottext">body :: UTerm
</span><a href="#local-6989586621679973841"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973847"><span class="hs-identifier hs-var">map'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973852"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973876"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span>      </span><span id="local-6989586621679973840"><span class="annot"><span class="annottext">wrapped :: UTerm
</span><a href="#local-6989586621679973840"><span class="hs-identifier hs-var hs-var">wrapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-460"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldl'</span></a></span><span>
</span><span id="line-461"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679973839"><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973839"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679973838"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973838"><span class="hs-identifier hs-var">lvl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679973837"><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973837"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
-&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann -&gt; name -&gt; Term name uni fun ann -&gt; Term name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.LamAbs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index -&gt; DeBruijn
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">DeBruijn</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Index
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973839"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HoistedTerm -&gt; Word64 -&gt; UTerm) -&gt; Word64 -&gt; RawTerm -&gt; UTerm
</span><a href="Plutarch.Internal.html#rawTermToUPLC"><span class="hs-identifier hs-var">rawTermToUPLC</span></a></span><span> </span><span class="annot"><span class="annottext">HoistedTerm -&gt; Word64 -&gt; UTerm
</span><a href="#local-6989586621679973847"><span class="hs-identifier hs-var">map'</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679973838"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="annot"><span class="annottext">RawTerm
</span><a href="#local-6989586621679973837"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>          </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973841"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><span class="annottext">[(Word64, RawTerm)]
</span><a href="#local-6989586621679973853"><span class="hs-identifier hs-var">defs</span></a></span><span>
</span><span id="line-464"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">UTerm
</span><a href="#local-6989586621679973840"><span class="hs-identifier hs-var">wrapped</span></a></span><span>
</span><span id="line-465"></span><span>
</span><span id="line-466"></span><span class="hs-comment">-- | Compile a (closed) Plutus Term to a usable script</span><span>
</span><span id="line-467"></span><span id="local-6989586621679974723"><span class="annot"><a href="Plutarch.Internal.html#compile"><span class="hs-identifier hs-type">compile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974723"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="Plutarch.Script.html#Script"><span class="hs-identifier hs-type">Script</span></a></span></span><span>
</span><span id="line-468"></span><span id="compile"><span class="annot"><span class="annottext">compile :: forall (a :: PType). Config -&gt; ClosedTerm a -&gt; Either Text Script
</span><a href="Plutarch.Internal.html#compile"><span class="hs-identifier hs-var hs-var">compile</span></a></span></span><span> </span><span id="local-6989586621679973831"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679973831"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679973830"><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973830"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall (a :: PType). ClosedTerm a -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#asClosedRawTerm"><span class="hs-identifier hs-var">asClosedRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973830"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-469"></span><span>  </span><span class="annot"><a href="Plutarch.Internal.html#TermMonad"><span class="hs-identifier hs-type">TermMonad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span id="local-6989586621679973829"><span class="annot"><span class="annottext">Config -&gt; Either Text TermResult
</span><a href="#local-6989586621679973829"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program DeBruijn DefaultUni DefaultFun () -&gt; Script
</span><a href="Plutarch.Script.html#Script"><span class="hs-identifier hs-var">Script</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall name (uni :: Type -&gt; Type) fun ann.
ann
-&gt; Version ann -&gt; Term name uni fun ann -&gt; Program name uni fun ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Program</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. ann -&gt; Natural -&gt; Natural -&gt; Natural -&gt; Version ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.Version</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; UTerm
</span><a href="Plutarch.Internal.html#compile%27"><span class="hs-identifier hs-var">compile'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Either Text TermResult
</span><a href="#local-6989586621679973829"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679973831"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span id="local-6989586621679974720"><span class="annot"><a href="Plutarch.Internal.html#hashTerm"><span class="hs-identifier hs-type">hashTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#ClosedTerm"><span class="hs-identifier hs-type">ClosedTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679974720"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Dig"><span class="hs-identifier hs-type">Dig</span></a></span></span><span>
</span><span id="line-472"></span><span id="hashTerm"><span class="annot"><span class="annottext">hashTerm :: forall (a :: PType). Config -&gt; ClosedTerm a -&gt; Either Text Dig
</span><a href="Plutarch.Internal.html#hashTerm"><span class="hs-identifier hs-var hs-var">hashTerm</span></a></span></span><span> </span><span id="local-6989586621679973825"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679973825"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621679973824"><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973824"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RawTerm -&gt; Dig
</span><a href="Plutarch.Internal.html#hashRawTerm"><span class="hs-identifier hs-var">hashRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TermResult -&gt; RawTerm
</span><a href="Plutarch.Internal.html#%24sel%3AgetTerm%3ATermResult"><span class="hs-identifier hs-var">getTerm</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: Type -&gt; Type) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall m. TermMonad m -&gt; ReaderT Config (Either Text) m
</span><a href="Plutarch.Internal.html#%24sel%3ArunTermMonad%3ATermMonad"><span class="hs-identifier hs-var">runTermMonad</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType).
Term s a -&gt; Word64 -&gt; TermMonad TermResult
</span><a href="Plutarch.Internal.html#%24sel%3AasRawTerm%3ATerm"><span class="hs-identifier hs-var">asRawTerm</span></a></span><span> </span><span class="annot"><span class="annottext">ClosedTerm a
</span><a href="#local-6989586621679973824"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679973825"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span class="hs-comment">{- |
  High precedence infixl synonym of 'papp', to be used like
  function juxtaposition. e.g.:

  &gt;&gt;&gt; f # x # y
  f x y
-}</span><span>
</span><span id="line-481"></span><span id="local-6989586621679973821"><span id="local-6989586621679973822"><span id="local-6989586621679973823"><span class="annot"><a href="Plutarch.Internal.html#%23"><span class="hs-operator hs-type">(#)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973823"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679973822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973821"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973823"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973822"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973823"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973821"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-482"></span><span id="%23"><span class="annot"><span class="annottext"># :: forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#%23"><span class="hs-operator hs-var hs-var">(#)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#papp"><span class="hs-identifier hs-var">papp</span></a></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">8</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%23"><span class="hs-operator hs-type">#</span></a></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-comment">{- |
  Low precedence infixr synonym of 'papp', to be used like
  '$', in combination with '#'. e.g.:

  &gt;&gt;&gt; f # x #$ g # y # z
  f x (g y z)
-}</span><span>
</span><span id="line-493"></span><span id="local-6989586621679973815"><span id="local-6989586621679973816"><span id="local-6989586621679973817"><span class="annot"><a href="Plutarch.Internal.html#%23%24"><span class="hs-operator hs-type">(#$)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973817"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679973816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%3A--%3E"><span class="hs-operator hs-type">:--&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973815"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973817"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973816"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973817"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679973815"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-494"></span><span id="%23%24"><span class="annot"><span class="annottext">#$ :: forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#%23%24"><span class="hs-operator hs-var hs-var">(#$)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (s :: S) (a :: PType) (b :: PType).
HasCallStack =&gt;
Term s (a :--&gt; b) -&gt; Term s a -&gt; Term s b
</span><a href="Plutarch.Internal.html#papp"><span class="hs-identifier hs-var">papp</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">0</span><span> </span><span class="annot"><a href="Plutarch.Internal.html#%23%24"><span class="hs-operator hs-type">#$</span></a></span><span>
</span><span id="line-497"></span></pre></body></html>