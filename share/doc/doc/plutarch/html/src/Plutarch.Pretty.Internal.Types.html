<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621679919765"><span id="local-6989586621679919766"></span></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Plutarch.Pretty.Internal.Types</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-2"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyCursor"><span class="hs-identifier">PrettyCursor</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier">PrettyState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyMonad"><span class="hs-identifier">PrettyMonad</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#forkState"><span class="hs-identifier">forkState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#normalizeCursor"><span class="hs-identifier">normalizeCursor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#specializeCursor"><span class="hs-identifier">specializeCursor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#memorizeName"><span class="hs-identifier">memorizeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#insertName"><span class="hs-identifier">insertName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#insertBindings"><span class="hs-identifier">insertBindings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#builtinFunAtRef"><span class="hs-identifier">builtinFunAtRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#nameOfRef"><span class="hs-identifier">nameOfRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">ReaderT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(&lt;=&lt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad.ST</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">ST</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">MonadState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">get</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">put</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">StateT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">find</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Txt</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier">System.Random.Stateful</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier">STGenM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier">StdGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">UntypedPlutusCore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">DefaultFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">Index</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Config.html"><span class="hs-identifier">Plutarch.Pretty.Internal.Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutarch.Pretty.Internal.Config.html#forcedPrefix"><span class="hs-identifier">forcedPrefix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-comment">{- | Notifies the prettifier what &quot;state&quot; the cursor currently is, so it can decide
whether or not to wrap the target expression in parens.

Normal indicates no parens wrapping is necessary, even for complex expressions.

Special indicates complex expressions should be wrapped in parens.

Usually, &quot;Special&quot; just hints at one of three states:

1. Applying - The expression is being applied like a function.
2. Applied - The expression is being applied as a function argument.
3. Unary arg - The expression is being used as an argument to a high arity unary operator (~ and !).
-}</span><span>
</span><span id="line-45"></span><span class="hs-keyword">data</span><span> </span><span id="PrettyCursor"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyCursor"><span class="hs-identifier hs-var">PrettyCursor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Normal"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Special"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#Special"><span class="hs-identifier hs-var">Special</span></a></span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679919704"><span id="local-6989586621679919706"><span class="annot"><span class="annottext">PrettyCursor
forall a. a -&gt; a -&gt; Bounded a
maxBound :: PrettyCursor
$cmaxBound :: PrettyCursor
minBound :: PrettyCursor
$cminBound :: PrettyCursor
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679919655"><span id="local-6989586621679919657"><span id="local-6989586621679919661"><span id="local-6989586621679919665"><span id="local-6989586621679919667"><span id="local-6989586621679919681"><span id="local-6989586621679919689"><span id="local-6989586621679919700"><span class="annot"><span class="annottext">Int -&gt; PrettyCursor
PrettyCursor -&gt; Int
PrettyCursor -&gt; [PrettyCursor]
PrettyCursor -&gt; PrettyCursor
PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
PrettyCursor -&gt; PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: PrettyCursor -&gt; PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
$cenumFromThenTo :: PrettyCursor -&gt; PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
enumFromTo :: PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
$cenumFromTo :: PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
enumFromThen :: PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
$cenumFromThen :: PrettyCursor -&gt; PrettyCursor -&gt; [PrettyCursor]
enumFrom :: PrettyCursor -&gt; [PrettyCursor]
$cenumFrom :: PrettyCursor -&gt; [PrettyCursor]
fromEnum :: PrettyCursor -&gt; Int
$cfromEnum :: PrettyCursor -&gt; Int
toEnum :: Int -&gt; PrettyCursor
$ctoEnum :: Int -&gt; PrettyCursor
pred :: PrettyCursor -&gt; PrettyCursor
$cpred :: PrettyCursor -&gt; PrettyCursor
succ :: PrettyCursor -&gt; PrettyCursor
$csucc :: PrettyCursor -&gt; PrettyCursor
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679919650"><span id="local-6989586621679919652"><span class="annot"><span class="annottext">PrettyCursor -&gt; PrettyCursor -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PrettyCursor -&gt; PrettyCursor -&gt; Bool
$c/= :: PrettyCursor -&gt; PrettyCursor -&gt; Bool
== :: PrettyCursor -&gt; PrettyCursor -&gt; Bool
$c== :: PrettyCursor -&gt; PrettyCursor -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679919643"><span id="local-6989586621679919645"><span id="local-6989586621679919647"><span class="annot"><span class="annottext">Int -&gt; PrettyCursor -&gt; ShowS
[PrettyCursor] -&gt; ShowS
PrettyCursor -&gt; [Char]
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrettyCursor] -&gt; ShowS
$cshowList :: [PrettyCursor] -&gt; ShowS
show :: PrettyCursor -&gt; [Char]
$cshow :: PrettyCursor -&gt; [Char]
showsPrec :: Int -&gt; PrettyCursor -&gt; ShowS
$cshowsPrec :: Int -&gt; PrettyCursor -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">data</span><span> </span><span id="PrettyState"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-var">PrettyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrettyState"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-var">PrettyState</span></a></span></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="%24sel%3Aps%27nameMap%3APrettyState"><span class="annot"><span class="annottext">PrettyState -&gt; Map Index Text
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27nameMap%3APrettyState"><span class="hs-identifier hs-var hs-var">ps'nameMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aps%27names%3APrettyState"><span class="annot"><span class="annottext">PrettyState -&gt; Set Text
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27names%3APrettyState"><span class="hs-identifier hs-var hs-var">ps'names</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="%24sel%3Aps%27cursor%3APrettyState"><span class="annot"><span class="annottext">PrettyState -&gt; PrettyCursor
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27cursor%3APrettyState"><span class="hs-identifier hs-var hs-var">ps'cursor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyCursor"><span class="hs-identifier hs-type">PrettyCursor</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">type</span><span> </span><span id="PrettyMonad"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyMonad"><span class="hs-identifier hs-var">PrettyMonad</span></a></span></span><span> </span><span id="local-6989586621679919637"><span class="annot"><a href="#local-6989586621679919637"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier hs-type">STGenM</span></a></span><span> </span><span class="annot"><a href="../../../../random/html/src"><span class="hs-identifier hs-type">StdGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919637"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">StateT</span></a></span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">ST</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919637"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span id="local-6989586621679919833"><span id="local-6989586621679919835"><span id="local-6989586621679919836"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#forkState"><span class="hs-identifier hs-type">forkState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919836"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919835"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679919835"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919833"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679919835"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919833"><span class="hs-identifier hs-type">b</span></a></span></span></span></span><span>
</span><span id="line-57"></span><span id="forkState"><span class="annot"><span class="annottext">forkState :: forall s (m :: Type -&gt; Type) b. MonadState s m =&gt; m b -&gt; m b
</span><a href="Plutarch.Pretty.Internal.Types.html#forkState"><span class="hs-identifier hs-var hs-var">forkState</span></a></span></span><span> </span><span id="local-6989586621679919627"><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679919627"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s (m :: Type -&gt; Type). MonadState s m =&gt; m s
</span><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679919626"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679919626"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679919627"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: Type -&gt; Type) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;*</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: Type -&gt; Type). MonadState s m =&gt; s -&gt; m ()
</span><a href="../../../../ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">put</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679919626"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#normalizeCursor"><span class="hs-identifier hs-type">normalizeCursor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span>
</span><span id="line-60"></span><span id="normalizeCursor"><span class="annot"><span class="annottext">normalizeCursor :: PrettyState -&gt; PrettyState
</span><a href="Plutarch.Pretty.Internal.Types.html#normalizeCursor"><span class="hs-identifier hs-var hs-var">normalizeCursor</span></a></span></span><span> </span><span id="local-6989586621679919624"><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919624"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919624"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:ps'cursor:PrettyState :: PrettyCursor
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27cursor%3APrettyState"><span class="hs-identifier hs-var">ps'cursor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyCursor
</span><a href="Plutarch.Pretty.Internal.Types.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#specializeCursor"><span class="hs-identifier hs-type">specializeCursor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span>
</span><span id="line-63"></span><span id="specializeCursor"><span class="annot"><span class="annottext">specializeCursor :: PrettyState -&gt; PrettyState
</span><a href="Plutarch.Pretty.Internal.Types.html#specializeCursor"><span class="hs-identifier hs-var hs-var">specializeCursor</span></a></span></span><span> </span><span id="local-6989586621679919623"><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919623"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919623"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:ps'cursor:PrettyState :: PrettyCursor
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27cursor%3APrettyState"><span class="hs-identifier hs-var">ps'cursor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyCursor
</span><a href="Plutarch.Pretty.Internal.Types.html#Special"><span class="hs-identifier hs-var">Special</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#memorizeName"><span class="hs-identifier hs-type">memorizeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span>
</span><span id="line-66"></span><span id="memorizeName"><span class="annot"><span class="annottext">memorizeName :: Text -&gt; PrettyState -&gt; PrettyState
</span><a href="Plutarch.Pretty.Internal.Types.html#memorizeName"><span class="hs-identifier hs-var hs-var">memorizeName</span></a></span></span><span> </span><span id="local-6989586621679919622"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919622"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679919621"><span class="annot"><span class="annottext">x :: PrettyState
</span><a href="#local-6989586621679919621"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679919620"><span class="annot"><span class="annottext">Set Text
ps'names :: Set Text
$sel:ps'names:PrettyState :: PrettyState -&gt; Set Text
</span><a href="#local-6989586621679919620"><span class="hs-identifier hs-var hs-var">ps'names</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919621"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">$sel:ps'names:PrettyState :: Set Text
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27names%3APrettyState"><span class="hs-identifier hs-var">ps'names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919622"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Set Text
</span><a href="#local-6989586621679919620"><span class="hs-identifier hs-var">ps'names</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- | Insert a fresh binding onto the name map, i.e a name at index 0 - incrementing all other indices.</span><span>
</span><span id="line-69"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#insertName"><span class="hs-identifier hs-type">insertName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span>
</span><span id="line-70"></span><span id="insertName"><span class="annot"><span class="annottext">insertName :: Text -&gt; PrettyState -&gt; PrettyState
</span><a href="Plutarch.Pretty.Internal.Types.html#insertName"><span class="hs-identifier hs-var hs-var">insertName</span></a></span></span><span> </span><span id="local-6989586621679919618"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919618"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679919617"><span class="annot"><span class="annottext">x :: PrettyState
</span><a href="#local-6989586621679919617"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679919616"><span class="annot"><span class="annottext">Map Index Text
ps'nameMap :: Map Index Text
$sel:ps'nameMap:PrettyState :: PrettyState -&gt; Map Index Text
</span><a href="#local-6989586621679919616"><span class="hs-identifier hs-var hs-var">ps'nameMap</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919617"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:ps'nameMap:PrettyState :: Map Index Text
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27nameMap%3APrettyState"><span class="hs-identifier hs-var">ps'nameMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.mapKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Index
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Index Text
</span><a href="#local-6989586621679919616"><span class="hs-identifier hs-var">ps'nameMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Index
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919618"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#insertBindings"><span class="hs-identifier hs-type">insertBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span>
</span><span id="line-76"></span><span id="insertBindings"><span class="annot"><span class="annottext">insertBindings :: [Text] -&gt; PrettyState -&gt; PrettyState
</span><a href="Plutarch.Pretty.Internal.Types.html#insertBindings"><span class="hs-identifier hs-var hs-var">insertBindings</span></a></span></span><span> </span><span id="local-6989586621679919612"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679919612"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621679919611"><span class="annot"><span class="annottext">prst :: PrettyState
</span><a href="#local-6989586621679919611"><span class="hs-identifier hs-var">prst</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#PrettyState"><span class="hs-identifier hs-type">PrettyState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679919610"><span class="annot"><span class="annottext">Map Index Text
ps'nameMap :: Map Index Text
$sel:ps'nameMap:PrettyState :: PrettyState -&gt; Map Index Text
</span><a href="#local-6989586621679919610"><span class="hs-identifier hs-var hs-var">ps'nameMap</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><span class="annottext">PrettyState
</span><a href="#local-6989586621679919611"><span class="hs-identifier hs-var">prst</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:ps'nameMap:PrettyState :: Map Index Text
</span><a href="Plutarch.Pretty.Internal.Types.html#%24sel%3Aps%27nameMap%3APrettyState"><span class="hs-identifier hs-var">ps'nameMap</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="annottext">forall k2 k1 a. Ord k2 =&gt; (k1 -&gt; k2) -&gt; Map k1 a -&gt; Map k2 a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.mapKeys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Index
</span><a href="#local-6989586621679919609"><span class="hs-identifier hs-var">nameCount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Index Text
</span><a href="#local-6989586621679919610"><span class="hs-identifier hs-var">ps'nameMap</span></a></span><span>
</span><span id="line-80"></span><span>          </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Index
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index
</span><a href="#local-6989586621679919609"><span class="hs-identifier hs-var">nameCount</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Index
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679919612"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621679919609"><span class="annot"><span class="annottext">nameCount :: Index
</span><a href="#local-6989586621679919609"><span class="hs-identifier hs-var hs-var">nameCount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679919612"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#builtinFunAtRef"><span class="hs-identifier hs-type">builtinFunAtRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultFun</span></a></span><span>
</span><span id="line-86"></span><span id="builtinFunAtRef"><span class="annot"><span class="annottext">builtinFunAtRef :: Map Index Text -&gt; Index -&gt; Maybe DefaultFun
</span><a href="Plutarch.Pretty.Internal.Types.html#builtinFunAtRef"><span class="hs-identifier hs-var hs-var">builtinFunAtRef</span></a></span></span><span> </span><span id="local-6989586621679919605"><span class="annot"><span class="annottext">Map Index Text
</span><a href="#local-6989586621679919605"><span class="hs-identifier hs-var">nameMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe DefaultFun
</span><a href="Plutarch.Pretty.Internal.Types.html#builtinFunFromName"><span class="hs-identifier hs-var">builtinFunFromName</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;=&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Index -&gt; Map Index Text -&gt; Maybe Text
</span><a href="Plutarch.Pretty.Internal.Types.html#nameOfRef"><span class="hs-identifier hs-var">nameOfRef</span></a></span><span> </span><span class="annot"><span class="annottext">Map Index Text
</span><a href="#local-6989586621679919605"><span class="hs-identifier hs-var">nameMap</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#nameOfRef"><span class="hs-identifier hs-type">nameOfRef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-89"></span><span id="nameOfRef"><span class="annot"><span class="annottext">nameOfRef :: Index -&gt; Map Index Text -&gt; Maybe Text
</span><a href="Plutarch.Pretty.Internal.Types.html#nameOfRef"><span class="hs-identifier hs-var hs-var">nameOfRef</span></a></span></span><span> </span><span id="local-6989586621679919602"><span class="annot"><span class="annottext">Index
</span><a href="#local-6989586621679919602"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Index
</span><a href="#local-6989586621679919602"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Index
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#builtinFunFromName"><span class="hs-identifier hs-type">builtinFunFromName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultFun</span></a></span><span>
</span><span id="line-92"></span><span id="builtinFunFromName"><span class="annot"><span class="annottext">builtinFunFromName :: Text -&gt; Maybe DefaultFun
</span><a href="Plutarch.Pretty.Internal.Types.html#builtinFunFromName"><span class="hs-identifier hs-var hs-var">builtinFunFromName</span></a></span></span><span> </span><span id="local-6989586621679919600"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919600"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">Txt.take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679919598"><span class="hs-identifier hs-var">prefixLen</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919600"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="Plutarch.Pretty.Internal.Config.html#forcedPrefix"><span class="hs-identifier hs-var">forcedPrefix</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe DefaultFun
</span><a href="#local-6989586621679919597"><span class="hs-identifier hs-var">helper</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">Txt.drop</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679919598"><span class="hs-identifier hs-var">prefixLen</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919600"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe DefaultFun
</span><a href="#local-6989586621679919597"><span class="hs-identifier hs-var">helper</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919600"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621679919598"><span class="annot"><span class="annottext">prefixLen :: Int
</span><a href="#local-6989586621679919598"><span class="hs-identifier hs-var hs-var">prefixLen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">Txt.length</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="Plutarch.Pretty.Internal.Config.html#forcedPrefix"><span class="hs-identifier hs-var">forcedPrefix</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span id="local-6989586621679919597"><span class="annot"><span class="annottext">helper :: Text -&gt; Maybe DefaultFun
</span><a href="#local-6989586621679919597"><span class="hs-identifier hs-var hs-var">helper</span></a></span></span><span> </span><span id="local-6989586621679919590"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919590"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: Type -&gt; Type) a.
Foldable t =&gt;
(a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679919589"><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679919589"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; Text
</span><a href="Plutarch.Pretty.Internal.Types.html#showText"><span class="hs-identifier hs-var">showText</span></a></span><span> </span><span class="annot"><span class="annottext">DefaultFun
</span><a href="#local-6989586621679919589"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679919590"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[DefaultFun]
</span><a href="#local-6989586621679919587"><span class="hs-identifier hs-var">builtinFunNames</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span id="local-6989586621679919587"><span class="annot"><span class="annottext">builtinFunNames :: [DefaultFun]
</span><a href="#local-6989586621679919587"><span class="hs-identifier hs-var hs-var">builtinFunNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">maxBound</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">PLC.DefaultFun</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="local-6989586621679919779"><span class="annot"><a href="Plutarch.Pretty.Internal.Types.html#showText"><span class="hs-identifier hs-type">showText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679919779"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679919779"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span></span><span>
</span><span id="line-102"></span><span id="showText"><span class="annot"><span class="annottext">showText :: forall a. Show a =&gt; a -&gt; Text
</span><a href="Plutarch.Pretty.Internal.Types.html#showText"><span class="hs-identifier hs-var hs-var">showText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><a href="../../../../ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">Txt.pack</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; [Char]
</span><a href="../../../../ghc/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-103"></span></pre></body></html>