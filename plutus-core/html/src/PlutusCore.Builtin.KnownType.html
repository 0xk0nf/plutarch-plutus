<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BlockArguments        #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds       #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DefaultSignatures     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase            #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications      #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE StrictData            #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Builtin.KnownType</span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeError"><span class="hs-identifier">KnownTypeError</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#throwKnownTypeErrorWithCause"><span class="hs-identifier">throwKnownTypeErrorWithCause</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinTypeIn"><span class="hs-identifier">KnownBuiltinTypeIn</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinType"><span class="hs-identifier">KnownBuiltinType</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier">MakeKnownM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier">ReadKnownM</span></a></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#liftReadKnownM"><span class="hs-identifier">liftReadKnownM</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownConstant"><span class="hs-identifier">readKnownConstant</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier">MakeKnownIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier">MakeKnown</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier">ReadKnownIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier">ReadKnown</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnownOrFail"><span class="hs-identifier">makeKnownOrFail</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownSelf"><span class="hs-identifier">readKnownSelf</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Emitter.html"><span class="hs-identifier">PlutusCore.Builtin.Emitter</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html"><span class="hs-identifier">PlutusCore.Builtin.HasConstant</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html"><span class="hs-identifier">PlutusCore.Builtin.Polymorphism</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html"><span class="hs-identifier">PlutusCore.Evaluation.Machine.Exception</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html"><span class="hs-identifier">PlutusCore.Evaluation.Result</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/rxxbi3jlnzvwwmz790ahapc9xmy1vafc-dlist-lib-dlist-1.0-haddock-doc/share/doc/dlist/html/src"><span class="hs-identifier">Data.DList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/rxxbi3jlnzvwwmz790ahapc9xmy1vafc-dlist-lib-dlist-1.0-haddock-doc/share/doc/dlist/html/src"><span class="hs-identifier">DList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Either.Extras.html"><span class="hs-identifier">Data.Either.Extras</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.String</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">inline</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">oneShot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Universe.html"><span class="hs-identifier">Universe</span></a></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-comment">-- | A constraint for \&quot;@a@ is a 'ReadKnownIn' and 'MakeKnownIn' by means of being included</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- in @uni@\&quot;.</span><span>
</span><span id="line-52"></span><span class="hs-keyword">type</span><span> </span><span id="KnownBuiltinTypeIn"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinTypeIn"><span class="hs-identifier hs-var">KnownBuiltinTypeIn</span></a></span></span><span> </span><span id="local-6989586621681039096"><span class="annot"><a href="#local-6989586621681039096"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621681039095"><span class="annot"><a href="#local-6989586621681039095"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621681039094"><span class="annot"><a href="#local-6989586621681039094"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html#HasConstantIn"><span class="hs-identifier hs-type">HasConstantIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039096"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039095"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039096"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GEq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039096"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681039096"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-operator hs-type">`Contains`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039094"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | A constraint for \&quot;@a@ is a 'ReadKnownIn' and 'MakeKnownIn' by means of being included</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- in @UniOf term@\&quot;.</span><span>
</span><span id="line-56"></span><span class="hs-keyword">type</span><span> </span><span id="KnownBuiltinType"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinType"><span class="hs-identifier hs-var">KnownBuiltinType</span></a></span></span><span> </span><span id="local-6989586621681039093"><span class="annot"><a href="#local-6989586621681039093"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621681039092"><span class="annot"><a href="#local-6989586621681039092"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinTypeIn"><span class="hs-identifier hs-type">KnownBuiltinTypeIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039093"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681039093"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039092"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">{- Note [Performance of ReadKnownIn and MakeKnownIn instances]
It's critically important that 'readKnown' runs in the concrete 'Either' rather than a general
'MonadError'. Changing from the latter to the former gave us a speedup of up to 19%, see
https://github.com/input-output-hk/plutus/pull/4307

Replacing the @AsUnliftingError err, AsEvaluationFailure err@ constraints with the dedicated
'KnownTypeError' data type gave us a speedup of up to 4%.

All the same considerations apply to 'makeKnown': https://github.com/input-output-hk/plutus/pull/4421

It's beneficial to inline 'readKnown' and 'makeKnown' not only because we use them directly over
concrete types once 'toBuiltinsRuntime' is inlined, but also because otherwise GHC compiles each of
them to two definitions (one calling the other) for some reason.
So always add an @INLINE@ pragma to all definitions of 'makeKnown' and 'readKnown' unless you have
a specific reason not to.

Some 'readKnown' implementations require inserting a call to 'oneShot'. E.g. if 'oneShot' is not
used in 'readKnownConstant' then 'GHC pulls @gshow uniExp@ out of the 'Nothing' branch, thus
allocating a thunk of type 'String' that is completely redundant whenever there's no error,
which is the majority of cases. And putting 'oneShot' as the outermost call results in
worse Core.

Any change to an instance of 'ReadKnownIn' or 'MakeKnownIn', even completely trivial, requires
looking into the generated Core, since compilation of these instances is extremely brittle
optimization-wise.

Things to watch out for are unnecessary sharing (for example, a @let@ appearing outside of a @case@
allocates a thunk and if that thunk is not referenced inside of one of the branches, then it's
wasteful, especially when it's not referenced in the most commonly chosen branch) and type class
methods not being extracted from the dictionary and used directly instead (i.e. if you see
multiple @pure@ and @&gt;&gt;=@ in the code, that's not good). Note that neither @let@ nor @&gt;&gt;=@ are bad
in general, we certainly do need to allocate thunks occasionally, it's just that when it comes to
builtins this is rarely the case as most of the time we want aggressive inlining and specialization
and the &quot;just compute the damn thing&quot; behavior.
-}</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-comment">{- Note [Unlifting values of built-in types]
It's trivial to unlift from a term a value of a monomorphic type like 'Integer': just check that
the term is a constant, extract the type tag and check it for equality with the type tag of
'Integer'.

Things work the same way for a fully monomorphized polymorphic type, i.e. @(Integer, Bool@) is not
any different from just 'Integer' unlifting-wise.

However there's no sensible way of unlifting a value of, say, @[a]@ where @a@ in not a built-in
type. So let's say we instantiated @a@ to an @Opaque val rep@ like we do for polymorphic functions
that don't deal with polymorphic built-in types (e.g. @id@, @ifThenElse@ etc). That would mean we'd
need to write a function from a @[a]@ for some arbitrary built-in @a@ to @[Opaque val a]@. Which
is really easy to do: it's just @map makeKnown@. But the problem is, unlifting is supposed to be
cheap and that @map@ is O(n), so for example 'MkCons' would become an O(n) operation making
perfectly linear algorithms quadratic. See https://github.com/input-output-hk/plutus/pull/4215 for
how that would look like.

So the problem is that we can't convert in O(1) time a @[a]@ coming from a constant of
statically-unknown type (that @a@ is existential) to @[a']@ where @a'@ is known statically.
Thus it's impossible to instantiate @a@ in Haskell's

    nullList :: [a] -&gt; Bool

so that there's a 'TypeScheme' for this function.

One non-solution would be to instantiate @a@, then recurse on the type, construct a new function
that defers to the original @nullList@ but wraps its argument in a specific way (more on that below)
making it possible to assign a 'TypeScheme' to the resulting function. Astonishingly enough, that
could actually work and if we ever write a paper on builtins, we should mention that example, but:

1. such a trick requires a generic machinery that knows how to check that the head of the builtin
   application is a particular built-in type. We used to have that, but it was just way too slow
2. that would only work for functions that don't care about @a@ at all. But for example when
   elaborating @cons :: a -&gt; [a] -&gt; [a]@ as a Plutus builtin we need to unlift both the arguments
   and check that their @a@s are equal
   (See Note [Representable built-in functions over polymorphic built-in types])
   and it's either way too complex or even impossible to do that automatically within some generic
   machinery

So what we do is we simply require the user to write

    nullList :: SomeConstant uni [a] -&gt; Bool

and unlift a @[a]@ manually within the definition of the builtin. This works, because the
existential @a@ never escapes the definition of the builtin. I.e. it's fine to unpack an existential
and use it immediately without ever exposing the existential parts to the outside and it's not fine
to try to return a value having an existential inside of it, which is what unlifting of @[a]@ would
amount to.

Could we somehow align the unlifting machinery so that it does not construct values of particular
types, but rather feeds them to a continuation or something, so that the existential parts never
try to escape? Maybe, but see point 2 from the above, we do want to get our hands on the particular
universes sometimes and point 1 prevents us from doing that generically, so it doesn't seem like
we could do that within some automated machinery.

Overall, asking the user to manually unlift from @SomeConstant uni [a]@ is just always going to be
faster than any kind of fancy encoding.
-}</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">{- Note [Alignment of ReadKnownIn and MakeKnownIn]
We keep 'ReadKnownIn' and 'MakeKnownIn' separate, because values of some types can only be lifted
and not unlifted, for example 'EvaluationResult' and 'Emitter' can't appear in argument position.

'KnownTypeAst' is not a superclass of ReadKnownIn and MakeKnownIn. This is due to the fact that
polymorphic built-in types are only liftable/unliftable when they're fully monomorphized, while
'toTypeAst' works for polymorphic built-in types that have type variables in them, and so the
constraints are completely different in the two cases and we keep the two concepts apart
(there doesn't seem to be any cons to that).
-}</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- | Throw a @ErrorWithCause KnownTypeError cause@.</span><span>
</span><span id="line-165"></span><span id="local-6989586621681039332"><span id="local-6989586621681039337"><span id="local-6989586621681039339"><span id="local-6989586621681039340"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#throwKnownTypeErrorWithCause"><span class="hs-identifier hs-type">throwKnownTypeErrorWithCause</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#ErrorWithCause"><span class="hs-identifier hs-type">ErrorWithCause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039340"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039339"><span class="hs-identifier hs-type">cause</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681039337"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#AsUnliftingError"><span class="hs-identifier hs-type">AsUnliftingError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039340"><span class="hs-identifier hs-type">err</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#AsEvaluationFailure"><span class="hs-identifier hs-type">AsEvaluationFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039340"><span class="hs-identifier hs-type">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039339"><span class="hs-identifier hs-type">cause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeError"><span class="hs-identifier hs-type">KnownTypeError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039337"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039332"><span class="hs-identifier hs-type">void</span></a></span></span></span></span></span><span>
</span><span id="line-168"></span><span id="throwKnownTypeErrorWithCause"><span class="annot"><span class="annottext">throwKnownTypeErrorWithCause :: forall err cause (m :: * -&gt; *) void.
(MonadError (ErrorWithCause err cause) m, AsUnliftingError err,
 AsEvaluationFailure err) =&gt;
cause -&gt; KnownTypeError -&gt; m void
</span><a href="PlutusCore.Builtin.KnownType.html#throwKnownTypeErrorWithCause"><span class="hs-identifier hs-var hs-var">throwKnownTypeErrorWithCause</span></a></span></span><span> </span><span id="local-6989586621681039076"><span class="annot"><span class="annottext">cause
</span><a href="#local-6989586621681039076"><span class="hs-identifier hs-var">cause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeUnliftingError"><span class="hs-identifier hs-type">KnownTypeUnliftingError</span></a></span><span> </span><span id="local-6989586621681039074"><span class="annot"><span class="annottext">UnliftingError
</span><a href="#local-6989586621681039074"><span class="hs-identifier hs-var">unlErr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err UnliftingError
-&gt; UnliftingError -&gt; Maybe cause -&gt; m void
forall exc e t term (m :: * -&gt; *) x.
(exc ~ ErrorWithCause e term, MonadError exc m) =&gt;
AReview e t -&gt; t -&gt; Maybe term -&gt; m x
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#throwingWithCause"><span class="hs-identifier hs-var">throwingWithCause</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err UnliftingError
forall r. AsUnliftingError r =&gt; Prism' r UnliftingError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#_UnliftingError"><span class="hs-identifier hs-var">_UnliftingError</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingError
</span><a href="#local-6989586621681039074"><span class="hs-identifier hs-var">unlErr</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe cause -&gt; m void) -&gt; Maybe cause -&gt; m void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">cause -&gt; Maybe cause
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">cause
</span><a href="#local-6989586621681039076"><span class="hs-identifier hs-var">cause</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeEvaluationFailure"><span class="hs-identifier hs-var">KnownTypeEvaluationFailure</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AReview err () -&gt; () -&gt; Maybe cause -&gt; m void
forall exc e t term (m :: * -&gt; *) x.
(exc ~ ErrorWithCause e term, MonadError exc m) =&gt;
AReview e t -&gt; t -&gt; Maybe term -&gt; m x
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#throwingWithCause"><span class="hs-identifier hs-var">throwingWithCause</span></a></span><span> </span><span class="annot"><span class="annottext">AReview err ()
forall err. AsEvaluationFailure err =&gt; Prism' err ()
</span><a href="PlutusCore.Evaluation.Result.html#_EvaluationFailure"><span class="hs-identifier hs-var">_EvaluationFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe cause -&gt; m void) -&gt; Maybe cause -&gt; m void
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">cause -&gt; Maybe cause
forall a. a -&gt; Maybe a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">cause
</span><a href="#local-6989586621681039076"><span class="hs-identifier hs-var">cause</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621681039305"><span id="local-6989586621681039307"><span id="local-6989586621681039309"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#typeMismatchError"><span class="hs-identifier hs-type">typeMismatchError</span></a></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">GShow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039309"><span class="hs-identifier hs-type">uni</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039309"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039307"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039309"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#Esc"><span class="hs-identifier hs-type">Esc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039305"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#UnliftingError"><span class="hs-identifier hs-type">UnliftingError</span></a></span></span></span></span><span>
</span><span id="line-177"></span><span id="typeMismatchError"><span class="annot"><span class="annottext">typeMismatchError :: forall (uni :: * -&gt; *) a b.
GShow uni =&gt;
uni (Esc a) -&gt; uni (Esc b) -&gt; UnliftingError
</span><a href="PlutusCore.Builtin.KnownType.html#typeMismatchError"><span class="hs-identifier hs-var hs-var">typeMismatchError</span></a></span></span><span> </span><span id="local-6989586621681039056"><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621681039056"><span class="hs-identifier hs-var">uniExp</span></a></span></span><span> </span><span id="local-6989586621681039055"><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621681039055"><span class="hs-identifier hs-var">uniAct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; UnliftingError
forall a. IsString a =&gt; [Char] -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; UnliftingError) -&gt; [Char] -&gt; UnliftingError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">concat</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Type mismatch: &quot;</span></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;expected: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a) -&gt; [Char]
forall {k} (t :: k -&gt; *) (a :: k). GShow t =&gt; t a -&gt; [Char]
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">gshow</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc a)
</span><a href="#local-6989586621681039056"><span class="hs-identifier hs-var">uniExp</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;; actual: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc b) -&gt; [Char]
forall {k} (t :: k -&gt; *) (a :: k). GShow t =&gt; t a -&gt; [Char]
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-var">gshow</span></a></span><span> </span><span class="annot"><span class="annottext">uni (Esc b)
</span><a href="#local-6989586621681039055"><span class="hs-identifier hs-var">uniAct</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- Just for tidier Core to get generated, we don't care about performance here, since it's just a</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- failure message and evaluation is about to be shut anyway.</span><span>
</span><span id="line-184"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#typeMismatchError"><span class="hs-pragma hs-type">typeMismatchError</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | The monad that 'makeKnown' runs in.</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- Equivalent to @ExceptT KnownTypeError Emitter@, except optimized in two ways:</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- 1. everything is strict</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- 2. has the 'MakeKnownSuccess' constructor that is used for returning a value with no logs</span><span>
</span><span id="line-191"></span><span class="hs-comment">--    attached, which is the most common case for us, so it helps a lot not to construct and</span><span>
</span><span id="line-192"></span><span class="hs-comment">--    deconstruct a redundant tuple</span><span>
</span><span id="line-193"></span><span class="hs-comment">--</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- Moving from @ExceptT KnownTypeError Emitter@ to this data type gave us a speedup of 8% of total</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- evaluation time.</span><span>
</span><span id="line-196"></span><span class="hs-comment">--</span><span>
</span><span id="line-197"></span><span class="hs-comment">-- Logs are represented as a 'DList', because we don't particularly care about the efficiency of</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- logging, since there's no logging on the chain and builtins don't emit much anyway. Otherwise</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- we'd have to use @text-builder@ or @text-builder-linear@ or something of this sort.</span><span>
</span><span id="line-200"></span><span class="hs-keyword">data</span><span> </span><span id="MakeKnownM"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-var">MakeKnownM</span></a></span></span><span> </span><span id="local-6989586621681039288"><span class="annot"><a href="#local-6989586621681039288"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="MakeKnownFailure"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/rxxbi3jlnzvwwmz790ahapc9xmy1vafc-dlist-lib-dlist-1.0-haddock-doc/share/doc/dlist/html/src"><span class="hs-identifier hs-type">DList</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeError"><span class="hs-identifier hs-type">KnownTypeError</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="MakeKnownSuccess"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-var">MakeKnownSuccess</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621681039288"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="MakeKnownSuccessWithLogs"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-var">MakeKnownSuccessWithLogs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/rxxbi3jlnzvwwmz790ahapc9xmy1vafc-dlist-lib-dlist-1.0-haddock-doc/share/doc/dlist/html/src"><span class="hs-identifier hs-type">DList</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681039288"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | Prepend logs to a 'MakeKnownM' computation.</span><span>
</span><span id="line-206"></span><span id="local-6989586621681039291"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-type">withLogs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/rxxbi3jlnzvwwmz790ahapc9xmy1vafc-dlist-lib-dlist-1.0-haddock-doc/share/doc/dlist/html/src"><span class="hs-identifier hs-type">DList</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039291"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039291"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-207"></span><span id="withLogs"><span class="annot"><span class="annottext">withLogs :: forall a. DList Text -&gt; MakeKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-var hs-var">withLogs</span></a></span></span><span> </span><span id="local-6989586621681039045"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039045"><span class="hs-identifier hs-var">logs1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681039044"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039044"><span class="hs-identifier hs-var">logs2</span></a></span></span><span> </span><span id="local-6989586621681039043"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039043"><span class="hs-identifier hs-var">err</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039045"><span class="hs-identifier hs-var">logs1</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; DList Text -&gt; DList Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039044"><span class="hs-identifier hs-var">logs2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039043"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span id="local-6989586621681039042"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039042"><span class="hs-identifier hs-var">x</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; a -&gt; MakeKnownM a
forall a. DList Text -&gt; a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-var">MakeKnownSuccessWithLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039045"><span class="hs-identifier hs-var">logs1</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039042"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681039041"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039041"><span class="hs-identifier hs-var">logs2</span></a></span></span><span> </span><span id="local-6989586621681039040"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039040"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; a -&gt; MakeKnownM a
forall a. DList Text -&gt; a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-var">MakeKnownSuccessWithLogs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039045"><span class="hs-identifier hs-var">logs1</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; DList Text -&gt; DList Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039041"><span class="hs-identifier hs-var">logs2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039040"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-211"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-pragma hs-type">withLogs</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Functor</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621681039035"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; MakeKnownM a -&gt; MakeKnownM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681039034"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039034"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681039033"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039033"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM b
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039034"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039033"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span id="local-6989586621681039032"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039032"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span id="local-6989586621681039031"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039031"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; MakeKnownM b
forall a. a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-var">MakeKnownSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039032"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039031"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span id="local-6989586621681039030"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039030"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681039029"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039029"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681039028"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039028"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; b -&gt; MakeKnownM b
forall a. DList Text -&gt; a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-var">MakeKnownSuccessWithLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039029"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039030"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039028"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-pragma hs-type">fmap</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">-- Written out explicitly just in case (see @fmap@ above for what the case might be).</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681039027"><span class="annot"><span class="annottext">&lt;$ :: forall a b. a -&gt; MakeKnownM b -&gt; MakeKnownM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;$</span></a></span></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681039025"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039025"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681039024"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039024"><span class="hs-identifier hs-var">err</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039025"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039024"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621681039023"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039023"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM a
forall a. a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-var">MakeKnownSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039023"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621681039022"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039022"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681039021"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039021"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; a -&gt; MakeKnownM a
forall a. DList Text -&gt; a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-var">MakeKnownSuccessWithLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039021"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681039022"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;$</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039012"><span id="local-6989586621681039015"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621681039010"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; MakeKnownM a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM a
forall a. a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-var">MakeKnownSuccess</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-pragma hs-type">pure</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681039007"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039007"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681039006"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039006"><span class="hs-identifier hs-var">err</span></a></span></span><span>       </span><span id="local-6989586621681039005"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. MakeKnownM (a -&gt; b) -&gt; MakeKnownM a -&gt; MakeKnownM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></a></span></span><span> </span><span class="annot"><span class="annottext">MakeKnownM a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM b
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039007"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681039006"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span id="local-6989586621681039004"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039004"><span class="hs-identifier hs-var">f</span></a></span></span><span>              </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span id="local-6989586621681039003"><span class="annot"><span class="annottext">MakeKnownM a
</span><a href="#local-6989586621681039003"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; MakeKnownM a -&gt; MakeKnownM b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039004"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">MakeKnownM a
</span><a href="#local-6989586621681039003"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681039002"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039002"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681039001"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039001"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span id="local-6989586621681039000"><span class="annot"><span class="annottext">MakeKnownM a
</span><a href="#local-6989586621681039000"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; MakeKnownM b -&gt; MakeKnownM b
forall a. DList Text -&gt; MakeKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-var">withLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681039002"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">(MakeKnownM b -&gt; MakeKnownM b) -&gt; MakeKnownM b -&gt; MakeKnownM b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; MakeKnownM a -&gt; MakeKnownM b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681039001"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">MakeKnownM a
</span><a href="#local-6989586621681039000"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-comment">-- Better than the default implementation, because the value in the 'MakeKnownSuccess' case</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-comment">-- doesn't need to be retained.</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681038999"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038999"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681038998"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038998"><span class="hs-identifier hs-var">err</span></a></span></span><span>       </span><span id="local-6989586621681038997"><span class="annot"><span class="annottext">*&gt; :: forall a b. MakeKnownM a -&gt; MakeKnownM b -&gt; MakeKnownM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">*&gt;</span></a></span></span><span> </span><span class="annot"><span class="annottext">MakeKnownM b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM b
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038999"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038998"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span>              </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span id="local-6989586621681038996"><span class="annot"><span class="annottext">MakeKnownM b
</span><a href="#local-6989586621681038996"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MakeKnownM b
</span><a href="#local-6989586621681038996"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681038995"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038995"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span id="local-6989586621681038994"><span class="annot"><span class="annottext">MakeKnownM b
</span><a href="#local-6989586621681038994"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; MakeKnownM b -&gt; MakeKnownM b
forall a. DList Text -&gt; MakeKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-var">withLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038995"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">MakeKnownM b
</span><a href="#local-6989586621681038994"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681038988"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span id="local-6989586621681038986"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038986"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681038985"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038985"><span class="hs-identifier hs-var">err</span></a></span></span><span>       </span><span id="local-6989586621681038984"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. MakeKnownM a -&gt; (a -&gt; MakeKnownM b) -&gt; MakeKnownM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM b
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038986"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038985"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span id="local-6989586621681038983"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038983"><span class="hs-identifier hs-var">x</span></a></span></span><span>              </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span id="local-6989586621681038982"><span class="annot"><span class="annottext">a -&gt; MakeKnownM b
</span><a href="#local-6989586621681038982"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM b
</span><a href="#local-6989586621681038982"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038983"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span id="local-6989586621681038981"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038981"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span id="local-6989586621681038980"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038980"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span id="local-6989586621681038979"><span class="annot"><span class="annottext">a -&gt; MakeKnownM b
</span><a href="#local-6989586621681038979"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; MakeKnownM b -&gt; MakeKnownM b
forall a. DList Text -&gt; MakeKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-var">withLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038981"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">(MakeKnownM b -&gt; MakeKnownM b) -&gt; MakeKnownM b -&gt; MakeKnownM b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM b
</span><a href="#local-6989586621681038979"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038980"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;&gt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621681038977"><span class="annot"><span class="annottext">&gt;&gt; :: forall a b. MakeKnownM a -&gt; MakeKnownM b -&gt; MakeKnownM b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&gt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MakeKnownM a -&gt; MakeKnownM b -&gt; MakeKnownM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">(*&gt;)</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-comment">-- Normally it's a good idea for an exported abstraction not to be a type synonym, since a @newtype@</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- is cheap, looks good in error messages and clearly emphasize an abstraction barrier. However we</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- make 'ReadKnownM' type synonyms for convenience: that way we don't need to derive all the</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- instances (and add new ones whenever we need them), wrap and unwrap all the time</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- (including in user code), which can be non-trivial for such performance-sensitive code (see e.g.</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- 'coerceVia' and 'coerceArg') and there is no abstraction barrier anyway.</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- | The monad that 'readKnown' runs in.</span><span>
</span><span id="line-257"></span><span class="hs-keyword">type</span><span> </span><span id="ReadKnownM"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-var">ReadKnownM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeError"><span class="hs-identifier hs-type">KnownTypeError</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-comment">-- | Lift a 'ReadKnownM' computation into 'MakeKnownM'.</span><span>
</span><span id="line-260"></span><span id="local-6989586621681039251"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#liftReadKnownM"><span class="hs-identifier hs-type">liftReadKnownM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-type">ReadKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039251"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039251"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-261"></span><span id="liftReadKnownM"><span class="annot"><span class="annottext">liftReadKnownM :: forall a. ReadKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#liftReadKnownM"><span class="hs-identifier hs-var hs-var">liftReadKnownM</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681038974"><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038974"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="#local-6989586621681038974"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-262"></span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#liftReadKnownM"><span class="hs-identifier hs-var">liftReadKnownM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681038973"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038973"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM a
forall a. a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-var">MakeKnownSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038973"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-263"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#liftReadKnownM"><span class="hs-pragma hs-type">liftReadKnownM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- See Note [Unlifting values of built-in types].</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | Convert a constant embedded into a PLC term to the corresponding Haskell value.</span><span>
</span><span id="line-267"></span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownConstant"><span class="hs-identifier hs-type">readKnownConstant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681039246"><span class="annot"><a href="#local-6989586621681039246"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621681039245"><span class="annot"><a href="#local-6989586621681039245"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinType"><span class="hs-identifier hs-type">KnownBuiltinType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039246"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039245"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039246"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-type">ReadKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039245"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-268"></span><span class="hs-comment">-- Note [Performance of ReadKnownIn and MakeKnownIn instances]</span><span>
</span><span id="line-269"></span><span id="readKnownConstant"><span class="annot"><span class="annottext">readKnownConstant :: forall val a. KnownBuiltinType val a =&gt; val -&gt; ReadKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnownConstant"><span class="hs-identifier hs-var hs-var">readKnownConstant</span></a></span></span><span> </span><span id="local-6989586621681038963"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038963"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">val -&gt; Either KnownTypeError (Some (ValueOf (UniOf val)))
forall term.
HasConstant term =&gt;
term -&gt; Either KnownTypeError (Some (ValueOf (UniOf term)))
</span><a href="PlutusCore.Builtin.HasConstant.html#asConstant"><span class="hs-identifier hs-var">asConstant</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038963"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">Either KnownTypeError (Some (ValueOf (UniOf val)))
-&gt; (Some (ValueOf (UniOf val)) -&gt; Either KnownTypeError a)
-&gt; Either KnownTypeError a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(Some (ValueOf (UniOf val)) -&gt; Either KnownTypeError a)
-&gt; Some (ValueOf (UniOf val)) -&gt; Either KnownTypeError a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">oneShot</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span id="local-6989586621681038956"><span class="annot"><span class="annottext">UniOf val (Esc a)
</span><a href="#local-6989586621681038956"><span class="hs-identifier hs-var">uniAct</span></a></span></span><span> </span><span id="local-6989586621681038955"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038955"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-271"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681038954"><span class="annot"><span class="annottext">uniExp :: UniOf val (Esc a)
</span><a href="#local-6989586621681038954"><span class="hs-identifier hs-var hs-var">uniExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k (uni :: * -&gt; *) (a :: k). Contains uni a =&gt; uni (Esc a)
</span><a href="Universe.Core.html#knownUni"><span class="hs-identifier hs-var">knownUni</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039246"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681039245"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-272"></span><span>        </span><span class="hs-comment">-- 'geq' matches on its first argument first, so we make the type tag that will be known</span><span>
</span><span id="line-273"></span><span>        </span><span class="hs-comment">-- statically (because this function will be inlined) go first in order for GHC to</span><span>
</span><span id="line-274"></span><span>        </span><span class="hs-comment">-- optimize some of the matching away.</span><span>
</span><span id="line-275"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a)
</span><a href="#local-6989586621681038954"><span class="hs-identifier hs-var">uniExp</span></a></span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a) -&gt; UniOf val (Esc a) -&gt; Maybe (Esc a :~: Esc a)
forall k (f :: k -&gt; *) (a :: k) (b :: k).
GEq f =&gt;
f a -&gt; f b -&gt; Maybe (a :~: b)
</span><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-operator hs-var">`geq`</span></a></span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a)
</span><a href="#local-6989586621681038956"><span class="hs-identifier hs-var">uniAct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-276"></span><span>            </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Esc a :~: Esc a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either KnownTypeError a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
a
</span><a href="#local-6989586621681038955"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-277"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Esc a :~: Esc a)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KnownTypeError -&gt; Either KnownTypeError a
forall a b. a -&gt; Either a b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(KnownTypeError -&gt; Either KnownTypeError a)
-&gt; (UnliftingError -&gt; KnownTypeError)
-&gt; UnliftingError
-&gt; Either KnownTypeError a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingError -&gt; KnownTypeError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeUnliftingError"><span class="hs-identifier hs-var">KnownTypeUnliftingError</span></a></span><span> </span><span class="annot"><span class="annottext">(UnliftingError -&gt; Either KnownTypeError a)
-&gt; UnliftingError -&gt; Either KnownTypeError a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a) -&gt; UniOf val (Esc a) -&gt; UnliftingError
forall (uni :: * -&gt; *) a b.
GShow uni =&gt;
uni (Esc a) -&gt; uni (Esc b) -&gt; UnliftingError
</span><a href="PlutusCore.Builtin.KnownType.html#typeMismatchError"><span class="hs-identifier hs-var">typeMismatchError</span></a></span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a)
</span><a href="#local-6989586621681038954"><span class="hs-identifier hs-var">uniExp</span></a></span><span> </span><span class="annot"><span class="annottext">UniOf val (Esc a)
</span><a href="#local-6989586621681038956"><span class="hs-identifier hs-var">uniAct</span></a></span><span>
</span><span id="line-278"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownConstant"><span class="hs-pragma hs-type">readKnownConstant</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">{- Note [Cause of failure]
'readKnown' and 'makeKnown' each take a @Maybe cause@ argument to report the cause of a potential
failure. @cause@ is different to @val@ to support evaluators that distinguish between terms and
values (@makeKnown@ normally constructs a value, but it's convenient to report the cause of a failure
as a term). Note that an evaluator might require the cause to be computed lazily for best
performance on the happy path and @Maybe@ ensures that even if we somehow force the argument,
the cause stored in it is not forced due to @Maybe@ being a lazy data type.
-}</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- See Note [Performance of ReadKnownIn and MakeKnownIn instances].</span><span>
</span><span id="line-290"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="#local-6989586621681039212"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039211"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MakeKnownIn"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-var">MakeKnownIn</span></a></span></span><span> </span><span id="local-6989586621681039212"><span class="annot"><a href="#local-6989586621681039212"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621681039211"><span class="annot"><a href="#local-6989586621681039211"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621681039210"><span class="annot"><a href="#local-6989586621681039210"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-comment">-- See Note [Cause of failure].</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">-- | Convert a Haskell value to the corresponding PLC val.</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-comment">-- The inverse of 'readKnown'.</span><span>
</span><span id="line-294"></span><span>    </span><span id="makeKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-type">makeKnown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681039210"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039211"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="makeKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-type">makeKnown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinType"><span class="hs-identifier hs-type">KnownBuiltinType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039211"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039210"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039210"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownM"><span class="hs-identifier hs-type">MakeKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039211"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-comment">-- Everything on evaluation path has to be strict in production, so in theory we don't need to</span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-comment">-- force anything here. In practice however all kinds of weird things happen in tests and @val@</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-comment">-- can be non-strict enough to cause trouble here, so we're forcing the argument. Looking at the</span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-comment">-- generated Core, the forcing amounts to pulling a @case@ out of the 'fromConstant' call,</span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-comment">-- which doesn't affect the overall cost and benchmarking results suggest the same.</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">-- Note that the value is only forced to WHNF, so care must be taken to ensure that every value</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">-- of a type from the universe gets forced to NF whenever it's forced to WHNF.</span><span>
</span><span id="line-304"></span><span>    </span><span id="local-6989586621681038942"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var hs-var">makeKnown</span></a></span><span> </span><span id="local-6989586621681038928"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038928"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">val -&gt; MakeKnownM val
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(val -&gt; MakeKnownM val) -&gt; (a -&gt; val) -&gt; a -&gt; MakeKnownM val
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Some (ValueOf uni) -&gt; val
forall term.
HasConstant term =&gt;
Some (ValueOf (UniOf term)) -&gt; term
</span><a href="PlutusCore.Builtin.HasConstant.html#fromConstant"><span class="hs-identifier hs-var">fromConstant</span></a></span><span> </span><span class="annot"><span class="annottext">(Some (ValueOf uni) -&gt; val)
-&gt; (a -&gt; Some (ValueOf uni)) -&gt; a -&gt; val
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; Some (ValueOf uni)
forall a (uni :: * -&gt; *). Includes uni a =&gt; a -&gt; Some (ValueOf uni)
</span><a href="Universe.Core.html#someValue"><span class="hs-identifier hs-var">someValue</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; MakeKnownM val) -&gt; a -&gt; MakeKnownM val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$!</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038928"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-pragma hs-type">makeKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-keyword">type</span><span> </span><span id="MakeKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnown"><span class="hs-identifier hs-var">MakeKnown</span></a></span></span><span> </span><span id="local-6989586621681038924"><span class="annot"><a href="#local-6989586621681038924"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038924"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681038924"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-comment">-- See Note [Performance of ReadKnownIn and MakeKnownIn instances].</span><span>
</span><span id="line-310"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><a href="#local-6989586621681039202"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039201"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="ReadKnownIn"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-var">ReadKnownIn</span></a></span></span><span> </span><span id="local-6989586621681039202"><span class="annot"><a href="#local-6989586621681039202"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621681039201"><span class="annot"><a href="#local-6989586621681039201"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span id="local-6989586621681039200"><span class="annot"><a href="#local-6989586621681039200"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-comment">-- See Note [Cause of failure].</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-comment">-- | Convert a PLC val to the corresponding Haskell value.</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-comment">-- The inverse of 'makeKnown'.</span><span>
</span><span id="line-314"></span><span>    </span><span id="readKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-type">readKnown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681039201"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-type">ReadKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039200"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-keyword">default</span><span> </span><span id="readKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-type">readKnown</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#KnownBuiltinType"><span class="hs-identifier hs-type">KnownBuiltinType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039201"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039200"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039201"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownM"><span class="hs-identifier hs-type">ReadKnownM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039200"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-comment">-- If 'inline' is not used, proper inlining does not happen for whatever reason.</span><span>
</span><span id="line-317"></span><span>    </span><span id="local-6989586621681038920"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-var hs-var">readKnown</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(val -&gt; ReadKnownM a) -&gt; val -&gt; ReadKnownM a
forall a. a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">inline</span></a></span><span> </span><span class="annot"><span class="annottext">val -&gt; ReadKnownM a
forall val a. KnownBuiltinType val a =&gt; val -&gt; ReadKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnownConstant"><span class="hs-identifier hs-var">readKnownConstant</span></a></span></span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-pragma hs-type">readKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="hs-keyword">type</span><span> </span><span id="ReadKnown"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier hs-var">ReadKnown</span></a></span></span><span> </span><span id="local-6989586621681038913"><span class="annot"><a href="#local-6989586621681038913"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-type">ReadKnownIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038913"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681038913"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-comment">-- | Same as 'makeKnown', but allows for neither emitting nor storing the cause of a failure.</span><span>
</span><span id="line-323"></span><span id="local-6989586621681039195"><span id="local-6989586621681039196"><span id="local-6989586621681039197"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnownOrFail"><span class="hs-identifier hs-type">makeKnownOrFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039197"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039196"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039195"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039195"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039196"><span class="hs-identifier hs-type">val</span></a></span></span></span></span><span>
</span><span id="line-324"></span><span id="makeKnownOrFail"><span class="annot"><span class="annottext">makeKnownOrFail :: forall (uni :: * -&gt; *) val a.
MakeKnownIn uni val a =&gt;
a -&gt; EvaluationResult val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnownOrFail"><span class="hs-identifier hs-var hs-var">makeKnownOrFail</span></a></span></span><span> </span><span id="local-6989586621681038910"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038910"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM val
forall (uni :: * -&gt; *) val a.
MakeKnownIn uni val a =&gt;
a -&gt; MakeKnownM val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038910"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-type">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvaluationResult val
forall a. EvaluationResult a
</span><a href="PlutusCore.Evaluation.Result.html#EvaluationFailure"><span class="hs-identifier hs-var">EvaluationFailure</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccess"><span class="hs-identifier hs-type">MakeKnownSuccess</span></a></span><span> </span><span id="local-6989586621681038908"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038908"><span class="hs-identifier hs-var">val</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">val -&gt; EvaluationResult val
forall a. a -&gt; EvaluationResult a
</span><a href="PlutusCore.Evaluation.Result.html#EvaluationSuccess"><span class="hs-identifier hs-var">EvaluationSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038908"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownSuccessWithLogs"><span class="hs-identifier hs-type">MakeKnownSuccessWithLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681038906"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038906"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">val -&gt; EvaluationResult val
forall a. a -&gt; EvaluationResult a
</span><a href="PlutusCore.Evaluation.Result.html#EvaluationSuccess"><span class="hs-identifier hs-var">EvaluationSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038906"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-328"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnownOrFail"><span class="hs-pragma hs-type">makeKnownOrFail</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- | Same as 'readKnown', but the cause of a potential failure is the provided term itself.</span><span>
</span><span id="line-331"></span><span id="local-6989586621681039186"><span id="local-6989586621681039188"><span id="local-6989586621681039189"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownSelf"><span class="hs-identifier hs-type">readKnownSelf</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnown"><span class="hs-identifier hs-type">ReadKnown</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039189"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039188"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-333"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#AsUnliftingError"><span class="hs-identifier hs-type">AsUnliftingError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039186"><span class="hs-identifier hs-type">err</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#AsEvaluationFailure"><span class="hs-identifier hs-type">AsEvaluationFailure</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039186"><span class="hs-identifier hs-type">err</span></a></span><span>
</span><span id="line-334"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039189"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Machine.Exception.html#ErrorWithCause"><span class="hs-identifier hs-type">ErrorWithCause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039186"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039189"><span class="hs-identifier hs-type">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681039188"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-336"></span><span id="readKnownSelf"><span class="annot"><span class="annottext">readKnownSelf :: forall val a err.
(ReadKnown val a, AsUnliftingError err, AsEvaluationFailure err) =&gt;
val -&gt; Either (ErrorWithCause err val) a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnownSelf"><span class="hs-identifier hs-var hs-var">readKnownSelf</span></a></span></span><span> </span><span id="local-6989586621681038896"><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038896"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(KnownTypeError -&gt; Either (ErrorWithCause err val) a)
-&gt; Either KnownTypeError a -&gt; Either (ErrorWithCause err val) a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Either a b -&gt; m b
</span><a href="Data.Either.Extras.html#fromRightM"><span class="hs-identifier hs-var">fromRightM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">val -&gt; KnownTypeError -&gt; Either (ErrorWithCause err val) a
forall err cause (m :: * -&gt; *) void.
(MonadError (ErrorWithCause err cause) m, AsUnliftingError err,
 AsEvaluationFailure err) =&gt;
cause -&gt; KnownTypeError -&gt; m void
</span><a href="PlutusCore.Builtin.KnownType.html#throwKnownTypeErrorWithCause"><span class="hs-identifier hs-var">throwKnownTypeErrorWithCause</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038896"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either KnownTypeError a -&gt; Either (ErrorWithCause err val) a)
-&gt; Either KnownTypeError a -&gt; Either (ErrorWithCause err val) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">val -&gt; Either KnownTypeError a
forall (uni :: * -&gt; *) val a.
ReadKnownIn uni val a =&gt;
val -&gt; ReadKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-identifier hs-var">readKnown</span></a></span><span> </span><span class="annot"><span class="annottext">val
</span><a href="#local-6989586621681038896"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-337"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnownSelf"><span class="hs-pragma hs-type">readKnownSelf</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039173"><span id="local-6989586621681039174"><span id="local-6989586621681039175"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039175"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039174"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039173"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039175"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039174"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039173"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-340"></span><span>    </span><span id="local-6989586621681038882"><span class="annot"><span class="annottext">makeKnown :: EvaluationResult a -&gt; MakeKnownM val
</span><a href="#local-6989586621681038882"><span class="hs-identifier hs-var hs-var hs-var hs-var">makeKnown</span></a></span></span><span> </span><span class="annot"><span class="annottext">EvaluationResult a
</span><a href="PlutusCore.Evaluation.Result.html#EvaluationFailure"><span class="hs-identifier hs-var">EvaluationFailure</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; KnownTypeError -&gt; MakeKnownM val
forall a. DList Text -&gt; KnownTypeError -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#MakeKnownFailure"><span class="hs-identifier hs-var">MakeKnownFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
forall a. Monoid a =&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">KnownTypeError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#KnownTypeEvaluationFailure"><span class="hs-identifier hs-var">KnownTypeEvaluationFailure</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationSuccess"><span class="hs-identifier hs-type">EvaluationSuccess</span></a></span><span> </span><span id="local-6989586621681038881"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038881"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM val
forall (uni :: * -&gt; *) val a.
MakeKnownIn uni val a =&gt;
a -&gt; MakeKnownM val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038881"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-pragma hs-type">makeKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span class="hs-comment">-- Catching 'EvaluationFailure' here would allow *not* to short-circuit when 'readKnown' fails</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- to read a Haskell value of type @a@. Instead, in the denotation of the builtin function</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- the programmer would be given an explicit 'EvaluationResult' value to handle, which means</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- that when this value is 'EvaluationFailure', a PLC 'Error' was caught.</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- I.e. it would essentially allow us to catch errors and handle them in a programmable way.</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- We forbid this, because it complicates code and isn't supported by evaluation engines anyway.</span><span>
</span><span id="line-350"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-351"></span><span>        </span><span id="local-6989586621681039167"><span id="local-6989586621681039168"><span id="local-6989586621681039169"><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&#8216;EvaluationResult&#8217; cannot appear in the type of an argument&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681039169"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039168"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-353"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-type">ReadKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039169"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039168"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Evaluation.Result.html#EvaluationResult"><span class="hs-identifier hs-type">EvaluationResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039167"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-354"></span><span>    </span><span id="local-6989586621681038864"><span class="annot"><span class="annottext">readKnown :: val -&gt; ReadKnownM (EvaluationResult a)
</span><a href="#local-6989586621681038864"><span class="hs-identifier hs-var hs-var hs-var hs-var">readKnown</span></a></span></span><span> </span><span class="annot"><span class="annottext">val
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AReview KnownTypeError UnliftingError
-&gt; UnliftingError -&gt; ReadKnownM (EvaluationResult a)
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/xjr6y52v3rf2ghja0vyixxk0jzp0dp53-lens-lib-lens-5.1.1-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview KnownTypeError UnliftingError
forall r. AsUnliftingError r =&gt; Prism' r UnliftingError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#_UnliftingError"><span class="hs-identifier hs-var">_UnliftingError</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingError
</span><span class="hs-string">&quot;Panic: 'TypeError' was bypassed&quot;</span></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039156"><span id="local-6989586621681039157"><span id="local-6989586621681039158"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039158"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039157"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039156"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039158"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039157"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Emitter.html#Emitter"><span class="hs-identifier hs-type">Emitter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039156"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621681038852"><span class="annot"><span class="annottext">makeKnown :: Emitter a -&gt; MakeKnownM val
</span><a href="#local-6989586621681038852"><span class="hs-identifier hs-var hs-var hs-var hs-var">makeKnown</span></a></span></span><span> </span><span id="local-6989586621681038851"><span class="annot"><span class="annottext">Emitter a
</span><a href="#local-6989586621681038851"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Emitter a -&gt; (a, DList Text)
forall a. Emitter a -&gt; (a, DList Text)
</span><a href="PlutusCore.Builtin.Emitter.html#runEmitter"><span class="hs-identifier hs-var">runEmitter</span></a></span><span> </span><span class="annot"><span class="annottext">Emitter a
</span><a href="#local-6989586621681038851"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681038849"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038849"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681038848"><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038848"><span class="hs-identifier hs-var">logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DList Text -&gt; MakeKnownM val -&gt; MakeKnownM val
forall a. DList Text -&gt; MakeKnownM a -&gt; MakeKnownM a
</span><a href="PlutusCore.Builtin.KnownType.html#withLogs"><span class="hs-identifier hs-var">withLogs</span></a></span><span> </span><span class="annot"><span class="annottext">DList Text
</span><a href="#local-6989586621681038848"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">(MakeKnownM val -&gt; MakeKnownM val)
-&gt; MakeKnownM val -&gt; MakeKnownM val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; MakeKnownM val
forall (uni :: * -&gt; *) val a.
MakeKnownIn uni val a =&gt;
a -&gt; MakeKnownM val
</span><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-identifier hs-var">makeKnown</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681038849"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-pragma hs-type">makeKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-362"></span><span>        </span><span id="local-6989586621681039149"><span id="local-6989586621681039150"><span id="local-6989586621681039151"><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&#8216;Emitter&#8217; cannot appear in the type of an argument&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681039151"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039150"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-type">ReadKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039151"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039150"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Emitter.html#Emitter"><span class="hs-identifier hs-type">Emitter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039149"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-365"></span><span>    </span><span id="local-6989586621681038833"><span class="annot"><span class="annottext">readKnown :: val -&gt; ReadKnownM (Emitter a)
</span><a href="#local-6989586621681038833"><span class="hs-identifier hs-var hs-var hs-var hs-var">readKnown</span></a></span></span><span> </span><span class="annot"><span class="annottext">val
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AReview KnownTypeError UnliftingError
-&gt; UnliftingError -&gt; ReadKnownM (Emitter a)
forall e (m :: * -&gt; *) t x.
MonadError e m =&gt;
AReview e t -&gt; t -&gt; m x
</span><a href="../file:///nix/store/xjr6y52v3rf2ghja0vyixxk0jzp0dp53-lens-lib-lens-5.1.1-haddock-doc/share/doc/lens/html/src"><span class="hs-identifier hs-var">throwing</span></a></span><span> </span><span class="annot"><span class="annottext">AReview KnownTypeError UnliftingError
forall r. AsUnliftingError r =&gt; Prism' r UnliftingError
</span><a href="PlutusCore.Evaluation.Machine.Exception.html#_UnliftingError"><span class="hs-identifier hs-var">_UnliftingError</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingError
</span><span class="hs-string">&quot;Panic: 'TypeError' was bypassed&quot;</span></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039142"><span id="local-6989586621681039143"><span id="local-6989586621681039144"><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html#HasConstantIn"><span class="hs-identifier hs-type">HasConstantIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039144"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039143"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039144"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039143"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier hs-type">SomeConstant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039144"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039142"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621681038818"><span class="annot"><span class="annottext">makeKnown :: SomeConstant uni rep -&gt; MakeKnownM val
</span><a href="#local-6989586621681038818"><span class="hs-identifier hs-var hs-var hs-var hs-var">makeKnown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Some (ValueOf uni) -&gt; MakeKnownM val)
-&gt; SomeConstant uni rep -&gt; MakeKnownM val
forall a b r. Coercible a b =&gt; (a -&gt; r) -&gt; b -&gt; r
</span><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-identifier hs-var">coerceArg</span></a></span><span> </span><span class="annot"><span class="annottext">((Some (ValueOf uni) -&gt; MakeKnownM val)
 -&gt; SomeConstant uni rep -&gt; MakeKnownM val)
-&gt; (Some (ValueOf uni) -&gt; MakeKnownM val)
-&gt; SomeConstant uni rep
-&gt; MakeKnownM val
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">val -&gt; MakeKnownM val
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(val -&gt; MakeKnownM val)
-&gt; (Some (ValueOf uni) -&gt; val)
-&gt; Some (ValueOf uni)
-&gt; MakeKnownM val
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Some (ValueOf uni) -&gt; val
forall term.
HasConstant term =&gt;
Some (ValueOf (UniOf term)) -&gt; term
</span><a href="PlutusCore.Builtin.HasConstant.html#fromConstant"><span class="hs-identifier hs-var">fromConstant</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-pragma hs-type">makeKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039133"><span id="local-6989586621681039134"><span id="local-6989586621681039135"><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html#HasConstantIn"><span class="hs-identifier hs-type">HasConstantIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039134"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-type">ReadKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039134"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier hs-type">SomeConstant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039135"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039133"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>    </span><span id="local-6989586621681038801"><span class="annot"><span class="annottext">readKnown :: val -&gt; ReadKnownM (SomeConstant uni rep)
</span><a href="#local-6989586621681038801"><span class="hs-identifier hs-var hs-var hs-var hs-var">readKnown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((val -&gt; Either KnownTypeError (Some (ValueOf uni)))
 -&gt; val -&gt; ReadKnownM (SomeConstant uni rep))
-&gt; (val -&gt; Either KnownTypeError (Some (ValueOf uni)))
-&gt; val
-&gt; ReadKnownM (SomeConstant uni rep)
forall a b. Coercible a b =&gt; (a -&gt; b) -&gt; a -&gt; b
</span><a href="PlutusCore.Builtin.KnownType.html#coerceVia"><span class="hs-identifier hs-var">coerceVia</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Some (ValueOf uni) -&gt; SomeConstant uni rep)
-&gt; Either KnownTypeError (Some (ValueOf uni))
-&gt; ReadKnownM (SomeConstant uni rep)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">Some (ValueOf uni) -&gt; SomeConstant uni rep
forall (uni :: * -&gt; *) rep.
Some (ValueOf uni) -&gt; SomeConstant uni rep
</span><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier hs-var">SomeConstant</span></a></span><span> </span><span class="annot"><span class="annottext">(Either KnownTypeError (Some (ValueOf uni))
 -&gt; ReadKnownM (SomeConstant uni rep))
-&gt; (val -&gt; Either KnownTypeError (Some (ValueOf uni)))
-&gt; val
-&gt; ReadKnownM (SomeConstant uni rep)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">val -&gt; Either KnownTypeError (Some (ValueOf uni))
forall term.
HasConstant term =&gt;
term -&gt; Either KnownTypeError (Some (ValueOf (UniOf term)))
</span><a href="PlutusCore.Builtin.HasConstant.html#asConstant"><span class="hs-identifier hs-var">asConstant</span></a></span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-pragma hs-type">readKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039121"><span id="local-6989586621681039122"><span id="local-6989586621681039123"><span class="annot"><a href="#local-6989586621681039123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039122"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#MakeKnownIn"><span class="hs-identifier hs-type">MakeKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039123"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039122"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039122"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039121"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621681038788"><span class="annot"><span class="annottext">makeKnown :: Opaque val rep -&gt; MakeKnownM val
</span><a href="#local-6989586621681038788"><span class="hs-identifier hs-var hs-var hs-var hs-var">makeKnown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(val -&gt; MakeKnownM val) -&gt; Opaque val rep -&gt; MakeKnownM val
forall a b r. Coercible a b =&gt; (a -&gt; r) -&gt; b -&gt; r
</span><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-identifier hs-var">coerceArg</span></a></span><span> </span><span class="annot"><span class="annottext">val -&gt; MakeKnownM val
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>  </span><span class="hs-comment">-- A faster @pure . Opaque@.</span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#makeKnown"><span class="hs-pragma hs-type">makeKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681039115"><span id="local-6989586621681039116"><span id="local-6989586621681039117"><span class="annot"><a href="#local-6989586621681039117"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039116"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#ReadKnownIn"><span class="hs-identifier hs-type">ReadKnownIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039117"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039116"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039116"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039115"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621681038777"><span class="annot"><span class="annottext">readKnown :: val -&gt; ReadKnownM (Opaque val rep)
</span><a href="#local-6989586621681038777"><span class="hs-identifier hs-var hs-var hs-var hs-var">readKnown</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Opaque val rep -&gt; ReadKnownM (Opaque val rep))
-&gt; val -&gt; ReadKnownM (Opaque val rep)
forall a b r. Coercible a b =&gt; (a -&gt; r) -&gt; b -&gt; r
</span><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-identifier hs-var">coerceArg</span></a></span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; ReadKnownM (Opaque val rep)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>  </span><span class="hs-comment">-- A faster @pure . Opaque@.</span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#readKnown"><span class="hs-pragma hs-type">readKnown</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-comment">-- Utils</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- | Coerce the second argument to the result type of the first one. The motivation for this</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- function is that it's often more annoying to explicitly specify a target type for 'coerce' than</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- to construct an explicit coercion function, so this combinator can be used in cases like that.</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- Plus the code reads better, as it becomes clear what and where gets wrapped/unwrapped.</span><span>
</span><span id="line-389"></span><span id="local-6989586621681039130"><span id="local-6989586621681039131"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#coerceVia"><span class="hs-identifier hs-type">coerceVia</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Coercible</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039130"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681039131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039130"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039131"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039130"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-390"></span><span id="coerceVia"><span class="annot"><span class="annottext">coerceVia :: forall a b. Coercible a b =&gt; (a -&gt; b) -&gt; a -&gt; b
</span><a href="PlutusCore.Builtin.KnownType.html#coerceVia"><span class="hs-identifier hs-var hs-var">coerceVia</span></a></span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">coerce</span></a></span><span>
</span><span id="line-391"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#coerceVia"><span class="hs-pragma hs-type">coerceVia</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- | Same as @\f -&gt; f . coerce@, but does not create any closures and so is completely free.</span><span>
</span><span id="line-394"></span><span id="local-6989586621681039139"><span id="local-6989586621681039140"><span id="local-6989586621681039141"><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-identifier hs-type">coerceArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Coercible</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039141"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681039140"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681039141"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039139"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039140"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681039139"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span>
</span><span id="line-395"></span><span id="coerceArg"><span class="annot"><span class="annottext">coerceArg :: forall a b r. Coercible a b =&gt; (a -&gt; r) -&gt; b -&gt; r
</span><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-identifier hs-var hs-var">coerceArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; r) -&gt; b -&gt; r
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">coerce</span></a></span><span>
</span><span id="line-396"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.KnownType.html#coerceArg"><span class="hs-pragma hs-type">coerceArg</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-397"></span></pre></body></html>