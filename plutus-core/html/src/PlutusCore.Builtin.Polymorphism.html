<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures        #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds             #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Builtin.Polymorphism</span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier">Opaque</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier">SomeConstant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier">TyNameRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyVarRep"><span class="hs-identifier">TyVarRep</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyAppRep"><span class="hs-identifier">TyAppRep</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyForallRep"><span class="hs-identifier">TyForallRep</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.HasConstant.html"><span class="hs-identifier">PlutusCore.Builtin.HasConstant</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.Ix</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Universe.html"><span class="hs-identifier">Universe</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-comment">{- Note [Motivation for polymorphic built-in functions]
We need to support polymorphism for built-in functions for these reasons:

1. @ifThenElse@ for 'Bool' (being a built-in type rather than a Scott-encoded one) has to be
   polymorphic as its type signature is

       ifThenElse : all a. Bool -&gt; a -&gt; a -&gt; a

   Previously we had 'Bool' as a Scott-encoded type, but this required plenty of supporting machinery,
   because unlifting (aka Scott-decoding) a PLC 'Bool' into a Haskell 'Bool' is quite a non-trivial
   thing, see https://github.com/input-output-hk/plutus/blob/e222466e6d46bbca9f76243bb496b3c88ed02ca1/language-plutus-core/src/PlutusCore.Builtin/Typed.hs#L165-L252

   Now that we got rid of all this complexity we have to pay for that by supporting polymorphic
   built-in functions (but we added that support long ago anyway, 'cause it was easy to do).

2. we may want to add efficient polymorphic built-in types like @IntMap@ or @Vector@ and most functions
   defined over them are polymorphic as well
-}</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- See Note [Motivation for polymorphic built-in functions].</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- See Note [Implementation of polymorphic built-in functions].</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- See Note [Pattern matching on built-in types].</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- | The denotation of a term whose PLC type is encoded in @rep@ (for example a type variable or</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- an application of a type variable). I.e. the denotation of such a term is the term itself.</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- This is because we have parametricity in Haskell, so we can't inspect a value whose</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- type is, say, a bound variable, so we never need to convert such a term from Plutus Core to</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- Haskell and back and instead can keep it intact.</span><span>
</span><span id="line-54"></span><span class="hs-keyword">newtype</span><span> </span><span id="Opaque"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-var">Opaque</span></a></span></span><span> </span><span id="local-6989586621681038184"><span class="annot"><a href="#local-6989586621681038184"><span class="hs-identifier hs-type">val</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038183"><span class="annot"><a href="#local-6989586621681038183"><span class="hs-identifier hs-type">rep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Opaque"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-var">Opaque</span></a></span></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unOpaque"><span class="annot"><span class="annottext">forall val rep. Opaque val rep -&gt; val
</span><a href="PlutusCore.Builtin.Polymorphism.html#unOpaque"><span class="hs-identifier hs-var hs-var">unOpaque</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681038184"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038036"><span id="local-6989586621681038041"><span class="annot"><span class="annottext">Some (ValueOf (UniOf (Opaque val rep))) -&gt; Opaque val rep
Opaque val rep
-&gt; Either KnownTypeError (Some (ValueOf (UniOf (Opaque val rep))))
(Opaque val rep
 -&gt; Either KnownTypeError (Some (ValueOf (UniOf (Opaque val rep)))))
-&gt; (Some (ValueOf (UniOf (Opaque val rep))) -&gt; Opaque val rep)
-&gt; HasConstant (Opaque val rep)
forall term.
(term -&gt; Either KnownTypeError (Some (ValueOf (UniOf term))))
-&gt; (Some (ValueOf (UniOf term)) -&gt; term) -&gt; HasConstant term
forall val rep.
HasConstant val =&gt;
Some (ValueOf (UniOf (Opaque val rep))) -&gt; Opaque val rep
forall val rep.
HasConstant val =&gt;
Opaque val rep
-&gt; Either KnownTypeError (Some (ValueOf (UniOf (Opaque val rep))))
fromConstant :: Some (ValueOf (UniOf (Opaque val rep))) -&gt; Opaque val rep
$cfromConstant :: forall val rep.
HasConstant val =&gt;
Some (ValueOf (UniOf (Opaque val rep))) -&gt; Opaque val rep
asConstant :: Opaque val rep
-&gt; Either KnownTypeError (Some (ValueOf (UniOf (Opaque val rep))))
$casConstant :: forall val rep.
HasConstant val =&gt;
Opaque val rep
-&gt; Either KnownTypeError (Some (ValueOf (UniOf (Opaque val rep))))
</span><a href="PlutusCore.Builtin.HasConstant.html#C%3AHasConstant"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">HasConstant</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- Try not to add instances for this data type, so that we can throw more 'NoConstraintsErrMsg'</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- kind of type errors.</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="UniOf"><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-var">UniOf</span></a></span></span><span> </span><span id="local-6989586621681038029"><span id="local-6989586621681038030"><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038030"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038029"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#UniOf"><span class="hs-identifier hs-type">UniOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038030"><span class="hs-identifier hs-type">val</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- | For unlifting from the 'Constant' constructor when the stored value is of a monomorphic</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- built-in type</span><span>
</span><span id="line-64"></span><span class="hs-comment">--</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- The @rep@ parameter specifies how the type looks on the PLC side (i.e. just like with</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- @Opaque val rep@).</span><span>
</span><span id="line-67"></span><span class="hs-keyword">newtype</span><span> </span><span id="SomeConstant"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier hs-var">SomeConstant</span></a></span></span><span> </span><span id="local-6989586621681038172"><span class="annot"><a href="#local-6989586621681038172"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038171"><span class="annot"><a href="#local-6989586621681038171"><span class="hs-identifier hs-type">rep</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SomeConstant"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#SomeConstant"><span class="hs-identifier hs-var">SomeConstant</span></a></span></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unSomeConstant"><span class="annot"><span class="annottext">forall (uni :: * -&gt; *) rep.
SomeConstant uni rep -&gt; Some (ValueOf uni)
</span><a href="PlutusCore.Builtin.Polymorphism.html#unSomeConstant"><span class="hs-identifier hs-var hs-var">unSomeConstant</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/12m626qdhg61qnq44614xjh4avrzhzw4-some-lib-some-1.0.3-haddock-doc/share/doc/some/html/src"><span class="hs-identifier hs-type">Some</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Universe.Core.html#ValueOf"><span class="hs-identifier hs-type">ValueOf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038172"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">{- Note [Implementation of polymorphic built-in functions]
Encoding polymorphism in an AST in an intrinsically-typed manner is not a pleasant thing to do in Haskell.
It's not impossible, see &quot;Embedding F&quot;, Sam Lindley: http://homepages.inf.ed.ac.uk/slindley/papers/embedding-f.pdf
But we'd rather avoid such heavy techniques.

Fortunately, there is a simple trick: we have parametricity in Haskell, so a function that is
polymorphic in its argument can't inspect that argument in any way and so we never actually need to
convert such an argument from PLC to Haskell just to convert it back later without ever inspecting
the value. Instead we can keep the argument intact and apply the Haskell function directly to
the PLC AST representing some value.

E.g. Having a built-in function with the following signature:
(TODO: we can't have that, figure out a way to make this example actually work while being as
clear as it currently is)

    reverse : all a. [a] -&gt; [a]

that maps to Haskell's

    reverse :: forall a. [a] -&gt; [a]

evaluation of

    PLC.reverse {bool} (cons true (cons false nil))

proceeds as follows:

      PLC.reverse {bool} (cons true (cons false nil))
    ~ makeKnown (Haskell.reverse (readKnown (cons true (cons false nil))))
    ~ makeKnown (Haskell.reverse [Opaque true, Opaque false])
    ~ makeKnown [Opaque false, Opaque true]
    ~ EvaluationSuccess (cons false (cons true nil))

Note how we use the 'Opaque' wrapper in order to unlift a PLC term as an opaque Haskell value
using 'readKnown' and then lift the term back using 'makeKnown' without ever inspecting the term.

An opaque PLC @term@ whose type is a PLC type variable `a_0` has the following type on the Haskell
side:

    Opaque val (TyVarRep ('TyNameRep &quot;a&quot; 0))

where that last argument is a direct counterpart of the term-level

    TyVar () (TyName (Name &quot;a&quot; 0))

@Opaque val rep@ can be used for passing any @term@ through the builtin application machinery,
not just one whose type is a bound variable. For example, you can define a new data type

    data NatRep

provide a 'KnownTypeAst' instance for it (mapping a @Proxy NatRep@ to the actual type of natural
numbers in PLC) and define a (rather pointless) builtin like @idNat : nat -&gt; nat@.

It's also possible to bind a type variable of a higher-kind, say, @f :: * -&gt; *@ and make a builtin
with the following signature:

    idFInteger : all (f :: * -&gt; *). f integer -&gt; f integer

where the type application is handled with 'TyAppRep'. Note that the latter is defined as a
@data family@:

    data family TyAppRep (fun :: dom -&gt; cod) (arg :: dom) :: cod

We do that because a @data family@ can return a poly-kinded argument, which allows us to get an
intrinsically-kinded representation of PLC types. For example, an opaque @term@ whose type is an
application of a type variable @f@ to a type variable @a@ is represented like this:

    Opaque val (TyAppRep (TyVarRep ('TyNameRep &quot;f&quot; 0)) (TyVarRep ('TyNameRep &quot;a&quot; 1 :: TyNameRep *)))

Note the @TyNameRep *@ kind annotation. It tells us three things:

1. a type-level name has a kind associated with it. The reason for that is that we use names in
binders (for example, in the universal quantifier) and as variables and kinds are important in
both these cases due to us having an intrinsically-kinded representation of types, so it's
convenient to annotate type-level names with kinds. Another reason is that we do not attempt to do
any kind of static analysis on reflected type variables and associating kinds with them allows us
to catch errors like &quot;two variables with equal names and uniques, but different kinds&quot; earlier
2. the kind is not stored as an argument to the @TyNameRep@ constructor. Instead it's stored as
an index of the data type. The point of this is that if we stored the kind as an argument, we'd
have to provide it manually, but since the representation is intrinsically-kinded there's no point
in doing so as GHC can infer all the kinds itself
3. ... apart from cases where they're inherently ambiguous, like in the case above. If we don't
specify the kind of the @a_1@ type variable, then there's no way GHC could infer it as the variable
is passed as an argument to another variable with an unspecified kind (@f_0@)
4. finally, an opaque term can only be of a type of kind @*@. You can't construct a term whose type
is of some other kind. That's why we don't need to annotate the @f_0@ type variable: the domain is
inferred from the kind of the argument (where it's explicitly specified via @TyNameRep *@) and the
codomain is inferred from the fact that the whole type is passed to 'Opaque' and so it has to be
of kind @*@

It would be nice if we didn't need to define that @*Rep@ stuff at the type level just to demote it
to the term level via a type class, but this hasn't been investigated yet. A plausible way would be
to ditch 'KnownTypeAst' (but keep 'KnownType') and provide PLC types manually. But that doesn't seem
to give rise to a terribly nice API. And we'd lose all the static guarantees, which is not a big
deal, but losing the automatic inference of type schemes would suck, given that it's quite handy.

Representing contructors as poly-kinded data families and handling those with open type families
and/or type classes is a way of solving the expression problem for indexed data types at the type
level, if you are into these things.
-}</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Representation of a type variable: its name and unique and an implicit kind.</span><span>
</span><span id="line-173"></span><span class="hs-keyword">data</span><span> </span><span id="TyNameRep"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-var">TyNameRep</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038026"><span class="annot"><a href="#local-6989586621681038026"><span class="hs-identifier hs-type">kind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TyNameRep"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-var">TyNameRep</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Symbol</span></a></span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | Representation of an intrinsically-kinded type variable: a name.</span><span>
</span><span id="line-176"></span><span class="hs-keyword">data</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="TyVarRep"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyVarRep"><span class="hs-identifier hs-var">TyVarRep</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038023"><span class="annot"><a href="#local-6989586621681038023"><span class="hs-identifier hs-type">name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-type">TyNameRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038022"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">kind</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- | Representation of an intrinsically-kinded type application: a function and an argument.</span><span>
</span><span id="line-179"></span><span class="hs-keyword">data</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="TyAppRep"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyAppRep"><span class="hs-identifier hs-var">TyAppRep</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038021"><span class="annot"><a href="#local-6989586621681038021"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681038020"><span class="hs-identifier hs-type">dom</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681038019"><span class="hs-identifier hs-type">cod</span></a></span><span class="hs-special">)</span><span id="local-6989586621681038019"><span id="local-6989586621681038020"><span> </span><span class="hs-special">(</span><span id="local-6989586621681038018"><span class="annot"><a href="#local-6989586621681038018"><span class="hs-identifier hs-type">arg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681038020"><span class="hs-identifier hs-type">dom</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681038019"><span class="hs-identifier hs-type">cod</span></a></span></span></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | Representation of of an intrinsically-kinded universal quantifier: a bound name and a body.</span><span>
</span><span id="line-182"></span><span class="hs-keyword">data</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="TyForallRep"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyForallRep"><span class="hs-identifier hs-var">TyForallRep</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681038017"><span class="annot"><a href="#local-6989586621681038017"><span class="hs-identifier hs-type">name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyNameRep"><span class="hs-identifier hs-type">TyNameRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038016"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">GHC.Type</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">GHC.Type</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- Custom type errors to guide the programmer adding a new built-in function.</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- We cover a lot of cases here, but some are missing, for example we do not attempt to detect</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- higher-kinded type variables, which means that if your function returns an @m a@ we can neither</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- instantiate @m@ (which is impossible anyway: it could be 'EvaluationResult' or 'Emitter'</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- or else), nor report that higher-kinded type variables are not allowed and suggest</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- to instantiate such variables manually. In general, we do not attempt to look inside type</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- applications (as it's a rather hard thing to do) and so a type variable inside, say, a list</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- does not get instantiated, hence the custom type error does not get triggered (as it's only</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- triggered for instantiated type variables) and the user gets a standard unhelpful GHC error.</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- We don't have @Unsatisfiable@ yet (https://github.com/ghc-proposals/ghc-proposals/pull/433).</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- | To be used when there's a 'TypeError' in the context. The condition is not checked as there's</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- no way we could do that.</span><span>
</span><span id="line-197"></span><span id="local-6989586621681038167"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-type">underTypeError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681038167"><span class="hs-identifier hs-type">void</span></a></span></span><span>
</span><span id="line-198"></span><span id="underTypeError"><span class="annot"><span class="annottext">underTypeError :: forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var hs-var">underTypeError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; void
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Panic: a 'TypeError' was bypassed&quot;</span></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-keyword">type</span><span> </span><span id="NoStandalonePolymorphicDataErrMsg"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoStandalonePolymorphicDataErrMsg"><span class="hs-identifier hs-var">NoStandalonePolymorphicDataErrMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;An unwrapped built-in type constructor can't be applied to a type variable&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Are you trying to define a polymorphic built-in function over a polymorphic type?&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;In that case you need to wrap all polymorphic built-in types applied to type&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  variables with either &#8216;SomeConstant&#8217; or &#8216;Opaque&#8217; depending on whether its the&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;  type of an argument or the type of the result, respectively&quot;</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681038151"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoStandalonePolymorphicDataErrMsg"><span class="hs-identifier hs-type">NoStandalonePolymorphicDataErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681038151"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="Universe.Core.html#Contains"><span class="hs-operator hs-type">`Contains`</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#TyVarRep"><span class="hs-identifier hs-type">TyVarRep</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621681038007"><span class="annot"><span class="annottext">knownUni :: uni (Esc TyVarRep)
</span><a href="Universe.Core.html#knownUni"><span class="hs-identifier hs-var hs-var hs-var hs-var">knownUni</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">uni (Esc TyVarRep)
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-keyword">type</span><span> </span><span id="NoConstraintsErrMsg"><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-var">NoConstraintsErrMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Built-in functions are not allowed to have constraints&quot;</span></span><span> </span><span class="hs-special">'</span><span class="hs-operator">:$$:</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">'</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;To fix this error instantiate all constrained type variables&quot;</span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681038003"><span id="local-6989586621681038148"><span id="local-6989586621681038149"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038149"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038148"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621681038001"><span class="annot"><span class="annottext">== :: Opaque val rep -&gt; Opaque val rep -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(==)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep -&gt; Bool
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037985"><span id="local-6989586621681037987"><span id="local-6989586621681037989"><span id="local-6989586621681037991"><span id="local-6989586621681037993"><span id="local-6989586621681037995"><span id="local-6989586621681038145"><span id="local-6989586621681038146"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038146"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038145"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>    </span><span id="local-6989586621681037983"><span class="annot"><span class="annottext">compare :: Opaque val rep -&gt; Opaque val rep -&gt; Ordering
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep -&gt; Ordering
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037979"><span id="local-6989586621681038142"><span id="local-6989586621681038143"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Num</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038143"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038142"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621681037972"><span class="annot"><span class="annottext">+ :: Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(+)</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621681037970"><span class="annot"><span class="annottext">* :: Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(*)</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621681037968"><span class="annot"><span class="annottext">abs :: Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">abs</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621681037966"><span class="annot"><span class="annottext">signum :: Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">signum</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621681037964"><span class="annot"><span class="annottext">fromInteger :: Integer -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromInteger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621681037963"><span class="annot"><span class="annottext">negate :: Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">negate</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037949"><span id="local-6989586621681037951"><span id="local-6989586621681037953"><span id="local-6989586621681037955"><span id="local-6989586621681037959"><span id="local-6989586621681037961"><span id="local-6989586621681038139"><span id="local-6989586621681038140"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Enum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038140"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038139"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621681037947"><span class="annot"><span class="annottext">toEnum :: Int -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEnum</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621681037945"><span class="annot"><span class="annottext">fromEnum :: Opaque val rep -&gt; Int
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromEnum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Int
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681038134"><span id="local-6989586621681038135"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Real</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038135"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038134"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-233"></span><span>    </span><span id="local-6989586621681037933"><span class="annot"><span class="annottext">toRational :: Opaque val rep -&gt; Rational
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toRational</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Rational
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037919"><span id="local-6989586621681037921"><span id="local-6989586621681037923"><span id="local-6989586621681037925"><span id="local-6989586621681038131"><span id="local-6989586621681038132"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038132"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038131"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621681037914"><span class="annot"><span class="annottext">quotRem :: Opaque val rep
-&gt; Opaque val rep -&gt; (Opaque val rep, Opaque val rep)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">quotRem</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep
-&gt; Opaque val rep -&gt; (Opaque val rep, Opaque val rep)
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621681037912"><span class="annot"><span class="annottext">divMod :: Opaque val rep
-&gt; Opaque val rep -&gt; (Opaque val rep, Opaque val rep)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">divMod</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep
-&gt; Opaque val rep -&gt; (Opaque val rep, Opaque val rep)
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621681037910"><span class="annot"><span class="annottext">toInteger :: Opaque val rep -&gt; Integer
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toInteger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Integer
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681038126"><span id="local-6989586621681038127"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Bounded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038127"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038126"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621681037904"><span class="annot"><span class="annottext">minBound :: Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">minBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span id="local-6989586621681037902"><span class="annot"><span class="annottext">maxBound :: Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">maxBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037889"><span id="local-6989586621681037891"><span id="local-6989586621681037894"><span id="local-6989586621681038123"><span id="local-6989586621681038124"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038124"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038123"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>    </span><span id="local-6989586621681037887"><span class="annot"><span class="annottext">range :: (Opaque val rep, Opaque val rep) -&gt; [Opaque val rep]
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">range</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Opaque val rep, Opaque val rep) -&gt; [Opaque val rep]
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span id="local-6989586621681037885"><span class="annot"><span class="annottext">index :: (Opaque val rep, Opaque val rep) -&gt; Opaque val rep -&gt; Int
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">index</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Opaque val rep, Opaque val rep) -&gt; Opaque val rep -&gt; Int
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621681037883"><span class="annot"><span class="annottext">inRange :: (Opaque val rep, Opaque val rep) -&gt; Opaque val rep -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">inRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Opaque val rep, Opaque val rep) -&gt; Opaque val rep -&gt; Bool
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037877"><span id="local-6989586621681037879"><span id="local-6989586621681038119"><span id="local-6989586621681038120"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038120"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038119"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>    </span><span id="local-6989586621681037875"><span class="annot"><span class="annottext">&lt;&gt; :: Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep -&gt; Opaque val rep -&gt; Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681037867"><span id="local-6989586621681037869"><span id="local-6989586621681038116"><span id="local-6989586621681038117"><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">TypeError</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#NoConstraintsErrMsg"><span class="hs-identifier hs-type">NoConstraintsErrMsg</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Builtin.Polymorphism.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038117"><span class="hs-identifier hs-type">val</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681038116"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621681037865"><span class="annot"><span class="annottext">mempty :: Opaque val rep
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Opaque val rep
forall void. void
</span><a href="PlutusCore.Builtin.Polymorphism.html#underTypeError"><span class="hs-identifier hs-var">underTypeError</span></a></span><span>
</span><span id="line-254"></span></pre></body></html>