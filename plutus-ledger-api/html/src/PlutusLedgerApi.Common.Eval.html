<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass    #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications  #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">-- GHC is asked to do quite a lot of optimization in the module that calls `inline`,</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- so we're increasing the amount of ticks for the simplifier not to run out of them.</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# OPTIONS_GHC -fsimpl-tick-factor=200 #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusLedgerApi.Common.Eval</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ScriptPlutus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">Version</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">defaultVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Data</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Evaluation.Machine.CostModelInterface</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Evaluation.Machine.ExBudget</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Evaluation.Machine.ExBudgetingDefaults</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Evaluation.Machine.MachineParameters</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Plutus</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.MkPlc</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusCore.Pretty</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.SerialisedScript.html"><span class="hs-identifier">PlutusLedgerApi.Common.SerialisedScript</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html"><span class="hs-identifier">PlutusLedgerApi.Common.Versions</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">PlutusPrelude</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">UntypedPlutusCore</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier">UntypedPlutusCore.Evaluation.Machine.Cek</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/gpj4yzaqrrq0053fxw0b58722khm09hc-cborg-lib-cborg-0.2.7.0-haddock-doc/share/doc/cborg/html/src"><span class="hs-identifier">Codec.CBOR.Read</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Except</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Writer</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier">fromStrict</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier">Data.ByteString.Short</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">Data.Tuple</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">inline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">-- | Errors that can be thrown when evaluating a Plutus script.</span><span>
</span><span id="line-38"></span><span class="hs-keyword">data</span><span> </span><span id="EvaluationError"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationError"><span class="hs-identifier hs-var">EvaluationError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-39"></span><span>    </span><span id="CekError"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#CekError"><span class="hs-identifier hs-var">CekError</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.CekEvaluationException</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultFun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ An error from the evaluator itself</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DeBruijnError"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DeBruijnError"><span class="hs-identifier hs-var">DeBruijnError</span></a></span></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">FreeVariableError</span></a></span><span> </span><span class="hs-comment">-- ^ An error in the pre-evaluation step of converting from de-Bruijn indices</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="CodecError"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#CodecError"><span class="hs-identifier hs-var">CodecError</span></a></span></span><span> </span><span class="annot"><a href="../file:///nix/store/gpj4yzaqrrq0053fxw0b58722khm09hc-cborg-lib-cborg-0.2.7.0-haddock-doc/share/doc/cborg/html/src"><span class="hs-identifier hs-type">CBOR.DeserialiseFailure</span></a></span><span> </span><span class="hs-comment">-- ^ A serialisation error</span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="IncompatibleVersionError"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#IncompatibleVersionError"><span class="hs-identifier hs-var">IncompatibleVersionError</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ScriptPlutus.Version</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ An error indicating a version tag that we don't support</span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-comment">-- TODO: make this error more informative when we have more information about what went wrong</span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="CostModelParameterMismatch"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#CostModelParameterMismatch"><span class="hs-identifier hs-var">CostModelParameterMismatch</span></a></span></span><span> </span><span class="hs-comment">-- ^ An error indicating that the cost model parameters didn't match what we expected</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679902931"><span id="local-6989586621679902933"><span id="local-6989586621679902951"><span class="annot"><span class="annottext">Int -&gt; EvaluationError -&gt; ShowS
[EvaluationError] -&gt; ShowS
EvaluationError -&gt; String
(Int -&gt; EvaluationError -&gt; ShowS)
-&gt; (EvaluationError -&gt; String)
-&gt; ([EvaluationError] -&gt; ShowS)
-&gt; Show EvaluationError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EvaluationError] -&gt; ShowS
$cshowList :: [EvaluationError] -&gt; ShowS
show :: EvaluationError -&gt; String
$cshow :: EvaluationError -&gt; String
showsPrec :: Int -&gt; EvaluationError -&gt; ShowS
$cshowsPrec :: Int -&gt; EvaluationError -&gt; ShowS
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679902829"><span id="local-6989586621679902842"><span class="annot"><span class="annottext">EvaluationError -&gt; EvaluationError -&gt; Bool
(EvaluationError -&gt; EvaluationError -&gt; Bool)
-&gt; (EvaluationError -&gt; EvaluationError -&gt; Bool)
-&gt; Eq EvaluationError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EvaluationError -&gt; EvaluationError -&gt; Bool
$c/= :: EvaluationError -&gt; EvaluationError -&gt; Bool
== :: EvaluationError -&gt; EvaluationError -&gt; Bool
$c== :: EvaluationError -&gt; EvaluationError -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679902790"><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationError"><span class="hs-identifier hs-type">EvaluationError</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>    </span><span id="local-6989586621679902725"><span class="annot"><span class="annottext">pretty :: forall ann. EvaluationError -&gt; Doc ann
</span><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pretty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#CekError"><span class="hs-identifier hs-type">CekError</span></a></span><span> </span><span id="local-6989586621679902723"><span class="annot"><span class="annottext">CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
</span><a href="#local-6989586621679902723"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
-&gt; Doc ann
forall a ann. PrettyClassic a =&gt; a -&gt; Doc ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">prettyClassicDef</span></a></span><span> </span><span class="annot"><span class="annottext">CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
</span><a href="#local-6989586621679902723"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DeBruijnError"><span class="hs-identifier hs-type">DeBruijnError</span></a></span><span> </span><span id="local-6989586621679902721"><span class="annot"><span class="annottext">FreeVariableError
</span><a href="#local-6989586621679902721"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVariableError -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVariableError
</span><a href="#local-6989586621679902721"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#CodecError"><span class="hs-identifier hs-type">CodecError</span></a></span><span> </span><span id="local-6989586621679902720"><span class="annot"><span class="annottext">DeserialiseFailure
</span><a href="#local-6989586621679902720"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure -&gt; Doc ann
forall a ann. Show a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">viaShow</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure
</span><a href="#local-6989586621679902720"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#IncompatibleVersionError"><span class="hs-identifier hs-type">IncompatibleVersionError</span></a></span><span> </span><span id="local-6989586621679902718"><span class="annot"><span class="annottext">Version ()
</span><a href="#local-6989586621679902718"><span class="hs-identifier hs-var">actual</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;This version of the Plutus Core interface does not support the version indicated by the AST:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc ann -&gt; Doc ann -&gt; Doc ann
forall ann. Doc ann -&gt; Doc ann -&gt; Doc ann
</span><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Version () -&gt; Doc ann
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">Version ()
</span><a href="#local-6989586621679902718"><span class="hs-identifier hs-var">actual</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="../file:///nix/store/64girl7r49bbwyy35zwcrzir95gkbp92-prettyprinter-lib-prettyprinter-1.7.1-haddock-doc/share/doc/prettyprinter/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#CostModelParameterMismatch"><span class="hs-identifier hs-var">CostModelParameterMismatch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ann
</span><span class="hs-string">&quot;Cost model parameters were not as we expected&quot;</span></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | The type of log output: just a list of 'Text'.</span><span>
</span><span id="line-55"></span><span class="hs-keyword">type</span><span> </span><span id="LogOutput"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#LogOutput"><span class="hs-identifier hs-var">LogOutput</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-type">Text.Text</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | A simple toggle indicating whether or not we should produce logs.</span><span>
</span><span id="line-58"></span><span class="hs-keyword">data</span><span> </span><span id="VerboseMode"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#VerboseMode"><span class="hs-identifier hs-var">VerboseMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Verbose"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#Verbose"><span class="hs-identifier hs-var">Verbose</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Quiet"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#Quiet"><span class="hs-identifier hs-var">Quiet</span></a></span></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679902711"><span id="local-6989586621679902713"><span class="annot"><span class="annottext">VerboseMode -&gt; VerboseMode -&gt; Bool
(VerboseMode -&gt; VerboseMode -&gt; Bool)
-&gt; (VerboseMode -&gt; VerboseMode -&gt; Bool) -&gt; Eq VerboseMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: VerboseMode -&gt; VerboseMode -&gt; Bool
$c/= :: VerboseMode -&gt; VerboseMode -&gt; Bool
== :: VerboseMode -&gt; VerboseMode -&gt; Bool
$c== :: VerboseMode -&gt; VerboseMode -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-comment">-- | Shared helper for the evaluation functions, deserialises the 'SerialisedScript' , applies it to its arguments, puts fakenamedebruijns, and scope-checks it.</span><span>
</span><span id="line-62"></span><span id="local-6989586621679903164"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#mkTermToEvaluate"><span class="hs-identifier hs-type">mkTermToEvaluate</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationError"><span class="hs-identifier hs-type">EvaluationError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679903164"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#LedgerPlutusVersion"><span class="hs-identifier hs-type">LedgerPlutusVersion</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-type">ProtocolVersion</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.SerialisedScript.html#SerialisedScript"><span class="hs-identifier hs-type">SerialisedScript</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.Data</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679903164"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Term</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultFun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-69"></span><span id="mkTermToEvaluate"><span class="annot"><span class="annottext">mkTermToEvaluate :: forall (m :: * -&gt; *).
MonadError EvaluationError m =&gt;
LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; SerialisedScript
-&gt; [Data]
-&gt; m (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="PlutusLedgerApi.Common.Eval.html#mkTermToEvaluate"><span class="hs-identifier hs-var hs-var">mkTermToEvaluate</span></a></span></span><span> </span><span id="local-6989586621679902685"><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902685"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span id="local-6989586621679902684"><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902684"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span id="local-6989586621679902683"><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902683"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621679902682"><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902682"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-comment">-- It decodes the program through the optimized ScriptForExecution. See `ScriptForExecution`.</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.SerialisedScript.html#ScriptForExecution"><span class="hs-identifier hs-type">ScriptForExecution</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.Program</span></a></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679902679"><span class="annot"><span class="annottext">Version ()
</span><a href="#local-6989586621679902679"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679902678"><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902678"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either EvaluationError (ByteString, ScriptForExecution)
-&gt; m (ByteString, ScriptForExecution)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError (ByteString, ScriptForExecution)
 -&gt; m (ByteString, ScriptForExecution))
-&gt; Either EvaluationError (ByteString, ScriptForExecution)
-&gt; m (ByteString, ScriptForExecution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(DeserialiseFailure -&gt; EvaluationError)
-&gt; Either DeserialiseFailure (ByteString, ScriptForExecution)
-&gt; Either EvaluationError (ByteString, ScriptForExecution)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">DeserialiseFailure -&gt; EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#CodecError"><span class="hs-identifier hs-var">CodecError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either DeserialiseFailure (ByteString, ScriptForExecution)
 -&gt; Either EvaluationError (ByteString, ScriptForExecution))
-&gt; Either DeserialiseFailure (ByteString, ScriptForExecution)
-&gt; Either EvaluationError (ByteString, ScriptForExecution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall s. Decoder s ScriptForExecution)
-&gt; ByteString
-&gt; Either DeserialiseFailure (ByteString, ScriptForExecution)
forall a.
(forall s. Decoder s a)
-&gt; ByteString -&gt; Either DeserialiseFailure (ByteString, a)
</span><a href="../file:///nix/store/gpj4yzaqrrq0053fxw0b58722khm09hc-cborg-lib-cborg-0.2.7.0-haddock-doc/share/doc/cborg/html/src"><span class="hs-identifier hs-var">CBOR.deserialiseFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerPlutusVersion
-&gt; ProtocolVersion -&gt; Decoder s ScriptForExecution
forall s.
LedgerPlutusVersion
-&gt; ProtocolVersion -&gt; Decoder s ScriptForExecution
</span><a href="PlutusLedgerApi.Common.SerialisedScript.html#scriptCBORDecoder"><span class="hs-identifier hs-var">scriptCBORDecoder</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902685"><span class="hs-identifier hs-var">lv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902684"><span class="hs-identifier hs-var">pv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ByteString
 -&gt; Either DeserialiseFailure (ByteString, ScriptForExecution))
-&gt; ByteString
-&gt; Either DeserialiseFailure (ByteString, ScriptForExecution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-var">fromStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedScript -&gt; ByteString
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/bytestring-0.11.3.1/src"><span class="hs-identifier hs-var">fromShort</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902683"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version ()
</span><a href="#local-6989586621679902679"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Version () -&gt; Version () -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; Version ()
forall ann. ann -&gt; Version ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">ScriptPlutus.defaultVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EvaluationError -&gt; m ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">throwError</span></a></span><span> </span><span class="annot"><span class="annottext">(EvaluationError -&gt; m ()) -&gt; EvaluationError -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Version () -&gt; EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#IncompatibleVersionError"><span class="hs-identifier hs-var">IncompatibleVersionError</span></a></span><span> </span><span class="annot"><span class="annottext">Version ()
</span><a href="#local-6989586621679902679"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679902662"><span class="annot"><span class="annottext">termArgs :: [Term NamedDeBruijn DefaultUni DefaultFun ()]
</span><a href="#local-6989586621679902662"><span class="hs-identifier hs-var hs-var">termArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Data -&gt; Term NamedDeBruijn DefaultUni DefaultFun ())
-&gt; [Data] -&gt; [Term NamedDeBruijn DefaultUni DefaultFun ()]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Data -&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
forall a (uni :: * -&gt; *) fun (term :: * -&gt; *) tyname name ann.
(TermLike term tyname name uni fun, Includes uni a) =&gt;
ann -&gt; a -&gt; term ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.mkConstant</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902682"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-74"></span><span>        </span><span id="local-6989586621679902659"><span class="annot"><span class="annottext">appliedT :: Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902659"><span class="hs-identifier hs-var hs-var">appliedT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; [Term NamedDeBruijn DefaultUni DefaultFun ()]
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
forall (term :: * -&gt; *) tyname name (uni :: * -&gt; *) fun ann.
TermLike term tyname name uni fun =&gt;
ann -&gt; term ann -&gt; [term ann] -&gt; term ann
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.mkIterApp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902678"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[Term NamedDeBruijn DefaultUni DefaultFun ()]
</span><a href="#local-6989586621679902662"><span class="hs-identifier hs-var">termArgs</span></a></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-comment">-- make sure that term is closed, i.e. well-scoped</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><span class="annottext">(Term NamedDeBruijn DefaultUni DefaultFun () -&gt; m ())
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; m (Term NamedDeBruijn DefaultUni DefaultFun ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; f b) -&gt; a -&gt; f a
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">through</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either EvaluationError () -&gt; m ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError () -&gt; m ())
-&gt; (Term NamedDeBruijn DefaultUni DefaultFun ()
    -&gt; Either EvaluationError ())
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeVariableError -&gt; EvaluationError)
-&gt; Either FreeVariableError () -&gt; Either EvaluationError ()
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVariableError -&gt; EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#DeBruijnError"><span class="hs-identifier hs-var">DeBruijnError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either FreeVariableError () -&gt; Either EvaluationError ())
-&gt; (Term NamedDeBruijn DefaultUni DefaultFun ()
    -&gt; Either FreeVariableError ())
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; Either EvaluationError ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; Either FreeVariableError ()
forall e (m :: * -&gt; *) name (uni :: * -&gt; *) fun a.
(HasIndex name, MonadError e m, AsFreeVariableError e) =&gt;
Term name uni fun a -&gt; m ()
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.checkScope</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902659"><span class="hs-identifier hs-var">appliedT</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- | Which unlifting mode should we use in the given 'ProtocolVersion'</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- so as to correctly construct the machine's parameters</span><span>
</span><span id="line-81"></span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#unliftingModeIn"><span class="hs-identifier hs-type">unliftingModeIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-type">ProtocolVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UnliftingMode</span></a></span><span>
</span><span id="line-82"></span><span id="unliftingModeIn"><span class="annot"><span class="annottext">unliftingModeIn :: ProtocolVersion -&gt; UnliftingMode
</span><a href="PlutusLedgerApi.Common.Eval.html#unliftingModeIn"><span class="hs-identifier hs-var hs-var">unliftingModeIn</span></a></span></span><span> </span><span id="local-6989586621679902653"><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902653"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">-- This just changes once in version 7.0</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902653"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion -&gt; ProtocolVersion -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; ProtocolVersion
</span><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-var">ProtocolVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingDeferred</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingImmediate</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">type</span><span> </span><span id="DefaultMachineParameters"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DefaultMachineParameters"><span class="hs-identifier hs-var">DefaultMachineParameters</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">MachineParameters</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">CekMachineCosts</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.CekValue</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultUni</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">DefaultFun</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#toMachineParameters"><span class="hs-identifier hs-type">toMachineParameters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-type">ProtocolVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-type">EvaluationContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DefaultMachineParameters"><span class="hs-identifier hs-type">DefaultMachineParameters</span></a></span><span>
</span><span id="line-89"></span><span id="toMachineParameters"><span class="annot"><span class="annottext">toMachineParameters :: ProtocolVersion -&gt; EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#toMachineParameters"><span class="hs-identifier hs-var hs-var">toMachineParameters</span></a></span></span><span> </span><span id="local-6989586621679902648"><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902648"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ProtocolVersion -&gt; UnliftingMode
</span><a href="PlutusLedgerApi.Common.Eval.html#unliftingModeIn"><span class="hs-identifier hs-var">unliftingModeIn</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902648"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingImmediate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#machineParametersImmediate"><span class="hs-identifier hs-var">machineParametersImmediate</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingDeferred</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#machineParametersDeferred"><span class="hs-identifier hs-var">machineParametersDeferred</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">{- Note [Inlining meanings of builtins]
It's vitally important to inline the 'toBuiltinMeaning' method of a set of built-in functions as
that allows GHC to look under lambdas and completely optimize multiple abstractions away.

There are two ways of doing that: by relying on 'INLINE' pragmas all the way up from the
'ToBuiltinMeaning' instance for the default set of builtins or by ensuring that 'toBuiltinsRuntime'
is compiled efficient by turning it into a one-method class (see
https://github.com/input-output-hk/plutus/pull/4419 for how that looks like). We chose the former,
because it's simpler. Although it's also less reliable: machine parameters are computed in
multiple places and we need to make sure that benchmarking, cost model calculations and the actual
production path have builtins compiled in the same way, 'cause otherwise performance analysis and
cost predictions can be wrong by a big margin without us knowing. Because of this danger in addition
to putting @INLINE@ pragmas on every relevant definition, we also stick a call to 'inline' at the
call site. We also do not attempt to only compile things efficiently where we need that and instead
inline the meanings of builtins everywhere. Just to be sure.

Note that a combination of @INLINABLE@ + 'inline' does not result in proper inlining for whatever
reason. It has to be @INLINE@ (and we add 'inline' on top of that for some additional reliability
as we did have cases where sticking 'inline' on something that already had @INLINE@ would fix
inlining).
-}</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span id="local-6989586621679903094"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#mkMachineParametersFor"><span class="hs-identifier hs-type">mkMachineParametersFor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">CostModelApplyError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679903094"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>                       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UnliftingMode</span></a></span><span>
</span><span id="line-117"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.CostModelParams</span></a></span><span>
</span><span id="line-118"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679903094"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DefaultMachineParameters"><span class="hs-identifier hs-type">DefaultMachineParameters</span></a></span></span><span>
</span><span id="line-119"></span><span id="mkMachineParametersFor"><span class="annot"><span class="annottext">mkMachineParametersFor :: forall (m :: * -&gt; *).
MonadError CostModelApplyError m =&gt;
UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#mkMachineParametersFor"><span class="hs-identifier hs-var hs-var">mkMachineParametersFor</span></a></span></span><span> </span><span id="local-6989586621679902614"><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621679902614"><span class="hs-identifier hs-var">unlMode</span></a></span></span><span> </span><span id="local-6989586621679902613"><span class="annot"><span class="annottext">CostModelParams
</span><a href="#local-6989586621679902613"><span class="hs-identifier hs-var">newCMP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="annottext">(UnliftingMode
 -&gt; CostModel CekMachineCosts BuiltinCostModel
 -&gt; DefaultMachineParameters)
-&gt; UnliftingMode
-&gt; CostModel CekMachineCosts BuiltinCostModel
-&gt; DefaultMachineParameters
forall a. a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">inline</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
-&gt; CostModel CekMachineCosts BuiltinCostModel
-&gt; DefaultMachineParameters
forall (uni :: * -&gt; *) fun builtincosts (val :: (* -&gt; *) -&gt; * -&gt; *)
       machinecosts.
(CostingPart uni fun ~ builtincosts,
 HasMeaningIn uni (val uni fun), ToBuiltinMeaning uni fun) =&gt;
UnliftingMode
-&gt; CostModel machinecosts builtincosts
-&gt; MachineParameters machinecosts val uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Plutus.mkMachineParameters</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="#local-6989586621679902614"><span class="hs-identifier hs-var">unlMode</span></a></span><span> </span><span class="annot"><span class="annottext">(CostModel CekMachineCosts BuiltinCostModel
 -&gt; DefaultMachineParameters)
-&gt; m (CostModel CekMachineCosts BuiltinCostModel)
-&gt; m DefaultMachineParameters
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><span class="annottext">CostModel CekMachineCosts BuiltinCostModel
-&gt; CostModelParams
-&gt; m (CostModel CekMachineCosts BuiltinCostModel)
forall evaluatorcosts builtincosts (m :: * -&gt; *).
(FromJSON evaluatorcosts, FromJSON builtincosts,
 ToJSON evaluatorcosts, ToJSON builtincosts,
 MonadError CostModelApplyError m) =&gt;
CostModel evaluatorcosts builtincosts
-&gt; CostModelParams -&gt; m (CostModel evaluatorcosts builtincosts)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Plutus.applyCostModelParams</span></a></span><span> </span><span class="annot"><span class="annottext">CostModel CekMachineCosts BuiltinCostModel
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Plutus.defaultCekCostModel</span></a></span><span> </span><span class="annot"><span class="annottext">CostModelParams
</span><a href="#local-6989586621679902613"><span class="hs-identifier hs-var">newCMP</span></a></span><span>
</span><span id="line-122"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#mkMachineParametersFor"><span class="hs-pragma hs-type">mkMachineParametersFor</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="hs-comment">{-| An opaque type that contains all the static parameters that the evaluator needs to evaluate a
script.  This is so that they can be computed once and cached, rather than recomputed on every
evaluation.

There are two sets of parameters: one is with immediate unlifting and the other one is with
deferred unlifting. We have to keep both of them, because depending on the language version
 either one has to be used or the other. We also compile them separately due to all the inlining
 and optimization that need to happen for things to be efficient.
-}</span><span>
</span><span id="line-134"></span><span id="local-6989586621679902607"><span id="local-6989586621679902608"></span></span><span class="hs-keyword">data</span><span> </span><span id="EvaluationContext"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-var">EvaluationContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EvaluationContext"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-var">EvaluationContext</span></a></span></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="machineParametersImmediate"><span class="annot"><span class="annottext">EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#machineParametersImmediate"><span class="hs-identifier hs-var hs-var">machineParametersImmediate</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DefaultMachineParameters"><span class="hs-identifier hs-type">DefaultMachineParameters</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="machineParametersDeferred"><span class="annot"><span class="annottext">EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#machineParametersDeferred"><span class="hs-identifier hs-var hs-var">machineParametersDeferred</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#DefaultMachineParameters"><span class="hs-identifier hs-type">DefaultMachineParameters</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="annot"><span class="annottext">(forall x. EvaluationContext -&gt; Rep EvaluationContext x)
-&gt; (forall x. Rep EvaluationContext x -&gt; EvaluationContext)
-&gt; Generic EvaluationContext
forall x. Rep EvaluationContext x -&gt; EvaluationContext
forall x. EvaluationContext -&gt; Rep EvaluationContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep EvaluationContext x -&gt; EvaluationContext
$cfrom :: forall x. EvaluationContext -&gt; Rep EvaluationContext x
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span id="local-6989586621679902601"><span class="annot"><span class="annottext">EvaluationContext -&gt; ()
(EvaluationContext -&gt; ()) -&gt; NFData EvaluationContext
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: EvaluationContext -&gt; ()
$crnf :: EvaluationContext -&gt; ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">{-|  Build the 'EvaluationContext'.

The input is a `Map` of `Text`s to cost integer values (aka `Plutus.CostModelParams`, `Alonzo.CostModel`)
See Note [Inlining meanings of builtins].
-}</span><span>
</span><span id="line-146"></span><span id="local-6989586621679903062"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#mkDynEvaluationContext"><span class="hs-identifier hs-type">mkDynEvaluationContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">CostModelApplyError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679903062"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.CostModelParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679903062"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-type">EvaluationContext</span></a></span></span><span>
</span><span id="line-147"></span><span id="mkDynEvaluationContext"><span class="annot"><span class="annottext">mkDynEvaluationContext :: forall (m :: * -&gt; *).
MonadError CostModelApplyError m =&gt;
CostModelParams -&gt; m EvaluationContext
</span><a href="PlutusLedgerApi.Common.Eval.html#mkDynEvaluationContext"><span class="hs-identifier hs-var hs-var">mkDynEvaluationContext</span></a></span></span><span> </span><span id="local-6989586621679902590"><span class="annot"><span class="annottext">CostModelParams
</span><a href="#local-6989586621679902590"><span class="hs-identifier hs-var">newCMP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">DefaultMachineParameters
-&gt; DefaultMachineParameters -&gt; EvaluationContext
</span><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-var">EvaluationContext</span></a></span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><span class="annottext">(DefaultMachineParameters
 -&gt; DefaultMachineParameters -&gt; EvaluationContext)
-&gt; m DefaultMachineParameters
-&gt; m (DefaultMachineParameters -&gt; EvaluationContext)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters)
-&gt; UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
forall a. a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">inline</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
forall (m :: * -&gt; *).
MonadError CostModelApplyError m =&gt;
UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#mkMachineParametersFor"><span class="hs-identifier hs-var">mkMachineParametersFor</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingImmediate</span></a></span><span> </span><span class="annot"><span class="annottext">CostModelParams
</span><a href="#local-6989586621679902590"><span class="hs-identifier hs-var">newCMP</span></a></span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">m (DefaultMachineParameters -&gt; EvaluationContext)
-&gt; m DefaultMachineParameters -&gt; m EvaluationContext
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters)
-&gt; UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
forall a. a -&gt; a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">inline</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
forall (m :: * -&gt; *).
MonadError CostModelApplyError m =&gt;
UnliftingMode -&gt; CostModelParams -&gt; m DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#mkMachineParametersFor"><span class="hs-identifier hs-var">mkMachineParametersFor</span></a></span><span> </span><span class="annot"><span class="annottext">UnliftingMode
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UnliftingDeferred</span></a></span><span> </span><span class="annot"><span class="annottext">CostModelParams
</span><a href="#local-6989586621679902590"><span class="hs-identifier hs-var">newCMP</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Comparably expensive to `mkEvaluationContext`, so it should only be used sparingly.</span><span>
</span><span id="line-153"></span><span id="local-6989586621679903058"><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#assertWellFormedCostModelParams"><span class="hs-identifier hs-type">assertWellFormedCostModelParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadError</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">CostModelApplyError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679903058"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.CostModelParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679903058"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-154"></span><span id="assertWellFormedCostModelParams"><span class="annot"><span class="annottext">assertWellFormedCostModelParams :: forall (m :: * -&gt; *).
MonadError CostModelApplyError m =&gt;
CostModelParams -&gt; m ()
</span><a href="PlutusLedgerApi.Common.Eval.html#assertWellFormedCostModelParams"><span class="hs-identifier hs-var hs-var">assertWellFormedCostModelParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (CostModel CekMachineCosts BuiltinCostModel) -&gt; m ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(m (CostModel CekMachineCosts BuiltinCostModel) -&gt; m ())
-&gt; (CostModelParams
    -&gt; m (CostModel CekMachineCosts BuiltinCostModel))
-&gt; CostModelParams
-&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CostModel CekMachineCosts BuiltinCostModel
-&gt; CostModelParams
-&gt; m (CostModel CekMachineCosts BuiltinCostModel)
forall evaluatorcosts builtincosts (m :: * -&gt; *).
(FromJSON evaluatorcosts, FromJSON builtincosts,
 ToJSON evaluatorcosts, ToJSON builtincosts,
 MonadError CostModelApplyError m) =&gt;
CostModel evaluatorcosts builtincosts
-&gt; CostModelParams -&gt; m (CostModel evaluatorcosts builtincosts)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Plutus.applyCostModelParams</span></a></span><span> </span><span class="annot"><span class="annottext">CostModel CekMachineCosts BuiltinCostModel
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">Plutus.defaultCekCostModel</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">{-|
Evaluates a script, with a cost model and a budget that restricts how many
resources it can use according to the cost model. Also returns the budget that
was actually used.

Can be used to calculate budgets for scripts, but even in this case you must give
a limit to guard against scripts that run for a long time or loop.

Note: Parameterized over the ledger-plutus-version since the builtins allowed (during decoding) differs.
-}</span><span>
</span><span id="line-166"></span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#evaluateScriptRestricting"><span class="hs-identifier hs-type">evaluateScriptRestricting</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#LedgerPlutusVersion"><span class="hs-identifier hs-type">LedgerPlutusVersion</span></a></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-type">ProtocolVersion</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#VerboseMode"><span class="hs-identifier hs-type">VerboseMode</span></a></span><span>     </span><span class="hs-comment">-- ^ Whether to produce log output</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-type">EvaluationContext</span></a></span><span> </span><span class="hs-comment">-- ^ The cost model that should already be synced to the most recent cost-model-params coming from the current protocol</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ExBudget</span></a></span><span>        </span><span class="hs-comment">-- ^ The resource budget which must not be exceeded during evaluation</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.SerialisedScript.html#SerialisedScript"><span class="hs-identifier hs-type">SerialisedScript</span></a></span><span>          </span><span class="hs-comment">-- ^ The script to evaluate</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.Data</span></a></span><span class="hs-special">]</span><span>          </span><span class="hs-comment">-- ^ The arguments to the script</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#LogOutput"><span class="hs-identifier hs-type">LogOutput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationError"><span class="hs-identifier hs-type">EvaluationError</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ExBudget</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span id="evaluateScriptRestricting"><span class="annot"><span class="annottext">evaluateScriptRestricting :: LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; VerboseMode
-&gt; EvaluationContext
-&gt; ExBudget
-&gt; SerialisedScript
-&gt; [Data]
-&gt; (LogOutput, Either EvaluationError ExBudget)
</span><a href="PlutusLedgerApi.Common.Eval.html#evaluateScriptRestricting"><span class="hs-identifier hs-var hs-var">evaluateScriptRestricting</span></a></span></span><span> </span><span id="local-6989586621679902576"><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902576"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span id="local-6989586621679902575"><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902575"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span id="local-6989586621679902574"><span class="annot"><span class="annottext">VerboseMode
</span><a href="#local-6989586621679902574"><span class="hs-identifier hs-var">verbose</span></a></span></span><span> </span><span id="local-6989586621679902573"><span class="annot"><span class="annottext">EvaluationContext
</span><a href="#local-6989586621679902573"><span class="hs-identifier hs-var">ectx</span></a></span></span><span> </span><span id="local-6989586621679902572"><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902572"><span class="hs-identifier hs-var">budget</span></a></span></span><span> </span><span id="local-6989586621679902571"><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902571"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679902570"><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902570"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError ExBudget, LogOutput)
-&gt; (LogOutput, Either EvaluationError ExBudget)
forall a b. (a, b) -&gt; (b, a)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">swap</span></a></span><span> </span><span class="annot"><span class="annottext">((Either EvaluationError ExBudget, LogOutput)
 -&gt; (LogOutput, Either EvaluationError ExBudget))
-&gt; (Either EvaluationError ExBudget, LogOutput)
-&gt; (LogOutput, Either EvaluationError ExBudget)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall w a. Writer w a -&gt; (a, w)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runWriter</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#LogOutput"><span class="hs-identifier hs-type">LogOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(Writer LogOutput (Either EvaluationError ExBudget)
 -&gt; (Either EvaluationError ExBudget, LogOutput))
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
-&gt; (Either EvaluationError ExBudget, LogOutput)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
 -&gt; Writer LogOutput (Either EvaluationError ExBudget))
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621679902566"><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902566"><span class="hs-identifier hs-var">appliedTerm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; SerialisedScript
-&gt; [Data]
-&gt; ExceptT
     EvaluationError
     (WriterT LogOutput Identity)
     (Term NamedDeBruijn DefaultUni DefaultFun ())
forall (m :: * -&gt; *).
MonadError EvaluationError m =&gt;
LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; SerialisedScript
-&gt; [Data]
-&gt; m (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="PlutusLedgerApi.Common.Eval.html#mkTermToEvaluate"><span class="hs-identifier hs-var">mkTermToEvaluate</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902576"><span class="hs-identifier hs-var">lv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902575"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902571"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902570"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679902493"><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="#local-6989586621679902493"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.RestrictingSt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ExRestrictingBudget</span></a></span><span> </span><span id="local-6989586621679902490"><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902490"><span class="hs-identifier hs-var">final</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679902489"><span class="annot"><span class="annottext">LogOutput
</span><a href="#local-6989586621679902489"><span class="hs-identifier hs-var">logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>            </span><span class="annot"><span class="annottext">DefaultMachineParameters
-&gt; ExBudgetMode RestrictingSt DefaultUni DefaultFun
-&gt; EmitterMode DefaultUni DefaultFun
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; (Either
      (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
      (Term NamedDeBruijn DefaultUni DefaultFun ()),
    RestrictingSt, LogOutput)
forall (uni :: * -&gt; *) fun cost.
(Everywhere uni ExMemoryUsage, Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term NamedDeBruijn uni fun ()
-&gt; (Either
      (CekEvaluationException NamedDeBruijn uni fun)
      (Term NamedDeBruijn uni fun ()),
    cost, LogOutput)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.runCekDeBruijn</span></a></span><span>
</span><span id="line-180"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolVersion -&gt; EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#toMachineParameters"><span class="hs-identifier hs-var">toMachineParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902575"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">EvaluationContext
</span><a href="#local-6989586621679902573"><span class="hs-identifier hs-var">ectx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExRestrictingBudget
-&gt; ExBudgetMode RestrictingSt DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun.
PrettyUni uni fun =&gt;
ExRestrictingBudget -&gt; ExBudgetMode RestrictingSt uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.restricting</span></a></span><span> </span><span class="annot"><span class="annottext">(ExRestrictingBudget
 -&gt; ExBudgetMode RestrictingSt DefaultUni DefaultFun)
-&gt; ExRestrictingBudget
-&gt; ExBudgetMode RestrictingSt DefaultUni DefaultFun
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudget -&gt; ExRestrictingBudget
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">ExRestrictingBudget</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902572"><span class="hs-identifier hs-var">budget</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>                </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">VerboseMode
</span><a href="#local-6989586621679902574"><span class="hs-identifier hs-var">verbose</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseMode -&gt; VerboseMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseMode
</span><a href="PlutusLedgerApi.Common.Eval.html#Verbose"><span class="hs-identifier hs-var">Verbose</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EmitterMode DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun. EmitterMode uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.logEmitter</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EmitterMode DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun. EmitterMode uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.noEmitter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>                </span><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902566"><span class="hs-identifier hs-var">appliedTerm</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">LogOutput
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">LogOutput
</span><a href="#local-6989586621679902489"><span class="hs-identifier hs-var">logs</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">Either EvaluationError ()
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError ()
 -&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ())
-&gt; Either EvaluationError ()
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
 -&gt; EvaluationError)
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
-&gt; Either EvaluationError ()
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
-&gt; EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#CekError"><span class="hs-identifier hs-var">CekError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
 -&gt; Either EvaluationError ())
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
-&gt; Either EvaluationError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="#local-6989586621679902493"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><span class="annottext">ExBudget
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902572"><span class="hs-identifier hs-var">budget</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudget -&gt; ExBudget -&gt; ExBudget
</span><a href="../../../../plutus-core/html/src"><span class="hs-operator hs-var">`minusExBudget`</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902490"><span class="hs-identifier hs-var">final</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="hs-comment">{-|
Evaluates a script, returning the minimum budget that the script would need
to evaluate successfully. This will take as long as the script takes, if you need to
limit the execution time of the script also, you can use 'evaluateScriptRestricting', which
also returns the used budget.

Note: Parameterized over the ledger-plutus-version since the builtins allowed (during decoding) differs.
-}</span><span>
</span><span id="line-197"></span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#evaluateScriptCounting"><span class="hs-identifier hs-type">evaluateScriptCounting</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#LedgerPlutusVersion"><span class="hs-identifier hs-type">LedgerPlutusVersion</span></a></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Versions.html#ProtocolVersion"><span class="hs-identifier hs-type">ProtocolVersion</span></a></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#VerboseMode"><span class="hs-identifier hs-type">VerboseMode</span></a></span><span>     </span><span class="hs-comment">-- ^ Whether to produce log output</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationContext"><span class="hs-identifier hs-type">EvaluationContext</span></a></span><span> </span><span class="hs-comment">-- ^ The cost model that should already be synced to the most recent cost-model-params coming from the current protocol</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.SerialisedScript.html#SerialisedScript"><span class="hs-identifier hs-type">SerialisedScript</span></a></span><span>          </span><span class="hs-comment">-- ^ The script to evaluate</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">Plutus.Data</span></a></span><span class="hs-special">]</span><span>          </span><span class="hs-comment">-- ^ The arguments to the script</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#LogOutput"><span class="hs-identifier hs-type">LogOutput</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#EvaluationError"><span class="hs-identifier hs-type">EvaluationError</span></a></span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">ExBudget</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span id="evaluateScriptCounting"><span class="annot"><span class="annottext">evaluateScriptCounting :: LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; VerboseMode
-&gt; EvaluationContext
-&gt; SerialisedScript
-&gt; [Data]
-&gt; (LogOutput, Either EvaluationError ExBudget)
</span><a href="PlutusLedgerApi.Common.Eval.html#evaluateScriptCounting"><span class="hs-identifier hs-var hs-var">evaluateScriptCounting</span></a></span></span><span> </span><span id="local-6989586621679902481"><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902481"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span id="local-6989586621679902480"><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902480"><span class="hs-identifier hs-var">pv</span></a></span></span><span> </span><span id="local-6989586621679902479"><span class="annot"><span class="annottext">VerboseMode
</span><a href="#local-6989586621679902479"><span class="hs-identifier hs-var">verbose</span></a></span></span><span> </span><span id="local-6989586621679902478"><span class="annot"><span class="annottext">EvaluationContext
</span><a href="#local-6989586621679902478"><span class="hs-identifier hs-var">ectx</span></a></span></span><span> </span><span id="local-6989586621679902477"><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902477"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679902476"><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902476"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError ExBudget, LogOutput)
-&gt; (LogOutput, Either EvaluationError ExBudget)
forall a b. (a, b) -&gt; (b, a)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">swap</span></a></span><span> </span><span class="annot"><span class="annottext">((Either EvaluationError ExBudget, LogOutput)
 -&gt; (LogOutput, Either EvaluationError ExBudget))
-&gt; (Either EvaluationError ExBudget, LogOutput)
-&gt; (LogOutput, Either EvaluationError ExBudget)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall w a. Writer w a -&gt; (a, w)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runWriter</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="PlutusLedgerApi.Common.Eval.html#LogOutput"><span class="hs-identifier hs-type">LogOutput</span></a></span><span> </span><span class="annot"><span class="annottext">(Writer LogOutput (Either EvaluationError ExBudget)
 -&gt; (Either EvaluationError ExBudget, LogOutput))
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
-&gt; (Either EvaluationError ExBudget, LogOutput)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
 -&gt; Writer LogOutput (Either EvaluationError ExBudget))
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
-&gt; Writer LogOutput (Either EvaluationError ExBudget)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679902475"><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902475"><span class="hs-identifier hs-var">appliedTerm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; SerialisedScript
-&gt; [Data]
-&gt; ExceptT
     EvaluationError
     (WriterT LogOutput Identity)
     (Term NamedDeBruijn DefaultUni DefaultFun ())
forall (m :: * -&gt; *).
MonadError EvaluationError m =&gt;
LedgerPlutusVersion
-&gt; ProtocolVersion
-&gt; SerialisedScript
-&gt; [Data]
-&gt; m (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="PlutusLedgerApi.Common.Eval.html#mkTermToEvaluate"><span class="hs-identifier hs-var">mkTermToEvaluate</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerPlutusVersion
</span><a href="#local-6989586621679902481"><span class="hs-identifier hs-var">lv</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902480"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">SerialisedScript
</span><a href="#local-6989586621679902477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[Data]
</span><a href="#local-6989586621679902476"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679902410"><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="#local-6989586621679902410"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-type">UPLC.CountingSt</span></a></span><span> </span><span id="local-6989586621679902408"><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902408"><span class="hs-identifier hs-var">final</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679902407"><span class="annot"><span class="annottext">LogOutput
</span><a href="#local-6989586621679902407"><span class="hs-identifier hs-var">logs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>            </span><span class="annot"><span class="annottext">DefaultMachineParameters
-&gt; ExBudgetMode CountingSt DefaultUni DefaultFun
-&gt; EmitterMode DefaultUni DefaultFun
-&gt; Term NamedDeBruijn DefaultUni DefaultFun ()
-&gt; (Either
      (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
      (Term NamedDeBruijn DefaultUni DefaultFun ()),
    CountingSt, LogOutput)
forall (uni :: * -&gt; *) fun cost.
(Everywhere uni ExMemoryUsage, Ix fun, PrettyUni uni fun) =&gt;
MachineParameters CekMachineCosts CekValue uni fun
-&gt; ExBudgetMode cost uni fun
-&gt; EmitterMode uni fun
-&gt; Term NamedDeBruijn uni fun ()
-&gt; (Either
      (CekEvaluationException NamedDeBruijn uni fun)
      (Term NamedDeBruijn uni fun ()),
    cost, LogOutput)
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.runCekDeBruijn</span></a></span><span>
</span><span id="line-210"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolVersion -&gt; EvaluationContext -&gt; DefaultMachineParameters
</span><a href="PlutusLedgerApi.Common.Eval.html#toMachineParameters"><span class="hs-identifier hs-var">toMachineParameters</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolVersion
</span><a href="#local-6989586621679902480"><span class="hs-identifier hs-var">pv</span></a></span><span> </span><span class="annot"><span class="annottext">EvaluationContext
</span><a href="#local-6989586621679902478"><span class="hs-identifier hs-var">ectx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>                </span><span class="annot"><span class="annottext">ExBudgetMode CountingSt DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun. ExBudgetMode CountingSt uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.counting</span></a></span><span>
</span><span id="line-212"></span><span>                </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">VerboseMode
</span><a href="#local-6989586621679902479"><span class="hs-identifier hs-var">verbose</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseMode -&gt; VerboseMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">VerboseMode
</span><a href="PlutusLedgerApi.Common.Eval.html#Verbose"><span class="hs-identifier hs-var">Verbose</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EmitterMode DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun. EmitterMode uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.logEmitter</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EmitterMode DefaultUni DefaultFun
forall (uni :: * -&gt; *) fun. EmitterMode uni fun
</span><a href="../../../../plutus-core/html/src"><span class="hs-identifier hs-var">UPLC.noEmitter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>                </span><span class="annot"><span class="annottext">Term NamedDeBruijn DefaultUni DefaultFun ()
</span><a href="#local-6989586621679902475"><span class="hs-identifier hs-var">appliedTerm</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">LogOutput
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">LogOutput
</span><a href="#local-6989586621679902407"><span class="hs-identifier hs-var">logs</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">Either EvaluationError ()
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; Either e a -&gt; m a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">liftEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Either EvaluationError ()
 -&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ())
-&gt; Either EvaluationError ()
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
 -&gt; EvaluationError)
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
-&gt; Either EvaluationError ()
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">CekEvaluationException NamedDeBruijn DefaultUni DefaultFun
-&gt; EvaluationError
</span><a href="PlutusLedgerApi.Common.Eval.html#CekError"><span class="hs-identifier hs-var">CekError</span></a></span><span> </span><span class="annot"><span class="annottext">(Either
   (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
 -&gt; Either EvaluationError ())
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
-&gt; Either EvaluationError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
-&gt; Either
     (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun) ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (CekEvaluationException NamedDeBruijn DefaultUni DefaultFun)
  (Term NamedDeBruijn DefaultUni DefaultFun ())
</span><a href="#local-6989586621679902410"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="annottext">ExBudget
-&gt; ExceptT EvaluationError (WriterT LogOutput Identity) ExBudget
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///nix/store/r4n325d4bya4i1cviz6zrwmhm4j55yz4-ghc-9.2.3-doc/share/doc/ghc/html/libraries/base-4.16.2.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ExBudget
</span><a href="#local-6989586621679902408"><span class="hs-identifier hs-var">final</span></a></span><span>
</span><span id="line-218"></span></pre></body></html>